{"data":{"allMarkdownRemark":{"nodes":[{"id":"e2979e4d-1ec1-5b8e-aaf4-4014ab2c5fd8","fields":{"slug":"/post/typescript/camelcase-type/"},"html":"<h1>🤦🏻‍♀️<br />TL;DR</h1>\n<p><code>UPPER_SNAKE_CASE</code> 상수만 정의하면 자동으로 <code>camelCase</code> 타입까지 만들 수 있어요.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Separator</span> <span class=\"token operator\">=</span> <span class=\"token string\">' '</span> <span class=\"token operator\">|</span> <span class=\"token string\">'-'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'_'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">CamelCase<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token builtin\">string</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">infer</span> Char1<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Separator<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">infer</span> Char2<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">infer</span> Char3<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Lowercase<span class=\"token operator\">&lt;</span>Char1<span class=\"token operator\">></span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Uppercase<span class=\"token operator\">&lt;</span>Char2<span class=\"token operator\">></span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>CamelCase<span class=\"token operator\">&lt;</span>Char3<span class=\"token operator\">></span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token operator\">:</span> Lowercase<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"Bad\" style=\"position:relative;\">Bad<a href=\"#Bad\" aria-label=\"Bad permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> <span class=\"token constant\">DOCUMENT_TYPE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">MAIL_ORDER_BUSINESS_REPORT</span><span class=\"token operator\">:</span> <span class=\"token string\">'통신판매업 신고 서류'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">CERTIFICATE_OF_BUSINESS_REGISTRATION</span><span class=\"token operator\">:</span> <span class=\"token string\">'사업자 등록증'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">CORP_SEAL_CERTIFICATE</span><span class=\"token operator\">:</span> <span class=\"token string\">'법인 인감 증명서'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">COPY_OF_BANKBOOK</span><span class=\"token operator\">:</span> <span class=\"token string\">'통장 사본'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Params</span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    mailOrderBusinessReport<span class=\"token operator\">?</span><span class=\"token operator\">:</span> File<span class=\"token punctuation\">;</span>\n    certificateOfBusinessRegistration<span class=\"token operator\">?</span><span class=\"token operator\">:</span> File<span class=\"token punctuation\">;</span>\n    corpSealCertificate<span class=\"token operator\">?</span><span class=\"token operator\">:</span> File<span class=\"token punctuation\">;</span>\n    copyOfBankbook<span class=\"token operator\">?</span><span class=\"token operator\">:</span> File<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"Good\" style=\"position:relative;\">Good<a href=\"#Good\" aria-label=\"Good permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> <span class=\"token constant\">DOCUMENT_TYPE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">MAIL_ORDER_BUSINESS_REPORT</span><span class=\"token operator\">:</span> <span class=\"token string\">'통신판매업 신고 서류'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">CERTIFICATE_OF_BUSINESS_REGISTRATION</span><span class=\"token operator\">:</span> <span class=\"token string\">'사업자 등록증'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">CORP_SEAL_CERTIFICATE</span><span class=\"token operator\">:</span> <span class=\"token string\">'법인 인감 증명서'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">COPY_OF_BANKBOOK</span><span class=\"token operator\">:</span> <span class=\"token string\">'통장 사본'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">DocumentType</span> <span class=\"token operator\">=</span> <span class=\"token string\">'MAIL_ORDER_BUSINESS_REPORT'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'CERTIFICATE_OF_BUSINESS_REGISTRATION'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'CORP_SEAL_CERTIFICATE'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'COPY_OF_BANKBOOK'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Params</span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span><span class=\"token constant\">K</span> <span class=\"token keyword\">in</span> CamelCase<span class=\"token operator\">&lt;</span>DocumentType<span class=\"token operator\">></span><span class=\"token punctuation\">]</span><span class=\"token operator\">?</span><span class=\"token operator\">:</span> File<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"Best-\" style=\"position:relative;\">Best 👍<a href=\"#Best-\" aria-label=\"Best  permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> <span class=\"token constant\">DOCUMENT_TYPE</span> <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">freeze</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">MAIL_ORDER_BUSINESS_REPORT</span><span class=\"token operator\">:</span> <span class=\"token string\">'통신판매업 신고 서류'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">CERTIFICATE_OF_BUSINESS_REGISTRATION</span><span class=\"token operator\">:</span> <span class=\"token string\">'사업자 등록증'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">CORP_SEAL_CERTIFICATE</span><span class=\"token operator\">:</span> <span class=\"token string\">'법인 인감 증명서'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">COPY_OF_BANKBOOK</span><span class=\"token operator\">:</span> <span class=\"token string\">'통장 사본'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">DocumentType</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">keyof</span> <span class=\"token keyword\">typeof</span> <span class=\"token constant\">DOCUMENT_TYPE</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Params</span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span><span class=\"token constant\">K</span> <span class=\"token keyword\">in</span> CamelCase<span class=\"token operator\">&lt;</span>DocumentType<span class=\"token operator\">></span><span class=\"token punctuation\">]</span><span class=\"token operator\">?</span><span class=\"token operator\">:</span> File<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","frontmatter":{"category":"typescript","index":1,"title":"CamelCase Type 만들기","description":"UPPER_SNAKE_CASE, camelCase 방식으로 정의한 이름을 하나의 타입으로 정의해서 실전에 적용한 방법을 공유합니다.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/typescript/cover.jpg?raw=true","date":"2022-01-06","draft":null}},{"id":"cf389a5a-6187-5fa9-a410-b0d81b95f2b4","fields":{"slug":"/post/developer/wakatime-vs-codetime/"},"html":"<h1>💻🗓<br />한 주 동안 무엇을 개발했어요?</h1>\n<p>정신없이 개발하느라 시간은 쏜살같이 지나간 것 같은데 갑자기 <mark>‘한 주 동안 무엇을 개발했지?’</mark> 궁금해질 때가 있습니다. 프로젝트는 몇 개 작업했는지, 각 프로젝트마다 투자한 시간은 몇 분인지, 주로 작업한 파일은 무엇인지 등등…</p>\n<p>커밋 이력으로는 부족합니다. 커밋하기 전 로컬 환경에서 이루어진 수많은 삽질의 시간까지는 알 수가 없으니까요. 여러분도 오롯이 개발에 투자한 시간 동안 무엇을 개발했는지 한 번쯤은 궁금하지 않을까요?</p>\n<h2 id=\"WakaTime\" style=\"position:relative;\">WakaTime<a href=\"#WakaTime\" aria-label=\"WakaTime permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>며칠 전, 팀 동료가 슬랙으로 재밌는 플러그인을 공유했습니다. 그 이름은 바로 <a href=\"https://github.com/wakatime/vscode-wakatime\">WakaTime(와카타임)</a>. 이 플러그인은 개발하는 동안 메트릭을 수집해서 대시보드로 통계를 내는 일을 합니다. (물론 그 대시보드는 여러분만 볼 수 있어요.) 너무나도 유명해서 대부분의 에디터에 플러그인을 지원한다고 하네요. 저는 VS Code에서 냉큼 검색해 봤습니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8f95c0df8caa980e4acd1a2bd509351c/8102f/search-wakatime-extension-in-vscode.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.375%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"VS Code에서 WakaTime 익스텐션 검색하기\"\n        title=\"VS Code에서 WakaTime 익스텐션 검색하기\"\n        src=\"/static/8f95c0df8caa980e4acd1a2bd509351c/8102f/search-wakatime-extension-in-vscode.jpg\"\n        srcset=\"/static/8f95c0df8caa980e4acd1a2bd509351c/a3e66/search-wakatime-extension-in-vscode.jpg 480w,\n/static/8f95c0df8caa980e4acd1a2bd509351c/8102f/search-wakatime-extension-in-vscode.jpg 512w\"\n        sizes=\"(max-width: 512px) 100vw, 512px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>VS Code에서 WakaTime 익스텐션 검색하기</p></figcaption>\n  </figure></p>\n<p>시간을 다루는 플러그인이라 아이콘이 🕙 시계 모양입니다. 아이콘 디자인에는 큰 에너지를 쏟지 않은 듯 합니다. 와카! 내 시간을 관리해 줘! 주문을 외우고 설치를 시작했습니다. <small>(wa로 시작해서 그런지 와디즈스러워서 정들었..)</small></p>\n<h3 id=\"API-Key\" style=\"position:relative;\">API Key<a href=\"#API-Key\" aria-label=\"API Key permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>설치를 마치면 <strong>API Key</strong>를 입력해야 하는데요, API Key는 <strong><a href=\"https://wakatime.com/api-key\">여기</a></strong>에서 만들면 됩니다. 보통 설치 직후 바로 API Key를 입력하라는 프롬프트가 뜨는데 그렇지 않을 경우 <code>⌘ + Shift + P</code> - WakaTime API Key 단어를 검색해 보세요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9dc4073a99d3c1a094025cbae250b702/fb816/wakatime-api-key.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 10%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/9dc4073a99d3c1a094025cbae250b702/fb816/wakatime-api-key.jpg\"\n        srcset=\"/static/9dc4073a99d3c1a094025cbae250b702/a3e66/wakatime-api-key.jpg 480w,\n/static/9dc4073a99d3c1a094025cbae250b702/fb816/wakatime-api-key.jpg 960w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7dc4ed68b025315a1545829d8421e99c/a73e1/wakatime-your-secret-api-key.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.83333333333334%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/7dc4ed68b025315a1545829d8421e99c/aaf92/wakatime-your-secret-api-key.jpg\"\n        srcset=\"/static/7dc4ed68b025315a1545829d8421e99c/a3e66/wakatime-your-secret-api-key.jpg 480w,\n/static/7dc4ed68b025315a1545829d8421e99c/fb816/wakatime-your-secret-api-key.jpg 960w,\n/static/7dc4ed68b025315a1545829d8421e99c/aaf92/wakatime-your-secret-api-key.jpg 1920w,\n/static/7dc4ed68b025315a1545829d8421e99c/a73e1/wakatime-your-secret-api-key.jpg 2458w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"Dashboard\" style=\"position:relative;\">Dashboard<a href=\"#Dashboard\" aria-label=\"Dashboard permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>짝짝짝 👏👏👏 !!! 설정을 완료하였습니다. 이제 개발을 시작하세요. 대략 반나절 정도 지나면 대시보드에서 수집된 메트릭을 확인할 수 있습니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4cc515a84de7b587d712a889d6ddcd2c/998db/wakatime-dashboard.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.83333333333334%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"5시간 10분 5초 동안 개발한 나의 대시보드\"\n        title=\"5시간 10분 5초 동안 개발한 나의 대시보드\"\n        src=\"/static/4cc515a84de7b587d712a889d6ddcd2c/aaf92/wakatime-dashboard.jpg\"\n        srcset=\"/static/4cc515a84de7b587d712a889d6ddcd2c/a3e66/wakatime-dashboard.jpg 480w,\n/static/4cc515a84de7b587d712a889d6ddcd2c/fb816/wakatime-dashboard.jpg 960w,\n/static/4cc515a84de7b587d712a889d6ddcd2c/aaf92/wakatime-dashboard.jpg 1920w,\n/static/4cc515a84de7b587d712a889d6ddcd2c/1d134/wakatime-dashboard.jpg 2880w,\n/static/4cc515a84de7b587d712a889d6ddcd2c/998db/wakatime-dashboard.jpg 3072w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>5시간 10분 5초 동안 개발한 나의 대시보드</p></figcaption>\n  </figure></p>\n<h3 id=\"Goals\" style=\"position:relative;\">Goals<a href=\"#Goals\" aria-label=\"Goals permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>대시보드만 확인하면 재미가 없겠죠? WakaTime의 치트 키! <strong>목표</strong>를 설정해 보세요. ① 총 개발 시간, ② 특정 프로젝트 개발 시간, ③ 특정 언어 개발 시간, ④ 특정 에디터 개발 시간 이렇게 4가지 기준으로 세분화해서 설정 가능합니다.</p>\n<div style=\"position: relative; padding-bottom: 57.23370429252782%; height: 0;\"><iframe src=\"https://www.loom.com/embed/5850d8deddfd4d9ab730592a77191fe8\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%;\"></iframe></div>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b2d3182dab6c6bca7e8c0a4c90a34edc/998db/wakatime-goal.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.83333333333334%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"목표는 찬란하게, 실행은 초라하게\"\n        title=\"목표는 찬란하게, 실행은 초라하게\"\n        src=\"/static/b2d3182dab6c6bca7e8c0a4c90a34edc/aaf92/wakatime-goal.jpg\"\n        srcset=\"/static/b2d3182dab6c6bca7e8c0a4c90a34edc/a3e66/wakatime-goal.jpg 480w,\n/static/b2d3182dab6c6bca7e8c0a4c90a34edc/fb816/wakatime-goal.jpg 960w,\n/static/b2d3182dab6c6bca7e8c0a4c90a34edc/aaf92/wakatime-goal.jpg 1920w,\n/static/b2d3182dab6c6bca7e8c0a4c90a34edc/1d134/wakatime-goal.jpg 2880w,\n/static/b2d3182dab6c6bca7e8c0a4c90a34edc/998db/wakatime-goal.jpg 3072w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>목표는 찬란하게, 실행은 초라하게</p></figcaption>\n  </figure></p>\n<h3 id=\"Upgrade\" style=\"position:relative;\">Upgrade<a href=\"#Upgrade\" aria-label=\"Upgrade permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>Premium 버전으로 업그레이드하면 다음과 같이 확장된 서비스와 Teams 메뉴까지 사용할 수 있지만 개인적으로 사용할 때는 무료 버전만 사용해도 충분합니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/04df06a65963850088517288fddabd85/998db/wakatime-upgrade.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.83333333333334%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"팀에서 사용하면 뭔가 감시할 것 같은 👀\"\n        title=\"팀에서 사용하면 뭔가 감시할 것 같은 👀\"\n        src=\"/static/04df06a65963850088517288fddabd85/aaf92/wakatime-upgrade.jpg\"\n        srcset=\"/static/04df06a65963850088517288fddabd85/a3e66/wakatime-upgrade.jpg 480w,\n/static/04df06a65963850088517288fddabd85/fb816/wakatime-upgrade.jpg 960w,\n/static/04df06a65963850088517288fddabd85/aaf92/wakatime-upgrade.jpg 1920w,\n/static/04df06a65963850088517288fddabd85/1d134/wakatime-upgrade.jpg 2880w,\n/static/04df06a65963850088517288fddabd85/998db/wakatime-upgrade.jpg 3072w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>팀에서 사용하면 뭔가 감시할 것 같은 👀</p></figcaption>\n  </figure></p>\n<h2 id=\"CodeTime\" style=\"position:relative;\">CodeTime<a href=\"#CodeTime\" aria-label=\"CodeTime permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>VS Code에서 검색하면 같이 나오는 후발 주자 플러그인으로 사용 방법은 WakaTime과 비슷합니다. CodeTime은 API Key 대신 <strong>Token</strong>이라는 용어를 사용합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ab525751da0de73d3848e977dd9571c1/998db/codetime-account.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/ab525751da0de73d3848e977dd9571c1/aaf92/codetime-account.jpg\"\n        srcset=\"/static/ab525751da0de73d3848e977dd9571c1/a3e66/codetime-account.jpg 480w,\n/static/ab525751da0de73d3848e977dd9571c1/fb816/codetime-account.jpg 960w,\n/static/ab525751da0de73d3848e977dd9571c1/aaf92/codetime-account.jpg 1920w,\n/static/ab525751da0de73d3848e977dd9571c1/1d134/codetime-account.jpg 2880w,\n/static/ab525751da0de73d3848e977dd9571c1/998db/codetime-account.jpg 3072w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>근데 보시다시피 지원하는 에디터가 많지 않습니다. 지원하는 에디터가 늘어나더라도 WakaTime이 지원하는 에디터가 압도적으로 많아서 이 부분은 WakaTime을 넘어설 수 없을 것 같아요.</p>\n<h3 id=\"Overview\" style=\"position:relative;\">Overview<a href=\"#Overview\" aria-label=\"Overview permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>CodeTime은 총 개발 시간, 가장 많이 사용한 언어, 에디터, 플랫폼 등을 각 그래프 상단에 정리해서 보여주는 Overview 화면을 제공합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/298b606e3c62ad2320d918fd58ba2b98/9ad4e/codetime-overview.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.04166666666667%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/298b606e3c62ad2320d918fd58ba2b98/aaf92/codetime-overview.jpg\"\n        srcset=\"/static/298b606e3c62ad2320d918fd58ba2b98/a3e66/codetime-overview.jpg 480w,\n/static/298b606e3c62ad2320d918fd58ba2b98/fb816/codetime-overview.jpg 960w,\n/static/298b606e3c62ad2320d918fd58ba2b98/aaf92/codetime-overview.jpg 1920w,\n/static/298b606e3c62ad2320d918fd58ba2b98/1d134/codetime-overview.jpg 2880w,\n/static/298b606e3c62ad2320d918fd58ba2b98/9ad4e/codetime-overview.jpg 3840w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"Dashboard-1\" style=\"position:relative;\">Dashboard<a href=\"#Dashboard-1\" aria-label=\"Dashboard 1 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>중간에 재밌는 그래프가 하나 있습니다. <strong>Programming time per hour</strong>, 1시간에 몇 분 집중하고 몇 분 쉬는지 알 수 있는 그래프입니다. 여러분의 개발 패턴을 고스란히 알 수 있으니 한번 살펴보세요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8881a2d240d4f75a5feea63cda3db31a/9ad4e/codetime-dashboard.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 96.875%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/8881a2d240d4f75a5feea63cda3db31a/aaf92/codetime-dashboard.jpg\"\n        srcset=\"/static/8881a2d240d4f75a5feea63cda3db31a/a3e66/codetime-dashboard.jpg 480w,\n/static/8881a2d240d4f75a5feea63cda3db31a/fb816/codetime-dashboard.jpg 960w,\n/static/8881a2d240d4f75a5feea63cda3db31a/aaf92/codetime-dashboard.jpg 1920w,\n/static/8881a2d240d4f75a5feea63cda3db31a/1d134/codetime-dashboard.jpg 2880w,\n/static/8881a2d240d4f75a5feea63cda3db31a/9ad4e/codetime-dashboard.jpg 3840w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"결론\" style=\"position:relative;\">결론<a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>지원하는 에디터도 다양하고 목표도 설정할 수 있는 WakaTime을 사용해 보세요. CodeTime에 비해 업데이트 주기도 짧아서 안정성도 높고 새로운 기능 또한 빠르게 접할 수 있을 거예요.</p>","frontmatter":{"category":"developer","index":1,"title":"WakaTime vs CodeTime 🕖","description":"이 플러그인은 애플 워치처럼 내 개발 활동을 스마트하게 측정합니다. 대시보드 형태로 한눈에 확인할 수 있어요.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/developer/wakatime-vs-codetime/cover.jpg?raw=true","date":"2021-12-23","draft":null}},{"id":"ab9ade26-27a9-56bb-b934-e9f48bdc0237","fields":{"slug":"/post/kubernetes/kafka/"},"html":"<blockquote>\n<p>대규모 메시지 플랫폼 Apache Kafka(카프카)를 Amazon EKS 서비스에 배포해 봅시다. 본 문서는 카프카에 대한 기본적인 내용은 다루지 않습니다. 🙏</p>\n</blockquote>\n<h2 id=\"목차\" style=\"position:relative;\">목차<a href=\"#%EB%AA%A9%EC%B0%A8\" aria-label=\"목차 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<ol>\n<li><a href=\"#ZooKeeper\">ZooKeeper</a></li>\n<li><a href=\"#Kafka\">Kafka</a></li>\n<li><a href=\"#Kafka-Manager\">Kafka Manager</a></li>\n<li><a href=\"#Topic\">Topic</a></li>\n</ol>\n<h2 id=\"ZooKeeper\" style=\"position:relative;\">ZooKeeper<a href=\"#ZooKeeper\" aria-label=\"ZooKeeper permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>Apache <strong>ZooKeeper</strong>(주키퍼)는 분산 애플리케이션을 위한 분산 오픈 소스 코디네이션 서비스입니다. 분산 시스템을 다루기 위해 사용하는 중요한 서비스 중 하나로 분산 시스템이 안전하게 작동할 수 있는 API를 제공합니다.</p>\n<blockquote>\n<p>주키퍼를 개발할 때 아파치 개발자들은 마치 자신들이 동물원에 사는 것처럼 보인다고 말했습니다. 당시 Apache Pig(피그)를 비롯하여 동물의 이름을 프로젝트에 사용하고 있었기 때문입니다. 이 발언에 착안하여 분산 시스템(Kafka)은 다양한 동물들이 살고 있는 동물원으로, 동물원을 제대로 운영하려면 이를 통제하는 사육사(ZooKeeper)가 필요하다는 생각을 하게 되었습니다.</p>\n</blockquote>\n<p>주키퍼는 메타 정보를 저장합니다. <em>- 실제 메시지는 카프카가 저장합니다. -</em> 현재 카프카 서버가 몇 대 작동 중인지, 카프카 컨슈머가 어디까지 메시지를 읽었는지 등의 스냅샷 정보를 저장합니다.</p>\n<p>필자는 <strong>Helm</strong>(헬름)에서 제공하는 차트를 사용하였습니다. 헬름 차트에 대한 자세한 정보는 헬름 공식 문서의 <a href=\"https://github.com/helm/charts/tree/master/incubator/zookeeper\">zookeeper</a> 내용을 참조하세요.</p>\n<blockquote>\n<p>헬름은 카프카를 설치할 때 주키퍼를 자동으로 설치하면서 이름을 <code>zookeeper</code>가 아닌 <code>kafka-zookeeper</code>로 정의합니다. 필자는 헬름 차트를 인용하기 때문에 헬름에서 정의한 이름을 그대로 사용하였습니다.</p>\n</blockquote>\n<h3 id=\"PodDisruptionBudget\" style=\"position:relative;\">PodDisruptionBudget<a href=\"#PodDisruptionBudget\" aria-label=\"PodDisruptionBudget permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><code>PodDisruptionBudget</code>(파드 디스럽션 버짓) 오브젝트는 파드의 재시작 등에 의한 자발적 중단으로 일시에 중지되는 <em>- 복제된 -</em> 주키퍼 파드의 수를 제한합니다.</p>\n<p><strong>poddisruptionbudget.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> policy/v1beta1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> PodDisruptionBudget\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>zookeeper\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> zookeeper\n    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span> zookeeper<span class=\"token punctuation\">-</span>2.1.0\n    <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">heritage</span><span class=\"token punctuation\">:</span> Helm\n    <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> server\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> zookeeper\n      <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> kafka\n      <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> server\n  <span class=\"token key atrule\">maxUnavailable</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><code>selector</code>: 적용할 파드의 매칭 정보</li>\n<li><code>maxUnavailable</code>: 비정상 상태를 허용하는 파드의 수</li>\n</ul>\n<h3 id=\"ConfigMap\" style=\"position:relative;\">ConfigMap<a href=\"#ConfigMap\" aria-label=\"ConfigMap permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><code>ConfigMap</code>(컨피그맵) 오브젝트는 주키퍼 실행에 필요한 설정 정보를 미리 정의해 쿠버네티스에 저장소 형태로 저장합니다.</p>\n<p><strong>config-script.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ConfigMap\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>zookeeper\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> zookeeper\n    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span> zookeeper<span class=\"token punctuation\">-</span>2.1.0\n    <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">heritage</span><span class=\"token punctuation\">:</span> Helm\n    <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> server\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">ok</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n    #!/bin/sh\n    echo ruok | nc 127.0.0.1 ${1:-2181}</span>\n\n  <span class=\"token key atrule\">ready</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n    #!/bin/sh\n    echo ruok | nc 127.0.0.1 ${1:-2181}</span>\n\n  <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n    #!/bin/bash</span>\n\n    set <span class=\"token punctuation\">-</span>a\n    ROOT=$(echo /apache<span class=\"token punctuation\">-</span>zookeeper<span class=\"token punctuation\">-</span><span class=\"token important\">*)</span>\n\n    ZK_USER=$<span class=\"token punctuation\">{</span>ZK_USER<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span><span class=\"token string\">\"zookeeper\"</span><span class=\"token punctuation\">}</span>\n    ZK_LOG_LEVEL=$<span class=\"token punctuation\">{</span>ZK_LOG_LEVEL<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span><span class=\"token string\">\"INFO\"</span><span class=\"token punctuation\">}</span>\n    ZK_DATA_DIR=$<span class=\"token punctuation\">{</span>ZK_DATA_DIR<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span><span class=\"token string\">\"/data\"</span><span class=\"token punctuation\">}</span>\n    ZK_DATA_LOG_DIR=$<span class=\"token punctuation\">{</span>ZK_DATA_LOG_DIR<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span><span class=\"token string\">\"/data/log\"</span><span class=\"token punctuation\">}</span>\n    ZK_CONF_DIR=$<span class=\"token punctuation\">{</span>ZK_CONF_DIR<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span><span class=\"token string\">\"/conf\"</span><span class=\"token punctuation\">}</span>\n    ZK_CLIENT_PORT=$<span class=\"token punctuation\">{</span>ZK_CLIENT_PORT<span class=\"token punctuation\">:</span><span class=\"token number\">-2181</span><span class=\"token punctuation\">}</span>\n    ZK_SERVER_PORT=$<span class=\"token punctuation\">{</span>ZK_SERVER_PORT<span class=\"token punctuation\">:</span><span class=\"token number\">-2888</span><span class=\"token punctuation\">}</span>\n    ZK_ELECTION_PORT=$<span class=\"token punctuation\">{</span>ZK_ELECTION_PORT<span class=\"token punctuation\">:</span><span class=\"token number\">-3888</span><span class=\"token punctuation\">}</span>\n    ZK_TICK_TIME=$<span class=\"token punctuation\">{</span>ZK_TICK_TIME<span class=\"token punctuation\">:</span><span class=\"token number\">-2000</span><span class=\"token punctuation\">}</span>\n    ZK_INIT_LIMIT=$<span class=\"token punctuation\">{</span>ZK_INIT_LIMIT<span class=\"token punctuation\">:</span><span class=\"token number\">-10</span><span class=\"token punctuation\">}</span>\n    ZK_SYNC_LIMIT=$<span class=\"token punctuation\">{</span>ZK_SYNC_LIMIT<span class=\"token punctuation\">:</span><span class=\"token number\">-5</span><span class=\"token punctuation\">}</span>\n    ZK_HEAP_SIZE=$<span class=\"token punctuation\">{</span>ZK_HEAP_SIZE<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span>2G<span class=\"token punctuation\">}</span>\n    ZK_MAX_CLIENT_CNXNS=$<span class=\"token punctuation\">{</span>ZK_MAX_CLIENT_CNXNS<span class=\"token punctuation\">:</span><span class=\"token number\">-60</span><span class=\"token punctuation\">}</span>\n    ZK_MIN_SESSION_TIMEOUT=$<span class=\"token punctuation\">{</span>ZK_MIN_SESSION_TIMEOUT<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span> $((ZK_TICK_TIME<span class=\"token important\">*2))</span><span class=\"token punctuation\">}</span>\n    ZK_MAX_SESSION_TIMEOUT=$<span class=\"token punctuation\">{</span>ZK_MAX_SESSION_TIMEOUT<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span> $((ZK_TICK_TIME<span class=\"token important\">*20))</span><span class=\"token punctuation\">}</span>\n    ZK_SNAP_RETAIN_COUNT=$<span class=\"token punctuation\">{</span>ZK_SNAP_RETAIN_COUNT<span class=\"token punctuation\">:</span><span class=\"token number\">-3</span><span class=\"token punctuation\">}</span>\n    ZK_PURGE_INTERVAL=$<span class=\"token punctuation\">{</span>ZK_PURGE_INTERVAL<span class=\"token punctuation\">:</span><span class=\"token number\">-0</span><span class=\"token punctuation\">}</span>\n    ID_FILE=\"$ZK_DATA_DIR/myid\"\n    ZK_CONFIG_FILE=\"$ZK_CONF_DIR/zoo.cfg\"\n    LOG4J_PROPERTIES=\"$ZK_CONF_DIR/log4j.properties\"\n    HOST=$(hostname)\n    DOMAIN=`hostname <span class=\"token punctuation\">-</span>d`\n    ZOOCFG=zoo.cfg\n    ZOOCFGDIR=$ZK_CONF_DIR\n    JVMFLAGS=\"<span class=\"token punctuation\">-</span>Xmx$ZK_HEAP_SIZE <span class=\"token punctuation\">-</span>Xms$ZK_HEAP_SIZE\"\n\n    APPJAR=$(echo $ROOT/<span class=\"token important\">*jar)</span>\n    CLASSPATH=\"$<span class=\"token punctuation\">{</span>ROOT<span class=\"token punctuation\">}</span>/lib/<span class=\"token important\">*:$</span><span class=\"token punctuation\">{</span>APPJAR<span class=\"token punctuation\">}</span><span class=\"token punctuation\">:</span>$<span class=\"token punctuation\">{</span>ZK_CONF_DIR<span class=\"token punctuation\">}</span><span class=\"token punctuation\">:</span>\"\n\n    if <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> $HOST =~ (.<span class=\"token important\">*)-(</span><span class=\"token punctuation\">[</span>0<span class=\"token punctuation\">-</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span>+)<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>; then\n        NAME=$<span class=\"token punctuation\">{</span>BASH_REMATCH<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n        ORD=$<span class=\"token punctuation\">{</span>BASH_REMATCH<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n        MY_ID=$((ORD+1))\n    else\n        echo \"Failed to extract ordinal from hostname $HOST\"\n        exit 1\n    fi\n\n    mkdir <span class=\"token punctuation\">-</span>p $ZK_DATA_DIR\n    mkdir <span class=\"token punctuation\">-</span>p $ZK_DATA_LOG_DIR\n    echo $MY_ID <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ID_FILE\n\n    echo \"clientPort=$ZK_CLIENT_PORT\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"dataDir=$ZK_DATA_DIR\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"dataLogDir=$ZK_DATA_LOG_DIR\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"tickTime=$ZK_TICK_TIME\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"initLimit=$ZK_INIT_LIMIT\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"syncLimit=$ZK_SYNC_LIMIT\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"maxClientCnxns=$ZK_MAX_CLIENT_CNXNS\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"minSessionTimeout=$ZK_MIN_SESSION_TIMEOUT\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"maxSessionTimeout=$ZK_MAX_SESSION_TIMEOUT\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"autopurge.snapRetainCount=$ZK_SNAP_RETAIN_COUNT\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"autopurge.purgeInterval=$ZK_PURGE_INTERVAL\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"4lw.commands.whitelist=<span class=\"token important\">*\"</span> <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n\n    for (( i=1; i&lt;=$ZK_REPLICAS; i++ ))\n    do\n        echo \"server.$i=$NAME<span class=\"token punctuation\">-</span>$((i<span class=\"token punctuation\">-</span>1)).$DOMAIN<span class=\"token punctuation\">:</span>$ZK_SERVER_PORT<span class=\"token punctuation\">:</span>$ZK_ELECTION_PORT\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    done\n\n    rm <span class=\"token punctuation\">-</span>f $LOG4J_PROPERTIES\n\n    echo \"zookeeper.root.logger=$ZK_LOG_LEVEL<span class=\"token punctuation\">,</span> CONSOLE\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"zookeeper.console.threshold=$ZK_LOG_LEVEL\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"zookeeper.log.threshold=$ZK_LOG_LEVEL\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"zookeeper.log.dir=$ZK_DATA_LOG_DIR\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"zookeeper.log.file=zookeeper.log\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"zookeeper.log.maxfilesize=256MB\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"zookeeper.log.maxbackupindex=10\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"zookeeper.tracelog.dir=$ZK_DATA_LOG_DIR\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"zookeeper.tracelog.file=zookeeper_trace.log\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"log4j.rootLogger=\\$<span class=\"token punctuation\">{</span>zookeeper.root.logger<span class=\"token punctuation\">}</span>\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"log4j.appender.CONSOLE.Threshold=\\$<span class=\"token punctuation\">{</span>zookeeper.console.threshold<span class=\"token punctuation\">}</span>\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"log4j.appender.CONSOLE.layout.ConversionPattern=%d<span class=\"token punctuation\">{</span>ISO8601<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">[</span>myid<span class=\"token punctuation\">:</span>%X<span class=\"token punctuation\">{</span>myid<span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">-</span> %<span class=\"token punctuation\">-</span>5p <span class=\"token punctuation\">[</span>%t<span class=\"token punctuation\">:</span>%C<span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span>@%L<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">-</span> %m%n\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n\n    if <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">-</span>n \"$JMXDISABLE\" <span class=\"token punctuation\">]</span>\n    then\n        MAIN=org.apache.zookeeper.server.quorum.QuorumPeerMain\n    else\n        MAIN=\"<span class=\"token punctuation\">-</span>Dcom.sun.management.jmxremote <span class=\"token punctuation\">-</span>Dcom.sun.management.jmxremote.port=$JMXPORT <span class=\"token punctuation\">-</span>Dcom.sun.management.jmxremote.authenticate=$JMXAUTH <span class=\"token punctuation\">-</span>Dcom.sun.management.jmxremote.ssl=$JMXSSL <span class=\"token punctuation\">-</span>Dzookeeper.jmx.log4j.disable=$JMXLOG4J org.apache.zookeeper.server.quorum.QuorumPeerMain\"\n    fi\n\n    set <span class=\"token punctuation\">-</span>x\n    exec java <span class=\"token punctuation\">-</span>cp \"$CLASSPATH\" $JVMFLAGS $MAIN $ZK_CONFIG_FILE</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"Service\" style=\"position:relative;\">Service<a href=\"#Service\" aria-label=\"Service permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>service.yaml</strong></p>\n<p>클러스터 IP를 지정하면 쿠버네티스 클러스터 내에서 접근 가능한 내부 IP를 할당합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>zookeeper\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> zookeeper\n    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span> zookeeper<span class=\"token punctuation\">-</span>2.1.0\n    <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">heritage</span><span class=\"token punctuation\">:</span> Helm\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> ClusterIP\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> client\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2181</span>\n      <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> client\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> zookeeper\n    <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> kafka</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>service-headless.yaml</strong></p>\n<p><code>headless</code> 오브젝트는 단일 서비스 IP를 필요로 하지 않아 <code>None</code> 클러스터 IP를 명시적으로 지정하는 서비스를 의미합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>zookeeper<span class=\"token punctuation\">-</span>headless\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> zookeeper\n    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span> zookeeper<span class=\"token punctuation\">-</span>2.1.0\n    <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">heritage</span><span class=\"token punctuation\">:</span> Helm\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">clusterIP</span><span class=\"token punctuation\">:</span> None\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> client\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2181</span>\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> client\n      <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> election\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3888</span>\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> election\n      <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> server\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2888</span>\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> server\n      <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> zookeeper\n    <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> kafka</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"StatefulSet\" style=\"position:relative;\">StatefulSet<a href=\"#StatefulSet\" aria-label=\"StatefulSet permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>StatefulSet</strong>(스테이트풀셋) 오브젝트는 상태 유지가 필요한(stateful) 애플리케이션에 사용합니다. 파드를 수시로 재시작해도 볼륨을 삭제하지 않아 내용이 유실되지 않습니다.</p>\n<p><strong>statefulset.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> StatefulSet\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>zookeeper\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> zookeeper\n    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span> zookeeper<span class=\"token punctuation\">-</span>2.1.0\n    <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">heritage</span><span class=\"token punctuation\">:</span> Helm\n    <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> server\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">serviceName</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>zookeeper<span class=\"token punctuation\">-</span>headless\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> zookeeper\n      <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> kafka\n      <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> server\n  <span class=\"token key atrule\">updateStrategy</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> RollingUpdate\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> zookeeper\n        <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> kafka\n        <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> server\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">terminationGracePeriodSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1800</span>\n      <span class=\"token key atrule\">securityContext</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">fsGroup</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1000</span>\n        <span class=\"token key atrule\">runAsUser</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1000</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> zookeeper\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"zookeeper:3.5.5\"</span>\n          <span class=\"token key atrule\">imagePullPolicy</span><span class=\"token punctuation\">:</span> IfNotPresent\n          <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 50m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 128Mi\n            <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 200m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 128Mi\n          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token string\">\"/bin/bash\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token string\">\"-xec\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token string\">\"/config-scripts/run\"</span>\n          <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> client\n              <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2181</span>\n              <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> election\n              <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3888</span>\n              <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> server\n              <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2888</span>\n              <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n          <span class=\"token key atrule\">livenessProbe</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">exec</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n                <span class=\"token punctuation\">-</span> sh\n                <span class=\"token punctuation\">-</span> /config<span class=\"token punctuation\">-</span>scripts/ok\n            <span class=\"token key atrule\">initialDelaySeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">20</span>\n            <span class=\"token key atrule\">periodSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">30</span>\n            <span class=\"token key atrule\">timeoutSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span>\n            <span class=\"token key atrule\">failureThreshold</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n            <span class=\"token key atrule\">successThreshold</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n          <span class=\"token key atrule\">readinessProbe</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">exec</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n                <span class=\"token punctuation\">-</span> sh\n                <span class=\"token punctuation\">-</span> /config<span class=\"token punctuation\">-</span>scripts/ready\n            <span class=\"token key atrule\">initialDelaySeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">20</span>\n            <span class=\"token key atrule\">periodSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">30</span>\n            <span class=\"token key atrule\">timeoutSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span>\n            <span class=\"token key atrule\">failureThreshold</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n            <span class=\"token key atrule\">successThreshold</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n          <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZK_REPLICAS\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> JMXAUTH\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"false\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> JMXDISABLE\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"false\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> JMXPORT\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1099\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> JMXSSL\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"false\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZK_HEAP_SIZE\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"96M\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZK_SYNC_LIMIT\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"10\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZK_TICK_TIME\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2000\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZOO_AUTOPURGE_PURGEINTERVAL\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZOO_AUTOPURGE_SNAPRETAINCOUNT\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZOO_INIT_LIMIT\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"5\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZOO_MAX_CLIENT_CNXNS\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"60\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZOO_PORT\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2181\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZOO_STANDALONE_ENABLED\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"false\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZOO_TICK_TIME\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2000\"</span>\n          <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> data\n              <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /data\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> config\n              <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /config<span class=\"token punctuation\">-</span>scripts\n      <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> config\n          <span class=\"token key atrule\">configMap</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>zookeeper\n            <span class=\"token key atrule\">defaultMode</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0555</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> data\n          <span class=\"token key atrule\">emptyDir</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  <span class=\"token key atrule\">volumeClaimTemplates</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> data\n      <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">accessModes</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"ReadWriteOnce\"</span><span class=\"token punctuation\">]</span>\n        <span class=\"token key atrule\">storageClassName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ebs-default\"</span>\n        <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> 10Gi</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code>replicas</code> 필드 값에 따라 노드(서버)를 총 3개 생성하는데 이렇게 생성한 각각의 주키퍼 노드를 ZNode(지노드)라고 합니다. ZNode 중 1개는 Leader(리더) 노드, 나머지는 리더의 명령을 따르는 Follower(팔로워) 노드로 나뉩니다. 리더는 팔로워 노드가 중단됐을 때 자동 복구를 수행하는 중심 노드로 서버 구동과 동시에 선출됩니다.</p>\n<blockquote>\n<p>주키퍼 노드는 다음과 같은 알고리즘에 의하여 반드시 <strong>홀수</strong>로 생성해야 합니다.</p>\n<ul>\n<li>과반수 이상의 노드가 다운됐을 때 서비스를 중지합니다. 예를 들어, 3대 중 2대가 다운됐을 때 과반수 이상에 성립하여 서비스를 중지합니다.</li>\n<li>리더 노드가 트랜잭션 생성 후 팔로워 노드에 전파할 때 과반수 이상이 트랜잭션에 성공해야 클라이언트에 성공 결과를 반환합니다.</li>\n</ul>\n</blockquote>\n<p><code>PersistentVolumeClaim</code> 오브젝트로 정의하면 파드 이름을 불규칙적으로 지정하지만, <code>StatefulSet</code> 오브젝트는 <code>PersistentVolume</code> 리소스를 생성할 때 파드 이름을 규칙적으로 지정합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">zookeeper-0\nzookeeper-1\nzookeeper-2</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>파드를 생성할 때 동시에 모든 파드를 생성하지 않고 0부터 오름차순으로 하나씩 생성할 수 있는 순차 기동이 가능합니다. 반대로 삭제할 때는 내림차순으로 하나씩 삭제합니다.</p>\n<blockquote>\n<p>순차 기동에 의해 데이터를 유지하는 자세한 정보는 조대협의 <a href=\"https://bcho.tistory.com/1306\">StatefulSet</a> 내용을 참조하세요. 볼륨은 한 번 생성하면 삭제할 수 없기 때문에 <code>replicas</code> 필드 값을 늘릴 수는 있어도 줄일 수는 없습니다. 유의하세요.</p>\n</blockquote>\n<p><strong>kafka-zookeeper.yaml</strong></p>\n<p>배포해야 할 파일이 많은 경우 서비스를 배포하거나 추후 서비스를 삭제할 때 실수할 수 있기 때문에 하나의 파일에 모아서 <code>---</code> 구분선을 주는 방식으로 작업하세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\">&lt;insert poddisruptionbudget.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;insert config<span class=\"token punctuation\">-</span>script.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;insert service.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;insert service<span class=\"token punctuation\">-</span>headless.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;insert statefulset.yaml<span class=\"token punctuation\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl apply -f kafka-zookeeper.yaml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6736f173051e6f80cea2c1c0a65feafe/396d0/apply-kafka-zookeeper.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.583333333333332%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/6736f173051e6f80cea2c1c0a65feafe/396d0/apply-kafka-zookeeper.jpg\"\n        srcset=\"/static/6736f173051e6f80cea2c1c0a65feafe/a3e66/apply-kafka-zookeeper.jpg 480w,\n/static/6736f173051e6f80cea2c1c0a65feafe/396d0/apply-kafka-zookeeper.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"Kafka\" style=\"position:relative;\">Kafka<a href=\"#Kafka\" aria-label=\"Kafka permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>필자는 <strong>Helm</strong>(헬름)에서 제공하는 차트를 사용하였습니다. 헬름 차트에 대한 자세한 정보는 헬름 공식 문서의 <a href=\"https://github.com/helm/charts/tree/master/incubator/kafka\">Kafka</a> 내용을 참조하세요.</p>\n<h3 id=\"Service-1\" style=\"position:relative;\">Service<a href=\"#Service-1\" aria-label=\"Service 1 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>service-brokers.yaml</strong></p>\n<p><code>kafka-broker</code>(카프카 브로커)는 카프카 서버를 의미합니다. 카프카 브로커는 기본 9092 포트를 사용합니다.</p>\n<p>Kafka <strong>Cluster</strong>(클러스터)는 카프카를 실행하는 하나 이상의 서버(브로커)로 구성됩니다. 클러스터의 브로커 관리는 주키퍼가 수행합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/34a4caab6cfa342d39f29de18c804604/9bfa6/architecture-for-apache-kafka.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.958333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/34a4caab6cfa342d39f29de18c804604/aaf92/architecture-for-apache-kafka.jpg\"\n        srcset=\"/static/34a4caab6cfa342d39f29de18c804604/a3e66/architecture-for-apache-kafka.jpg 480w,\n/static/34a4caab6cfa342d39f29de18c804604/fb816/architecture-for-apache-kafka.jpg 960w,\n/static/34a4caab6cfa342d39f29de18c804604/aaf92/architecture-for-apache-kafka.jpg 1920w,\n/static/34a4caab6cfa342d39f29de18c804604/9bfa6/architecture-for-apache-kafka.jpg 1999w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">helm.sh/chart</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>0.20.5\n    <span class=\"token key atrule\">app.kubernetes.io/managed-by</span><span class=\"token punctuation\">:</span> Helm\n    <span class=\"token key atrule\">app.kubernetes.io/component</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>broker\n    <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">app.kubernetes.io/instance</span><span class=\"token punctuation\">:</span> kafka\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> broker\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">9092</span>\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> kafka\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app.kubernetes.io/component</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>broker\n    <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">app.kubernetes.io/instance</span><span class=\"token punctuation\">:</span> kafka</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>service-headless.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>headless\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">helm.sh/chart</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>0.20.5\n    <span class=\"token key atrule\">app.kubernetes.io/managed-by</span><span class=\"token punctuation\">:</span> Helm\n    <span class=\"token key atrule\">app.kubernetes.io/component</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>broker\n    <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">app.kubernetes.io/instance</span><span class=\"token punctuation\">:</span> kafka\n  <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">service.alpha.kubernetes.io/tolerate-unready-endpoints</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> broker\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">9092</span>\n  <span class=\"token key atrule\">clusterIP</span><span class=\"token punctuation\">:</span> None\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app.kubernetes.io/component</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>broker\n    <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">app.kubernetes.io/instance</span><span class=\"token punctuation\">:</span> kafka</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"StatefulSet-1\" style=\"position:relative;\">StatefulSet<a href=\"#StatefulSet-1\" aria-label=\"StatefulSet 1 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>statefulset.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> StatefulSet\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">helm.sh/chart</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>0.20.5\n    <span class=\"token key atrule\">app.kubernetes.io/managed-by</span><span class=\"token punctuation\">:</span> Helm\n    <span class=\"token key atrule\">app.kubernetes.io/component</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>broker\n    <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">app.kubernetes.io/instance</span><span class=\"token punctuation\">:</span> kafka\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app.kubernetes.io/component</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>broker\n      <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> kafka\n      <span class=\"token key atrule\">app.kubernetes.io/instance</span><span class=\"token punctuation\">:</span> kafka\n  <span class=\"token key atrule\">serviceName</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>headless\n  <span class=\"token key atrule\">podManagementPolicy</span><span class=\"token punctuation\">:</span> OrderedReady\n  <span class=\"token key atrule\">updateStrategy</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> OnDelete\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">helm.sh/chart</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>0.20.5\n        <span class=\"token key atrule\">app.kubernetes.io/managed-by</span><span class=\"token punctuation\">:</span> Helm\n        <span class=\"token key atrule\">app.kubernetes.io/component</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>broker\n        <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> kafka\n        <span class=\"token key atrule\">app.kubernetes.io/instance</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>broker\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"confluentinc/cp-kafka:5.0.1\"</span>\n          <span class=\"token key atrule\">imagePullPolicy</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"IfNotPresent\"</span>\n          <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 200m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 1Gi\n            <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 1000m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 1Gi\n          <span class=\"token key atrule\">livenessProbe</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">exec</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n                <span class=\"token punctuation\">-</span> sh\n                <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span>ec\n                <span class=\"token punctuation\">-</span> /usr/bin/jps <span class=\"token punctuation\">|</span> /bin/grep <span class=\"token punctuation\">-</span>q SupportedKafka\n            <span class=\"token key atrule\">initialDelaySeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">30</span>\n            <span class=\"token key atrule\">timeoutSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span>\n          <span class=\"token key atrule\">readinessProbe</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">tcpaSocket</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> kafka\n            <span class=\"token key atrule\">initialDelaySeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">30</span>\n            <span class=\"token key atrule\">periodSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span>\n            <span class=\"token key atrule\">timeoutSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span>\n            <span class=\"token key atrule\">successThreshold</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n            <span class=\"token key atrule\">failureThreshold</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n          <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">9092</span>\n              <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka\n          <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> POD_IP\n              <span class=\"token key atrule\">valueFrom</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">fieldRef</span><span class=\"token punctuation\">:</span>\n                  <span class=\"token key atrule\">fieldPath</span><span class=\"token punctuation\">:</span> status.podIP\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> POD_NAME\n              <span class=\"token key atrule\">valueFrom</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">fieldRef</span><span class=\"token punctuation\">:</span>\n                  <span class=\"token key atrule\">fieldPath</span><span class=\"token punctuation\">:</span> metadata.name\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> POD_NAMESPACE\n              <span class=\"token key atrule\">valueFrom</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">fieldRef</span><span class=\"token punctuation\">:</span>\n                  <span class=\"token key atrule\">fieldPath</span><span class=\"token punctuation\">:</span> metadata.namespace\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> KAFKA_HEAP_OPTS\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">-</span>Xmx512m <span class=\"token punctuation\">-</span>Xms512m\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> KAFKA_ZOOKEEPER_CONNECT\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"kafka-zookeeper:2181\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> KAFKA_LOG_DIRS\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/opt/kafka/data/logs\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"KAFKA_CONFLUENT_SUPPORT_METRICS_ENABLE\"</span>\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"false\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> KAFKA_JMX_PORT\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"5555\"</span>\n          <span class=\"token comment\"># This is required because the Downward API does not yet support identification of</span>\n          <span class=\"token comment\"># pod numbering in statefulsets. Thus, we are required to specify a command which</span>\n          <span class=\"token comment\"># allows us to extract the pod ID for usage as the Kafka Broker ID.</span>\n          <span class=\"token comment\"># See: https://github.com/kubernetes/kubernetes/issues/31218</span>\n          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> sh\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span>exc\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n              unset KAFKA_PORT &amp;&amp; \\\n              export KAFKA_BROKER_ID=${POD_NAME##*-} &amp;&amp; \\\n              export KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://${POD_IP}:9092 &amp;&amp; \\\n              exec /etc/confluent/docker/run</span>\n          <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> datadir\n              <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/opt/kafka/data\"</span>\n      <span class=\"token key atrule\">terminationGracePeriodSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">60</span>\n  <span class=\"token key atrule\">volumeClaimTemplates</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> datadir\n      <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">accessModes</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"ReadWriteOnce\"</span><span class=\"token punctuation\">]</span>\n        <span class=\"token key atrule\">storageClassName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ebs-default\"</span>\n        <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> 20Gi</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>kafka.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\">&lt;insert service<span class=\"token punctuation\">-</span>brokers.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;insert service<span class=\"token punctuation\">-</span>headless.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;insert statefulset.yaml<span class=\"token punctuation\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl apply -f kafka.yaml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/be0bd095f8c9077362baadbe16f22c20/396d0/apply-kafka.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15.625%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/be0bd095f8c9077362baadbe16f22c20/396d0/apply-kafka.jpg\"\n        srcset=\"/static/be0bd095f8c9077362baadbe16f22c20/a3e66/apply-kafka.jpg 480w,\n/static/be0bd095f8c9077362baadbe16f22c20/396d0/apply-kafka.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"Kafka-Manager\" style=\"position:relative;\">Kafka Manager<a href=\"#Kafka-Manager\" aria-label=\"Kafka Manager permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>Kafka Manager</strong>(카프카 매니저)는 GUI 기반 카프카 관리 도구입니다. 대다수 카프카 작업을 CLI로 관리하는 것은 가독성이 낮아 비효율적이기 때문에 편의적인 측면에서 필수적으로 설치하는 것을 권장합니다.</p>\n<p>주키퍼 파드에 접속하여 <strong>zkCli</strong>(주키퍼 클라이언트)를 실행해 봅시다. 파드 3개 중 아무 파드에 접속해도 무방합니다. 필자는 <code>kafka-zookeeper-0</code> 파드에 접속하였습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl <span class=\"token builtin class-name\">exec</span> -it kafka-zookeeper-0 --namesapce<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span> <span class=\"token function\">bash</span>\nzkCli.sh</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><code>kafka-manager</code> 노드를 생성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span><span class=\"token punctuation\">[</span>zk: localhost:2181<span class=\"token punctuation\">(</span>CONNECTED<span class=\"token punctuation\">)</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> create /kafka-manager</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/17a0544603256fb05ecae78958f083d1/396d0/create-node-for-kafka-manager.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 175.41666666666666%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/17a0544603256fb05ecae78958f083d1/396d0/create-node-for-kafka-manager.jpg\"\n        srcset=\"/static/17a0544603256fb05ecae78958f083d1/a3e66/create-node-for-kafka-manager.jpg 480w,\n/static/17a0544603256fb05ecae78958f083d1/396d0/create-node-for-kafka-manager.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>kafka-manager.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>manager\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>manager\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>manager\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>manager\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>manager\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>manager\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> solsson/kafka<span class=\"token punctuation\">-</span>manager@sha256<span class=\"token punctuation\">:</span>9da595ecbb733074a1d3c6091a1e0c384da4f4e1f19f4e16276062278da8e592\n          <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n          <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZK_HOSTS\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"kafka-zookeeper:2181/kafka-manager\"</span>\n          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> ./bin/kafka<span class=\"token punctuation\">-</span>manager\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span>Dhttp.port=80\n          <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 500m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 512Mi\n            <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 100m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 384Mi</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<p><code>image</code> 필드의 경우 <a href=\"https://hub.docker.com/r/solsson/kafka-manager\">Kafka Docker Builds</a> 컨테이너 이미지를 사용하였습니다. Docker Hub 사이트에서 <a href=\"https://hub.docker.com/search?q=kafka-manager&#x26;type=image\">Explore</a> 검색을 통해 다른 이미지를 사용해도 무방합니다.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl apply -f kafka-manager.yaml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ca57d755d59417dfeaefa8ea57e96c6a/396d0/apply-kafka-manager.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 13.750000000000002%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/ca57d755d59417dfeaefa8ea57e96c6a/396d0/apply-kafka-manager.jpg\"\n        srcset=\"/static/ca57d755d59417dfeaefa8ea57e96c6a/a3e66/apply-kafka-manager.jpg 480w,\n/static/ca57d755d59417dfeaefa8ea57e96c6a/396d0/apply-kafka-manager.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>쿠버네티스의 API 서버로 프록시하는 명령어를 입력해서 카프카 매니저 웹 서비스에 접속해 봅시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl proxy</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2ad9b563105a54c42e8aa06911dceaf2/396d0/proxy.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 11.249999999999998%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/2ad9b563105a54c42e8aa06911dceaf2/396d0/proxy.jpg\"\n        srcset=\"/static/2ad9b563105a54c42e8aa06911dceaf2/a3e66/proxy.jpg 480w,\n/static/2ad9b563105a54c42e8aa06911dceaf2/396d0/proxy.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>브라우저에서 <a href=\"\">http://127.0.0.1:8001/api/v1/namespaces/<code>&#x3C;your-namespace></code>/services/http:kafka-manager:80/proxy/</a> 접속 후 다음과 같은 화면이 보인다면 카프카 매니저가 잘 구동된 것입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 645px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4fafa4781cc0ceafc2dae7b715cb7267/49419/kafka-manager.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.29166666666666%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/4fafa4781cc0ceafc2dae7b715cb7267/49419/kafka-manager.jpg\"\n        srcset=\"/static/4fafa4781cc0ceafc2dae7b715cb7267/a3e66/kafka-manager.jpg 480w,\n/static/4fafa4781cc0ceafc2dae7b715cb7267/49419/kafka-manager.jpg 645w\"\n        sizes=\"(max-width: 645px) 100vw, 645px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><code>kafka-manager</code> 노드를 생성하지 않으면 다음과 같은 오류 문구를 화면에 표시합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d6111e5fcd2c00266c11d0983b6b3dea/83ca0/kafka-manager-failed.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.75%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/d6111e5fcd2c00266c11d0983b6b3dea/aaf92/kafka-manager-failed.jpg\"\n        srcset=\"/static/d6111e5fcd2c00266c11d0983b6b3dea/a3e66/kafka-manager-failed.jpg 480w,\n/static/d6111e5fcd2c00266c11d0983b6b3dea/fb816/kafka-manager-failed.jpg 960w,\n/static/d6111e5fcd2c00266c11d0983b6b3dea/aaf92/kafka-manager-failed.jpg 1920w,\n/static/d6111e5fcd2c00266c11d0983b6b3dea/83ca0/kafka-manager-failed.jpg 2001w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>오류 문구에 당황하지 마시고 주키퍼 클라이언트에서 해당 노드를 생성한 후 다음 명령어를 입력해 파드를 삭제하세요. 쿠버네티스의 <code>delete</code> 명령어로 파드를 삭제하면 새로운 파드를 다시 생성하기 때문에 <code>restart</code> 개념과 유사합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl delete pod/<span class=\"token operator\">&lt;</span>kafka-manager-pod<span class=\"token operator\">></span> --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Kafka Manager - Cluster - Add Cluster 버튼을 클릭하여 새 클러스터를 추가해 봅시다. 클러스터를 생성하는 목적은 카프카 매니저에서 토픽을 관리하기 위한 것으로 카프카, 주키퍼 클러스터와는 무관합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/22e9f4cdf96b211b7a3f87b34d3bba82/5ab81/create-kafka-manager-cluster.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 455.83333333333337%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/22e9f4cdf96b211b7a3f87b34d3bba82/5ab81/create-kafka-manager-cluster.jpg\"\n        srcset=\"/static/22e9f4cdf96b211b7a3f87b34d3bba82/a3e66/create-kafka-manager-cluster.jpg 480w,\n/static/22e9f4cdf96b211b7a3f87b34d3bba82/5ab81/create-kafka-manager-cluster.jpg 660w\"\n        sizes=\"(max-width: 660px) 100vw, 660px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li><strong>JMX</strong>(Java Management eXtensions): 실행 중인 애플리케이션의 정상 동작 여부 및 상태를 관리하는 API</li>\n<li><strong>Polling</strong>(폴링): 동기화 처리 등을 목적으로 다른 애플리케이션의 상태를 주기적으로 검사하여 일정한 조건을 만족할 때 송수신 등의 자료 처리를 하는 방식</li>\n</ul>\n<p>카프카 매니저 클러스터 생성을 완료하였습니다. 이제 카프카 매니저로 토픽을 관리해 봅시다.</p>\n<h2 id=\"Topic\" style=\"position:relative;\">Topic<a href=\"#Topic\" aria-label=\"Topic permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>Kafka <strong>Topic</strong>(토픽)은 메시지를 저장하는 곳입니다. 카프카의 브로커는 토픽을 기준으로 메시지를 관리합니다. 카프카 파드에 접속해 봅시다. 실제 토픽은 주키퍼에 저장하고 카프카는 참조만 하기 때문에 파드 3개 중 아무 파드에 접속해도 무방합니다. 필자는 <code>kafka-0</code> 파드에 접속하였습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl <span class=\"token builtin class-name\">exec</span> -it kafka-0 --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span> <span class=\"token function\">bash</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>토픽을 생성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kafka-topics --zookeeper kafka-zookeeper:2181 --create --topic <span class=\"token operator\">&lt;</span>insert-your-topic-name<span class=\"token operator\">></span> --partitions <span class=\"token number\">3</span> --replication-factor <span class=\"token number\">2</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li><code>--partitions</code>: 토픽을 몇 개의 파티션으로 나눌 것인지 정의합니다. 메시지 병목 현상을 방지하기 위해 하나의 토픽을 여러 개의 파티션으로 나누어 병렬 형태로 작업하는 것이 좋습니다.</li>\n<li><code>--replication-factor</code>: 메시지를 몇 개로 복제할 것인지 정의합니다. 안정성을 위하여 2로 설정하는 것을 권장합니다.</li>\n</ul>\n<p>토픽을 여러 개 생성할 때는 명령문 마지막에 <code>;</code>(세미콜론)을 추가합니다. <code>\\</code>(백슬래시)를 활용하면 줄 바꿈을 적용하여 즉시 실행을 방지합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kafka-topics --zookeeper kafka-zookeeper:2181 --create --topic <span class=\"token operator\">&lt;</span>insert-your-topic-name<span class=\"token operator\">></span> --partitions <span class=\"token number\">3</span> --replication-factor <span class=\"token number\">2</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">\\</span>\nkafka-topics --zookeeper kafka-zookeeper:2181 --create --topic <span class=\"token operator\">&lt;</span>insert-your-topic-name<span class=\"token operator\">></span> --partitions <span class=\"token number\">3</span> --replication-factor <span class=\"token number\">2</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>토픽을 확인합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kafka-topics --zookeeper kafka-zookeeper:2181 --list</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>토픽을 삭제합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kafka-topics --zookeeper kafka-zookeeper:2181 --delete --topic <span class=\"token operator\">&lt;</span>insert-your-topic-name<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>토픽에 저장된 메시지를 확인합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kafka-console-consumer --bootstrap-server kafka:9092 --topic <span class=\"token operator\">&lt;</span>your-topic-name<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>","frontmatter":{"category":"kubernetes","index":9,"title":"Apache Kafka","description":"Apache Kafka(아파치 카프카)는 오픈 소스 대규모 메시지 플랫폼입니다. 모빌리티 스타트업에서 차량의 패킷을 실시간으로 수집하는 데 사용하였습니다.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/kubernetes/kafka/cover.jpg?raw=true","date":"2020-05-25","draft":null}},{"id":"5dd1589e-3eef-5561-accf-bbe44538f5d1","fields":{"slug":"/post/kubernetes/drone/"},"html":"<blockquote>\n<p>실습을 통해 GitHub 전용 <a href=\"https://drone.io/\">Drone(드론)</a> 서버를 Amazon EKS 서비스에 배포해 봅시다. 내용이 방대하여 사전 설치가 필요한 명령어 및 프로그램에 대한 설명이 생략될 수 있습니다. 🙏</p>\n</blockquote>\n<p><strong>CI/CD</strong>는 개발 단계를 자동화하여 애플리케이션을 보다 짧은 주기로 고객에게 제공하는 방법입니다. CI/CD는 새로운 코드 통합으로 인해 개발 및 운영팀에 발생하는 문제를 해결하여 최소한의 노력으로 코드를 배포하는 것을 목표로 합니다.</p>\n<ul>\n<li><code>CI</code>: 자동화 프로세스의 지속적인 통합(Continuous Integration)</li>\n<li><code>CD</code>: 지속적인 서비스 제공(Continuous Delivery) 또는 지속적인 배포(Continuous Deployment)</li>\n</ul>\n<h2 id=\"목차\" style=\"position:relative;\">목차<a href=\"#%EB%AA%A9%EC%B0%A8\" aria-label=\"목차 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<ol>\n<li><a href=\"#IAM-%EC%A0%95%EC%B1%85-%EC%97%B0%EA%B2%B0\">IAM 정책 연결</a></li>\n<li><a href=\"#GitHub-OAuth-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EB%93%B1%EB%A1%9D\">GitHub OAuth 애플리케이션 등록</a></li>\n<li><a href=\"%ED%8D%BC%EB%B8%94%EB%A6%AD-%EB%B3%B4%EC%95%88-%EA%B7%B8%EB%A3%B9-%EC%83%9D%EC%84%B1\">퍼블릭 보안 그룹 생성</a></li>\n<li><a href=\"Drone-%ED%85%9C%ED%94%8C%EB%A6%BF-%EC%B6%94%EC%B6%9C\">Drone 템플릿 추출</a></li>\n<li><a href=\"#%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EB%B0%B0%ED%8F%AC\">오브젝트 배포</a>\n<ul>\n<li><a href=\"#Namespace\">Namespace</a></li>\n<li><a href=\"#Secret\">Secret</a></li>\n<li><a href=\"#PersistentVolumeClaim\">PersistentVolumeClaim</a></li>\n<li><a href=\"#ServiceAccount\">ServiceAccount</a></li>\n<li><a href=\"#ClusterRole\">ClusterRole</a></li>\n<li><a href=\"#Role\">Role</a></li>\n<li><a href=\"#Deployment\">Deployment</a></li>\n<li><a href=\"#Service\">Service</a></li>\n<li><a href=\"#Ingress\">Ingress</a></li>\n</ul>\n</li>\n<li><a href=\"#GitHub-Webhook-%EC%84%A4%EC%A0%95\">GitHub Webhook 설정</a></li>\n</ol>\n<h2 id=\"IAM-정책-연결\" style=\"position:relative;\">IAM 정책 연결<a href=\"#IAM-%EC%A0%95%EC%B1%85-%EC%97%B0%EA%B2%B0\" aria-label=\"IAM 정책 연결 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>IAM - 역할 - <code>&#x3C;your-cluster-name></code> 항목을 검색하여 <code>NodeInstanceRole</code> 단어를 포함하는 역할에 <code>ingressController-iam-policy</code> 정책을 연결하세요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1155px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a98e73f62835c40667200a4eb0d19f0b/010af/attach-policy-for-ingress-controller.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95.41666666666667%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/a98e73f62835c40667200a4eb0d19f0b/010af/attach-policy-for-ingress-controller.jpg\"\n        srcset=\"/static/a98e73f62835c40667200a4eb0d19f0b/a3e66/attach-policy-for-ingress-controller.jpg 480w,\n/static/a98e73f62835c40667200a4eb0d19f0b/fb816/attach-policy-for-ingress-controller.jpg 960w,\n/static/a98e73f62835c40667200a4eb0d19f0b/010af/attach-policy-for-ingress-controller.jpg 1155w\"\n        sizes=\"(max-width: 1155px) 100vw, 1155px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"GitHub-OAuth-애플리케이션-등록\" style=\"position:relative;\">GitHub OAuth 애플리케이션 등록<a href=\"#GitHub-OAuth-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EB%93%B1%EB%A1%9D\" aria-label=\"GitHub OAuth 애플리케이션 등록 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>Drone 공식 문서의 <a href=\"https://docs.drone.io/server/provider/github/\">GitHub</a> 내용 중 <strong>Step 1: Preparation - Create an OAuth Application</strong> 항목을 참조하세요.</p>\n<h2 id=\"퍼블릭-보안-그룹-생성\" style=\"position:relative;\">퍼블릭 보안 그룹 생성<a href=\"#%ED%8D%BC%EB%B8%94%EB%A6%AD-%EB%B3%B4%EC%95%88-%EA%B7%B8%EB%A3%B9-%EC%83%9D%EC%84%B1\" aria-label=\"퍼블릭 보안 그룹 생성 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>로드 밸런서에 적용할 퍼블릭 보안 그룹을 생성합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1155px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6b982fb362c6b382a298ea0303186602/010af/create-security-group-for-public.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 150.41666666666666%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/6b982fb362c6b382a298ea0303186602/010af/create-security-group-for-public.jpg\"\n        srcset=\"/static/6b982fb362c6b382a298ea0303186602/a3e66/create-security-group-for-public.jpg 480w,\n/static/6b982fb362c6b382a298ea0303186602/fb816/create-security-group-for-public.jpg 960w,\n/static/6b982fb362c6b382a298ea0303186602/010af/create-security-group-for-public.jpg 1155w\"\n        sizes=\"(max-width: 1155px) 100vw, 1155px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>필자는 기존 퍼블릭 보안 그룹을 복사하여 생성하였습니다. 여러분은 새로운 보안 그룹을 생성할 때 위와 같이 설정하세요.</p>\n</blockquote>\n<h2 id=\"Drone-템플릿-추출\" style=\"position:relative;\">Drone 템플릿 추출<a href=\"#Drone-%ED%85%9C%ED%94%8C%EB%A6%BF-%EC%B6%94%EC%B6%9C\" aria-label=\"Drone 템플릿 추출 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>필자는 <strong>Helm</strong>(헬름)에서 제공하는 차트를 사용하였습니다. 헬름 차트에 대한 자세한 정보는 헬름 공식 문서의 <a href=\"https://github.com/helm/charts/tree/master/stable/drone\">Drone.io</a> 내용을 참조하세요.</p>\n<p><a href=\"https://github.com/helm/charts/blob/master/stable/drone/values.yaml\">values.yaml</a> 템플릿을 복사한 후 다음 필드를 수정하세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token punctuation\">...</span>\n<span class=\"token key atrule\">ingress</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n<span class=\"token punctuation\">...</span>\n<span class=\"token key atrule\">sourceControl</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span> github\n  <span class=\"token key atrule\">secret</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">github</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">clientID</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>github<span class=\"token punctuation\">-</span>oauth<span class=\"token punctuation\">-</span>client<span class=\"token punctuation\">-</span>id<span class=\"token punctuation\">></span>\n    <span class=\"token key atrule\">clientSecretKey</span><span class=\"token punctuation\">:</span> clientSecret\n    <span class=\"token key atrule\">clientSecretValue</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>github<span class=\"token punctuation\">-</span>oauth<span class=\"token punctuation\">-</span>client<span class=\"token punctuation\">-</span>secret<span class=\"token punctuation\">></span>\n    <span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//github.com\n<span class=\"token punctuation\">...</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>헬름 차트를 설치합니다. (해당 서비스는 템플릿 추출 후 삭제할 것입니다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>helm repo <span class=\"token function\">add</span> stable https://kubernetes-charts.storage.googleapis.com\nhelm <span class=\"token function\">install</span> drone -f values.yaml stable/drone</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f922e032cf37962b53ec88c50aa2a437/396d0/install-helm-chart-for-drone.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.66666666666666%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/f922e032cf37962b53ec88c50aa2a437/396d0/install-helm-chart-for-drone.jpg\"\n        srcset=\"/static/f922e032cf37962b53ec88c50aa2a437/a3e66/install-helm-chart-for-drone.jpg 480w,\n/static/f922e032cf37962b53ec88c50aa2a437/396d0/install-helm-chart-for-drone.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>배포한 서비스를 확인합니다. 헬름은 네임스페이스를 지정하지 않으면 <code>default</code> 네임스페이스에 배포합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>helm list</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bdede8e0cd76ce1de25be465236a1d1e/396d0/helm-list-releases.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.708333333333332%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/bdede8e0cd76ce1de25be465236a1d1e/396d0/helm-list-releases.jpg\"\n        srcset=\"/static/bdede8e0cd76ce1de25be465236a1d1e/a3e66/helm-list-releases.jpg 480w,\n/static/bdede8e0cd76ce1de25be465236a1d1e/396d0/helm-list-releases.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><code>default</code> 네임스페이스의 파드를 조회하면 <code>drone-drone-server-***</code> 형태의 파드가 실행 중인 것을 확인할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl get pod --namespace<span class=\"token operator\">=</span>default</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3043fe7147580ceff1d6155aac435175/396d0/get-drone-pod.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/3043fe7147580ceff1d6155aac435175/396d0/get-drone-pod.jpg\"\n        srcset=\"/static/3043fe7147580ceff1d6155aac435175/a3e66/get-drone-pod.jpg 480w,\n/static/3043fe7147580ceff1d6155aac435175/396d0/get-drone-pod.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>템플릿을 추출합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>helm template default stable/drone</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>내용을 전체 복사한 후 임시 <code>.yaml</code> 파일에 다음과 같이 정리합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\">&lt;drone/templates/secrets.yaml<span class=\"token punctuation\">></span> <span class=\"token comment\"># DRONE_RPC_SECRET</span>\n<span class=\"token punctuation\">---</span>\n&lt;drone/templates/secrets.yaml<span class=\"token punctuation\">></span> <span class=\"token comment\"># DRONE_GITHUB_CLIENT_SECRET</span>\n<span class=\"token punctuation\">---</span>\n&lt;drone/templates/pvc.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;drone/templates/service<span class=\"token punctuation\">-</span>account<span class=\"token punctuation\">-</span>pipeline.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;drone/templates/service<span class=\"token punctuation\">-</span>account.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;drone/templates/role.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;drone/templates/role<span class=\"token punctuation\">-</span>pipeline.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;drone/templates/role<span class=\"token punctuation\">-</span>binding.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;drone/templates/role<span class=\"token punctuation\">-</span>binding<span class=\"token punctuation\">-</span>pipeline.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;drone/templates/service.yaml<span class=\"token punctuation\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>파드를 조회하여 <code>Annotations.checksum/secrets</code> 필드의 값을 복사한 후 별도로 보관합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl describe pod/<span class=\"token operator\">&lt;</span>drone-server-pod<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2bc9cb65c3363c423cd21f5f1ed8ca6d/396d0/describe-drone-server.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 125.83333333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/2bc9cb65c3363c423cd21f5f1ed8ca6d/396d0/describe-drone-server.jpg\"\n        srcset=\"/static/2bc9cb65c3363c423cd21f5f1ed8ca6d/a3e66/describe-drone-server.jpg 480w,\n/static/2bc9cb65c3363c423cd21f5f1ed8ca6d/396d0/describe-drone-server.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>헬름 차트를 삭제합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>helm uninstall drone\nrelease <span class=\"token string\">\"drone\"</span> uninstalled</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h2 id=\"오브젝트-배포\" style=\"position:relative;\">오브젝트 배포<a href=\"#%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EB%B0%B0%ED%8F%AC\" aria-label=\"오브젝트 배포 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<h3 id=\"Namespace\" style=\"position:relative;\">Namespace<a href=\"#Namespace\" aria-label=\"Namespace permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>쿠버네티스에 드론 서버를 설치하기 위해 가장 먼저 해야 할 일은 <strong>네임스페이스</strong>를 생성하는 것입니다. 다음 명령어를 입력합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl create namespace <span class=\"token operator\">&lt;</span>insert-your-namespace-name<span class=\"token operator\">></span>\nkubectl get namespaces</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8b249de3f359780e81c3494ec58c9c01/396d0/create-namespace.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.708333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/8b249de3f359780e81c3494ec58c9c01/396d0/create-namespace.jpg\"\n        srcset=\"/static/8b249de3f359780e81c3494ec58c9c01/a3e66/create-namespace.jpg 480w,\n/static/8b249de3f359780e81c3494ec58c9c01/396d0/create-namespace.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>필자는 <code>craft-box</code> 네임스페이스를 생성하였습니다. 여러분이 원하는 네임스페이스를 생성하세요.</p>\n</blockquote>\n<h3 id=\"Secret\" style=\"position:relative;\">Secret<a href=\"#Secret\" aria-label=\"Secret permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>drone-rpc-secret.yaml</strong></p>\n<p>이전 단계에서 추출한 <code>DRONE_RPC_SECRET</code> 값을 <code>base64</code> 형태로 변환합니다. 서버와 서버와의 RPC(Remote Procedure Call, 원격 프로시저 호출) 연결을 인증하는 데 사용합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span><span class=\"token builtin class-name\">echo</span> -n <span class=\"token string\">'&lt;drone-rpc-secret>'</span> <span class=\"token operator\">|</span> base64</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li><code>-n</code>: 개행 문자 인코딩을 방지합니다. (자세한 정보는 <code>$ man echo</code> 내용을 참조하세요.)</li>\n</ul>\n<p>변환한 정보를 <code>&#x3C;secret></code> 필드에 삽입합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Secret\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> drone\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> craft<span class=\"token punctuation\">-</span>box\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> drone\n    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"drone-2.3.1\"</span>\n    <span class=\"token key atrule\">heritage</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Helm\"</span>\n<span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> Opaque\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">secret</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"&lt;base64-encoded-drone-rpc-secret>\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><code>Opaque</code>: 키-값(key-value) 포맷의 시크릿 타입</li>\n</ul>\n<p><strong>drone-github-client-secret.yaml</strong></p>\n<p>이전 단계에서 추출한 <code>&#x3C;github-oauth-client-secret></code> 값을 <code>base64</code> 형태로 변환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span><span class=\"token builtin class-name\">echo</span> -n <span class=\"token string\">'&lt;your-github-oauth-client-secret>'</span> <span class=\"token operator\">|</span> base64</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>변환한 정보를 <code>&#x3C;clientSecret></code> 필드에 삽입합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Secret\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> drone<span class=\"token punctuation\">-</span>source<span class=\"token punctuation\">-</span>control\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> craft<span class=\"token punctuation\">-</span>box\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> drone\n    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"drone-2.3.1\"</span>\n    <span class=\"token key atrule\">heritage</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Helm\"</span>\n<span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> Opaque\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">clientSecret</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"&lt;base64-encoded-your-github-oauth-client-secret>\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>secrets.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\">&lt;drone<span class=\"token punctuation\">-</span>rpc<span class=\"token punctuation\">-</span>secret.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;drone<span class=\"token punctuation\">-</span>github<span class=\"token punctuation\">-</span>client<span class=\"token punctuation\">-</span>secret.yaml<span class=\"token punctuation\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"PersistentVolumeClaim\" style=\"position:relative;\">PersistentVolumeClaim<a href=\"#PersistentVolumeClaim\" aria-label=\"PersistentVolumeClaim permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>PersistentVolumeClaim</strong> 오브젝트는 사용할 볼륨에 대한 설정을 정의해 <strong>PersistentVolume</strong>을 생성할 수 있도록 요청합니다.</p>\n<p><strong>pvc.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> PersistentVolumeClaim\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> drone\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> craft<span class=\"token punctuation\">-</span>box\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">accessModes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"ReadWriteOnce\"</span>\n  <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1Gi\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"ServiceAccount\" style=\"position:relative;\">ServiceAccount<a href=\"#ServiceAccount\" aria-label=\"ServiceAccount permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>쿠버네티스 클러스터 API에 접근하기 위해 유효한 사용자인지 인증을 거쳐야 합니다. 다양한 인증 방법 중 <strong>ServiceAccount</strong> 오브젝트로 <code>drone</code>, <code>drone-pipeline</code> 사용자 계정을 만들어 적용해 봅시다.</p>\n<p><strong>service-account.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ServiceAccount\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> drone\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> craft<span class=\"token punctuation\">-</span>box\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> drone\n    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"drone-2.3.1\"</span>\n    <span class=\"token key atrule\">heritage</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Helm\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>service-account-pipeline.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ServiceAccount\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> drone<span class=\"token punctuation\">-</span>pipeline\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> craft<span class=\"token punctuation\">-</span>box\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> drone\n    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"drone-2.3.1\"</span>\n    <span class=\"token key atrule\">heritage</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Helm\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"Role\" style=\"position:relative;\">Role<a href=\"#Role\" aria-label=\"Role permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>Role</strong> 오브젝트는 특정 네임스페이스 내 API와 리소스에 대한 권한을 명시한 규칙들의 집합입니다. 인증을 완료한 사용자가 어떤 API에 접근이 가능한지, 어떤 리소스에 어떠한 작업들이 가능한지 등의 권한을 정의합니다.</p>\n<p><strong>role.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Role\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> drone\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> craft<span class=\"token punctuation\">-</span>box\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> drone\n    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"drone-2.3.1\"</span>\n    <span class=\"token key atrule\">heritage</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Helm\"</span>\n<span class=\"token key atrule\">rules</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> batch\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> jobs\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"*\"</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> extensions\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> deployments\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> get\n      <span class=\"token punctuation\">-</span> list\n      <span class=\"token punctuation\">-</span> patch\n      <span class=\"token punctuation\">-</span> update</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>role-binding.yaml</strong></p>\n<p><strong>RoleBinding</strong> 오브젝트는 <em>- ServiceAccount 오브젝트에서 정의한 -</em> <code>drone</code> 사용자와 Role 권한을 연결합니다. 즉, 사용자에게 권한을 부여하지만 그 권한에 대한 정보는 Role이 지정합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> RoleBinding\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> drone\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> craft<span class=\"token punctuation\">-</span>box\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> drone\n    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"drone-2.3.1\"</span>\n    <span class=\"token key atrule\">heritage</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Helm\"</span>\n<span class=\"token key atrule\">roleRef</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">apiGroup</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io\n  <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Role\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> drone\n<span class=\"token key atrule\">subjects</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ServiceAccount\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> drone\n    <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> craft<span class=\"token punctuation\">-</span>box</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"ClusterRole\" style=\"position:relative;\">ClusterRole<a href=\"#ClusterRole\" aria-label=\"ClusterRole permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>ClusterRole</strong> 오브젝트는 특정 네임스페이스에 대한 권한이 아닌 클러스터 전체에 대한 권한을 관리합니다. 네임스페이스에 한정되지 않은 API와 리소스에 대한 권한도 지정할 수 있습니다.</p>\n<p><strong>role-pipeline.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ClusterRole\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> drone<span class=\"token punctuation\">-</span>pipeline\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> craft<span class=\"token punctuation\">-</span>box\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> drone\n    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"drone-2.3.1\"</span>\n    <span class=\"token key atrule\">heritage</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Helm\"</span>\n<span class=\"token key atrule\">rules</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> extensions\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> deployments\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> get\n      <span class=\"token punctuation\">-</span> list\n      <span class=\"token punctuation\">-</span> watch\n      <span class=\"token punctuation\">-</span> patch\n      <span class=\"token punctuation\">-</span> update\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"\"</span>\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> namespaces\n      <span class=\"token punctuation\">-</span> configmaps\n      <span class=\"token punctuation\">-</span> secrets\n      <span class=\"token punctuation\">-</span> pods\n      <span class=\"token punctuation\">-</span> services\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> create\n      <span class=\"token punctuation\">-</span> delete\n      <span class=\"token punctuation\">-</span> get\n      <span class=\"token punctuation\">-</span> list\n      <span class=\"token punctuation\">-</span> watch\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"\"</span>\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> pods/log\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> get</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>role-binding-pipeline.yaml</strong></p>\n<p><strong>ClusterRoleBinding</strong> 오브젝트는 <em>- ServiceAccount 오브젝트에서 정의한 -</em> <code>drone-pipeline</code> 사용자와 ClusterRole 권한을 연결합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ClusterRoleBinding\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> drone<span class=\"token punctuation\">-</span>pipeline\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> craft<span class=\"token punctuation\">-</span>box\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> drone\n    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"drone-2.3.1\"</span>\n    <span class=\"token key atrule\">heritage</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Helm\"</span>\n<span class=\"token key atrule\">subjects</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ServiceAccount\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> drone<span class=\"token punctuation\">-</span>pipeline\n    <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> craft<span class=\"token punctuation\">-</span>box\n<span class=\"token key atrule\">roleRef</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ClusterRole\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> drone<span class=\"token punctuation\">-</span>pipeline\n  <span class=\"token key atrule\">apiGroup</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"Service\" style=\"position:relative;\">Service<a href=\"#Service\" aria-label=\"Service permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>Service</strong> 오브젝트는 고유한 DNS 이름을 부여합니다. 서비스 등록 후 쿠버네티스 안에서 별칭 형태로 서비스에 적용할 수 있습니다.</p>\n<p><strong>service.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> drone\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> craft<span class=\"token punctuation\">-</span>box\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> drone\n    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"drone-2.3.1\"</span>\n    <span class=\"token key atrule\">heritage</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Helm\"</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> NodePort\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> http\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> drone\n    <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> server</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"Deployment\" style=\"position:relative;\">Deployment<a href=\"#Deployment\" aria-label=\"Deployment permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>deployment-server.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> drone<span class=\"token punctuation\">-</span>server\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> craft<span class=\"token punctuation\">-</span>box\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> drone\n    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"drone-2.3.1\"</span>\n    <span class=\"token key atrule\">heritage</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Helm\"</span>\n    <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> server\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> drone\n      <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> server\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">checksum/secrets</span><span class=\"token punctuation\">:</span> &lt;paste<span class=\"token punctuation\">-</span>your<span class=\"token punctuation\">-</span>checksum/secrets<span class=\"token punctuation\">-</span>string<span class=\"token punctuation\">></span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> drone\n        <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> server\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">serviceAccountName</span><span class=\"token punctuation\">:</span> drone\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> server\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"docker.io/drone/drone:1.6.1\"</span>\n          <span class=\"token key atrule\">imagePullPolicy</span><span class=\"token punctuation\">:</span> IfNotPresent\n          <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DRONE_KUBERNETES_ENABLED\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DRONE_KUBERNETES_NAMESPACE\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> craft<span class=\"token punctuation\">-</span>box\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DRONE_KUBERNETES_SERVICE_ACCOUNT\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> drone<span class=\"token punctuation\">-</span>pipeline\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DRONE_GIT_ALWAYS_AUTH\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DRONE_SERVER_HOST\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"&lt;your-drone-server-host>\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DRONE_RPC_PROTO\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"http\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DRONE_RPC_HOST\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> drone.craft<span class=\"token punctuation\">-</span>box<span class=\"token punctuation\">:</span><span class=\"token number\">80</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DRONE_SERVER_PROTO\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"https\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DRONE_RPC_SECRET\n              <span class=\"token key atrule\">valueFrom</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">secretKeyRef</span><span class=\"token punctuation\">:</span>\n                  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> drone\n                  <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> secret\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DRONE_DATABASE_DATASOURCE\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/var/lib/drone/drone.sqlite\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DRONE_DATABASE_DRIVER\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"sqlite3\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DRONE_CPU_SHARES\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DRONE_CPU_SET\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1,2\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DRONE_MEMORY_LIMIT\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2147483648\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DRONE_RUNNER_CAPACITY\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DRONE_LOGS_DEBUG\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"false\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DRONE_USER_CREATE\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"username:&lt;your-github-username>,admin:true\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DRONE_GITHUB_CLIENT_ID\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>github<span class=\"token punctuation\">-</span>oauth<span class=\"token punctuation\">-</span>client<span class=\"token punctuation\">-</span>id<span class=\"token punctuation\">></span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DRONE_GITHUB_SERVER\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//github.com\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DRONE_GITHUB_CLIENT_SECRET\n              <span class=\"token key atrule\">valueFrom</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">secretKeyRef</span><span class=\"token punctuation\">:</span>\n                  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> drone<span class=\"token punctuation\">-</span>source<span class=\"token punctuation\">-</span>control\n                  <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> clientSecret\n          <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> http\n              <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n              <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> https\n              <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">443</span>\n              <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> grpc\n              <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">9000</span>\n              <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n          <span class=\"token key atrule\">livenessProbe</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">httpGet</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /\n              <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> http\n          <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"200m\"</span>\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"300Mi\"</span>\n            <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"30m\"</span>\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"100Mi\"</span>\n          <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> data\n              <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /var/lib/drone\n      <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> data\n          <span class=\"token key atrule\">persistentVolumeClaim</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">claimName</span><span class=\"token punctuation\">:</span> drone</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>drone.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\">&lt;secrets.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;pvc.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;service<span class=\"token punctuation\">-</span>account.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;service<span class=\"token punctuation\">-</span>account<span class=\"token punctuation\">-</span>pipeline.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;role.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;role<span class=\"token punctuation\">-</span>binding.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;role<span class=\"token punctuation\">-</span>pipeline.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;role<span class=\"token punctuation\">-</span>binding<span class=\"token punctuation\">-</span>pipeline.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;service.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;deployment<span class=\"token punctuation\">-</span>server.yaml<span class=\"token punctuation\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl apply -f drone.yaml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7cd9568d8f6f1198da5a183851db4266/396d0/apply-drone.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.458333333333332%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/7cd9568d8f6f1198da5a183851db4266/396d0/apply-drone.jpg\"\n        srcset=\"/static/7cd9568d8f6f1198da5a183851db4266/a3e66/apply-drone.jpg 480w,\n/static/7cd9568d8f6f1198da5a183851db4266/396d0/apply-drone.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"Ingress\" style=\"position:relative;\">Ingress<a href=\"#Ingress\" aria-label=\"Ingress permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>Ingress</strong> 오브젝트를 배포하면 로드 밸런서를 생성합니다.</p>\n<p><strong>ingress-drone-external.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> extensions/v1beta1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Ingress\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> drone<span class=\"token punctuation\">-</span>external\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> craft<span class=\"token punctuation\">-</span>box\n  <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">kubernetes.io/ingress.class</span><span class=\"token punctuation\">:</span> alb\n    <span class=\"token key atrule\">alb.ingress.kubernetes.io/certificate-arn</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>aws<span class=\"token punctuation\">-</span>certificate<span class=\"token punctuation\">-</span>manager<span class=\"token punctuation\">-</span>arn<span class=\"token punctuation\">></span>\n    <span class=\"token key atrule\">alb.ingress.kubernetes.io/listen-ports</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'[{\"HTTPS\":443}]'</span>\n    <span class=\"token key atrule\">alb.ingress.kubernetes.io/scheme</span><span class=\"token punctuation\">:</span> internet<span class=\"token punctuation\">-</span>facing\n    <span class=\"token key atrule\">alb.ingress.kubernetes.io/subnets</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>public<span class=\"token punctuation\">-</span>subnet<span class=\"token punctuation\">-</span>id<span class=\"token punctuation\">-</span>1<span class=\"token punctuation\">></span><span class=\"token punctuation\">,</span> &lt;your<span class=\"token punctuation\">-</span>public<span class=\"token punctuation\">-</span>subnet<span class=\"token punctuation\">-</span>id<span class=\"token punctuation\">-</span>2<span class=\"token punctuation\">></span><span class=\"token punctuation\">,</span> &lt;your<span class=\"token punctuation\">-</span>public<span class=\"token punctuation\">-</span>subnet<span class=\"token punctuation\">-</span>id<span class=\"token punctuation\">-</span>3<span class=\"token punctuation\">></span>\n    <span class=\"token key atrule\">alb.ingress.kubernetes.io/security-groups</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>public<span class=\"token punctuation\">-</span>security<span class=\"token punctuation\">-</span>group<span class=\"token punctuation\">-</span>id<span class=\"token punctuation\">></span><span class=\"token punctuation\">,</span> &lt;your<span class=\"token punctuation\">-</span>cluster<span class=\"token punctuation\">-</span>shared<span class=\"token punctuation\">-</span>node<span class=\"token punctuation\">-</span>security<span class=\"token punctuation\">-</span>group<span class=\"token punctuation\">-</span>id<span class=\"token punctuation\">></span><span class=\"token punctuation\">,</span> &lt;your<span class=\"token punctuation\">-</span>nodegroup<span class=\"token punctuation\">-</span>security<span class=\"token punctuation\">-</span>group<span class=\"token punctuation\">-</span>id<span class=\"token punctuation\">></span>\n    <span class=\"token key atrule\">alb.ingress.kubernetes.io/tags</span><span class=\"token punctuation\">:</span> Env=Dev<span class=\"token punctuation\">,</span>Group=CraftBox\n    <span class=\"token key atrule\">alb.ingress.kubernetes.io/healthcheck-path</span><span class=\"token punctuation\">:</span> /health\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">rules</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>drone<span class=\"token punctuation\">-</span>server<span class=\"token punctuation\">-</span>host<span class=\"token punctuation\">></span>\n      <span class=\"token key atrule\">http</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">paths</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /*\n            <span class=\"token key atrule\">backend</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">serviceName</span><span class=\"token punctuation\">:</span> drone\n              <span class=\"token key atrule\">servicePort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl apply -f ingress-drone-external.yaml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b81fc4e11227a85ea9289e00460c7ad2/396d0/apply-ingress-drone-external.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.208333333333332%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/b81fc4e11227a85ea9289e00460c7ad2/396d0/apply-ingress-drone-external.jpg\"\n        srcset=\"/static/b81fc4e11227a85ea9289e00460c7ad2/a3e66/apply-ingress-drone-external.jpg 480w,\n/static/b81fc4e11227a85ea9289e00460c7ad2/396d0/apply-ingress-drone-external.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>지금은 <code>ADDRESS</code> 필드에 엔드포인트 주소에 해당하는 값이 없기 때문에 설정한 호스트로 접속이 불가합니다.</p>\n</blockquote>\n<p>Route 53 - 호스팅 영역 - <code>&#x3C;your-domain></code> - 레코드 세트 생성 - <code>&#x3C;your-drone-server-host></code> 이름의 레코드를 생성합니다. 별칭으로 이전 단계에서 생성한 로드 밸런서를 선택합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1311cb2dcb9eba8af2b926850135d019/137a6/create-route-53-record-set.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.416666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/1311cb2dcb9eba8af2b926850135d019/aaf92/create-route-53-record-set.jpg\"\n        srcset=\"/static/1311cb2dcb9eba8af2b926850135d019/a3e66/create-route-53-record-set.jpg 480w,\n/static/1311cb2dcb9eba8af2b926850135d019/fb816/create-route-53-record-set.jpg 960w,\n/static/1311cb2dcb9eba8af2b926850135d019/aaf92/create-route-53-record-set.jpg 1920w,\n/static/1311cb2dcb9eba8af2b926850135d019/1d134/create-route-53-record-set.jpg 2880w,\n/static/1311cb2dcb9eba8af2b926850135d019/137a6/create-route-53-record-set.jpg 2993w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>레코드 생성 후 호스트와 로드 밸런서의 엔드포인트 주소의 연결 상태를 확인합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl get ingresses --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e98cc726d22da401fed45e7fe43786c1/396d0/create-route-53-record-set-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.708333333333332%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/e98cc726d22da401fed45e7fe43786c1/396d0/create-route-53-record-set-2.jpg\"\n        srcset=\"/static/e98cc726d22da401fed45e7fe43786c1/a3e66/create-route-53-record-set-2.jpg 480w,\n/static/e98cc726d22da401fed45e7fe43786c1/396d0/create-route-53-record-set-2.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>로드 밸런서 전파에는 다소 시간이 소요됩니다. 따라서 <em>- 몇 시간이 지나도 -</em> <code>ADDRESS</code> 필드에 값이 없을 수 있습니다. 호스팅의 경우 쿠버네티스에서 관리하지 않는 AWS 서비스로 요청 시 바로 처리가 되지 않는 점에 유의하세요.</p>\n<p>(+) <em>- 필자의 경험에 의하면 -</em> <code>Unhealthy</code> 경고를 표시하더라도 <code>paths</code> 필드에 해당하는 오브젝트를 배포하면 주소를 찾으면서 엔드포인트 값이 들어오는 것으로 보입니다.</p>\n</blockquote>\n<p>브라우저에서 <a href=\"\"><code>&#x3C;your-drone-server-host></code></a> 접속 후 다음과 같은 화면이 보인다면 드론 서버가 잘 구동된 것입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1137px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/12f6ff23721ad5d2c93dc7e7961fa2a5/340f3/drone-ci-repositories.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.29166666666667%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/12f6ff23721ad5d2c93dc7e7961fa2a5/340f3/drone-ci-repositories.jpg\"\n        srcset=\"/static/12f6ff23721ad5d2c93dc7e7961fa2a5/a3e66/drone-ci-repositories.jpg 480w,\n/static/12f6ff23721ad5d2c93dc7e7961fa2a5/fb816/drone-ci-repositories.jpg 960w,\n/static/12f6ff23721ad5d2c93dc7e7961fa2a5/340f3/drone-ci-repositories.jpg 1137w\"\n        sizes=\"(max-width: 1137px) 100vw, 1137px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"ERROR-Login-Failed-Bad-credentials\" style=\"position:relative;\">[ERROR] Login Failed. Bad credentials<a href=\"#ERROR-Login-Failed-Bad-credentials\" aria-label=\"ERROR Login Failed Bad credentials permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><a href=\"\"><code>&#x3C;your-drone-server-host></code>/login/error?message=Bad%20credentials</a> 주소로 이동하면서 다음과 같은 문구를 화면에 표시하면 <code>DRONE_GITHUB_CLIENT_SECRET</code> 값을 검토할 필요가 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1137px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2f7faae35af5352235bb844b44023935/340f3/drone-ci-login-failed-bad-credentials.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.208333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/2f7faae35af5352235bb844b44023935/340f3/drone-ci-login-failed-bad-credentials.jpg\"\n        srcset=\"/static/2f7faae35af5352235bb844b44023935/a3e66/drone-ci-login-failed-bad-credentials.jpg 480w,\n/static/2f7faae35af5352235bb844b44023935/fb816/drone-ci-login-failed-bad-credentials.jpg 960w,\n/static/2f7faae35af5352235bb844b44023935/340f3/drone-ci-login-failed-bad-credentials.jpg 1137w\"\n        sizes=\"(max-width: 1137px) 100vw, 1137px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>다음 명령어를 입력하여 <code>drone-server</code> 내부로 접속합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl <span class=\"token builtin class-name\">exec</span> -it <span class=\"token operator\">&lt;</span>drone-server-pod<span class=\"token operator\">></span> --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span> <span class=\"token function\">sh</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>다음 명령어를 입력하면 <em>- 다소 복잡하긴 하지만 -</em> 파드를 조회하는 과정을 생략할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl <span class=\"token builtin class-name\">exec</span> -it <span class=\"token variable\"><span class=\"token variable\">$(</span>kubectl get pods -o <span class=\"token assign-left variable\">jsonpath</span><span class=\"token operator\">=</span><span class=\"token string\">\"{.items[0].metadata.name}\"</span> --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span> -l <span class=\"token string\">\"component=server,app=drone\"</span><span class=\"token variable\">)</span></span> --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span> <span class=\"token function\">sh</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><code>export</code> 명령어로 환경 변수 <code>DRONE_GITHUB_CLIENT_SECRET</code> 값을 확인하세요. 혹시 개행 문자가 포함되어 줄 바꿈 처리가 된 것은 아닌지 확인하세요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9eb3e62e2c00676bee14e15b20c5369e/ffe9b/exec-drone-server.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 120.83333333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/9eb3e62e2c00676bee14e15b20c5369e/ffe9b/exec-drone-server.jpg\"\n        srcset=\"/static/9eb3e62e2c00676bee14e15b20c5369e/a3e66/exec-drone-server.jpg 480w,\n/static/9eb3e62e2c00676bee14e15b20c5369e/fb816/exec-drone-server.jpg 960w,\n/static/9eb3e62e2c00676bee14e15b20c5369e/ffe9b/exec-drone-server.jpg 1590w\"\n        sizes=\"(max-width: 1590px) 100vw, 1590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>값은 일치하지만 줄 바꿈 처리가 된 경우 <code>&#x3C;github-oauth-client-secret></code> 값을 <code>base64</code> 형태로 변환하면서 개행 문자가 포함된 것으로 자격 증명 시 오류가 발생합니다. <code>echo</code> 명령어로 인코딩 시 <code>-n</code> 옵션을 꼭 사용하세요.</p>\n<h2 id=\"GitHub-Webhook-설정\" style=\"position:relative;\">GitHub Webhook 설정<a href=\"#GitHub-Webhook-%EC%84%A4%EC%A0%95\" aria-label=\"GitHub Webhook 설정 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>GitHub <strong>Webhook</strong>(웹훅)은 구독한 이벤트에 대한 작업 수행 시 해당 정보를 HTTP POST 방식으로 전달합니다. Drone CI에서 저장소를 활성화한 후 웹훅을 설정해 봅시다.</p>\n<blockquote>\n<p>Drone CI는 웹훅 설정 시 저장소별 Secret 키를 생성합니다. 여러분이 GitHub에서 웹훅을 직접 등록하는 것은 <em>- Secret 키를 생성할 수 없기 때문에 -</em> 불가합니다.</p>\n</blockquote>\n<p>Drone CI(<code>&#x3C;your-drone-server-host></code>) - Repositories - <code>&#x3C;your-github-repository></code> - <strong>ACTIVE</strong> 버튼을 클릭합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1137px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ad0560a11e2b422ae747bc0bcc590994/340f3/drone-ci-activate-repository.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.916666666666668%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/ad0560a11e2b422ae747bc0bcc590994/340f3/drone-ci-activate-repository.jpg\"\n        srcset=\"/static/ad0560a11e2b422ae747bc0bcc590994/a3e66/drone-ci-activate-repository.jpg 480w,\n/static/ad0560a11e2b422ae747bc0bcc590994/fb816/drone-ci-activate-repository.jpg 960w,\n/static/ad0560a11e2b422ae747bc0bcc590994/340f3/drone-ci-activate-repository.jpg 1137w\"\n        sizes=\"(max-width: 1137px) 100vw, 1137px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>ACTIVATE REPOSITORY</strong> 버튼을 클릭해 저장소를 활성화합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1137px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/833acd9fa29c14adb95e73c7bc69d5c6/340f3/drone-ci-activate-repository-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.16666666666667%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/833acd9fa29c14adb95e73c7bc69d5c6/340f3/drone-ci-activate-repository-2.jpg\"\n        srcset=\"/static/833acd9fa29c14adb95e73c7bc69d5c6/a3e66/drone-ci-activate-repository-2.jpg 480w,\n/static/833acd9fa29c14adb95e73c7bc69d5c6/fb816/drone-ci-activate-repository-2.jpg 960w,\n/static/833acd9fa29c14adb95e73c7bc69d5c6/340f3/drone-ci-activate-repository-2.jpg 1137w\"\n        sizes=\"(max-width: 1137px) 100vw, 1137px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>설정을 진행합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1152px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3141776fbbf6da47556404e1f7bbaa6c/4472f/drone-ci-activate-repository-3.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 180.83333333333331%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/3141776fbbf6da47556404e1f7bbaa6c/4472f/drone-ci-activate-repository-3.jpg\"\n        srcset=\"/static/3141776fbbf6da47556404e1f7bbaa6c/a3e66/drone-ci-activate-repository-3.jpg 480w,\n/static/3141776fbbf6da47556404e1f7bbaa6c/fb816/drone-ci-activate-repository-3.jpg 960w,\n/static/3141776fbbf6da47556404e1f7bbaa6c/4472f/drone-ci-activate-repository-3.jpg 1152w\"\n        sizes=\"(max-width: 1152px) 100vw, 1152px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li><strong>Main</strong>\n<ul>\n<li>\n<p>Project settings: 저장소 보호 여부를 설정합니다.</p>\n<table>\n<thead>\n<tr>\n<th>구분</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Protected</td>\n<td>인증을 완료한 사용자만 Drone CLI를 통해 수정 가능합니다.</td>\n</tr>\n<tr>\n<td>Trusted</td>\n<td>저장소에 접근할 수 있는 사용자는 누구나 수정 가능합니다. 이 경우 브랜치 내부에 <code>.drone.yaml</code> 파일이 위치합니다.</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>Project visibility: 저장소 유형을 설정합니다.</p>\n</li>\n<li>\n<p>Timeout: Docker 배포 제한 시간을 설정합니다. 해당 시간까지 지연될 경우 배포를 취소하고 실패 처리합니다.</p>\n</li>\n<li>\n<p>Configuration: 드론 설정 파일의 이름을 지정합니다. (<code>.drone.yaml</code>)</p>\n</li>\n</ul>\n</li>\n<li><strong>Secrets</strong>: 중요한 정보를 <code>.drone.yaml</code> 파일에 일반 텍스트로 저장하지 않고 Drone CI에서 별도로 관리할 수 있도록 합니다.</li>\n</ul>\n<p>GitHub - <code>&#x3C;your-github-repository></code> - Settings - Webhooks 화면에서 웹훅의 상세 정보를 확인할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1137px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0a939fab2aba3366cbc5468d4c012dd0/340f3/github-webhook-settings.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 219.58333333333334%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/0a939fab2aba3366cbc5468d4c012dd0/340f3/github-webhook-settings.jpg\"\n        srcset=\"/static/0a939fab2aba3366cbc5468d4c012dd0/a3e66/github-webhook-settings.jpg 480w,\n/static/0a939fab2aba3366cbc5468d4c012dd0/fb816/github-webhook-settings.jpg 960w,\n/static/0a939fab2aba3366cbc5468d4c012dd0/340f3/github-webhook-settings.jpg 1137w\"\n        sizes=\"(max-width: 1137px) 100vw, 1137px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>Dockerfile</strong></p>\n<p>자세한 정보는 <a href=\"https://docs.docker.com/engine/reference/builder/\">Docker 공식 문서 > Dockerfile</a> 내용을 참조합니다.</p>\n<p><strong>.drone.yaml</strong> (예시)</p>\n<p>자세한 정보는 Drone 공식 문서의 <a href=\"https://docs.drone.io/pipeline/kubernetes/overview/\">Pipelines > Kubernetes</a> 내용을 참조합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> pipeline\n<span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> kubernetes\n<span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>service<span class=\"token punctuation\">-</span>name<span class=\"token punctuation\">></span>\n\n<span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> build\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> node<span class=\"token punctuation\">:</span>10.10.0\n    <span class=\"token key atrule\">commands</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> npm install\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> docker\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> plugins/docker<span class=\"token punctuation\">:</span><span class=\"token number\">18.09</span>\n    <span class=\"token key atrule\">settings</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">username</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">from_secret</span><span class=\"token punctuation\">:</span> docker_username\n      <span class=\"token key atrule\">password</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">from_secret</span><span class=\"token punctuation\">:</span> docker_password\n      <span class=\"token key atrule\">repo</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>docker<span class=\"token punctuation\">-</span>repository<span class=\"token punctuation\">></span>\n      <span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> $<span class=\"token punctuation\">{</span>DRONE_COMMIT<span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">-</span> $<span class=\"token punctuation\">{</span>DRONE_REPO_BRANCH<span class=\"token punctuation\">}</span><span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">when</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">status</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> success\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> notify\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> plugins/slack\n    <span class=\"token key atrule\">settings</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">webhook</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>slack<span class=\"token punctuation\">-</span>webhook<span class=\"token punctuation\">-</span>link<span class=\"token punctuation\">></span>\n      <span class=\"token key atrule\">channel</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>slack<span class=\"token punctuation\">-</span>webhook<span class=\"token punctuation\">-</span>channel<span class=\"token punctuation\">></span>\n    <span class=\"token punctuation\">{</span>% raw %<span class=\"token punctuation\">}</span>template<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">></span><span class=\"token scalar string\">\n        {{#success build.status}}\n          [{{repo.name}}] {{build.commit}} by {{build.ref}} is succeeded. ({{since build.started}}/{{since build.created}}) {{build.link}} :white_check_mark:\n        {{else}}\n          [{{repo.name}}] {{build.commit}} by {{build.ref}} is failed. ({{since build.started}}/{{since build.created}}) {{build.link}} :cry:\n        {{/success}}</span>\n    <span class=\"token punctuation\">{</span>% endraw %<span class=\"token punctuation\">}</span>when<span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">status</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>success<span class=\"token punctuation\">,</span> failure<span class=\"token punctuation\">]</span>\n<span class=\"token key atrule\">trigger</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">event</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> push\n  <span class=\"token key atrule\">branch</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> master\n    <span class=\"token punctuation\">-</span> develop</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<p>프로젝트 성향에 맞게 작성하세요. 팀에서 <strong>Slack</strong>(슬랙) 메신저를 사용 중인 경우 별도의 웹훅 설정을 통해 특정 슬랙 채널에 메시지를 보낼 수 있습니다.</p>\n</blockquote>\n<p>작성한 파일을 프로젝트 최상단에 넣습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1137px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/660b9af1ea06b5bb4cc155579caaf316/340f3/github-repository.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86.04166666666667%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/660b9af1ea06b5bb4cc155579caaf316/340f3/github-repository.jpg\"\n        srcset=\"/static/660b9af1ea06b5bb4cc155579caaf316/a3e66/github-repository.jpg 480w,\n/static/660b9af1ea06b5bb4cc155579caaf316/fb816/github-repository.jpg 960w,\n/static/660b9af1ea06b5bb4cc155579caaf316/340f3/github-repository.jpg 1137w\"\n        sizes=\"(max-width: 1137px) 100vw, 1137px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>파일을 넣는 과정에서 푸시 이벤트가 발생하여 웹훅을 통해 Drone CI에서 작업을 수행한 것을 알 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8d596913575d3029ebc78d995a33c319/06dbb/drone-ci-activity-feed.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.125%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/8d596913575d3029ebc78d995a33c319/06dbb/drone-ci-activity-feed.jpg\"\n        srcset=\"/static/8d596913575d3029ebc78d995a33c319/a3e66/drone-ci-activity-feed.jpg 480w,\n/static/8d596913575d3029ebc78d995a33c319/fb816/drone-ci-activity-feed.jpg 960w,\n/static/8d596913575d3029ebc78d995a33c319/06dbb/drone-ci-activity-feed.jpg 1140w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e8b72b2d27de3caa455b18057becc58a/06dbb/drone-ci-activity-feed-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.041666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/e8b72b2d27de3caa455b18057becc58a/06dbb/drone-ci-activity-feed-2.jpg\"\n        srcset=\"/static/e8b72b2d27de3caa455b18057becc58a/a3e66/drone-ci-activity-feed-2.jpg 480w,\n/static/e8b72b2d27de3caa455b18057becc58a/fb816/drone-ci-activity-feed-2.jpg 960w,\n/static/e8b72b2d27de3caa455b18057becc58a/06dbb/drone-ci-activity-feed-2.jpg 1140w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Docker Hub - repositories - <code>&#x3C;your-docker-ropository></code> 화면에서 이미지를 확인할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b7afbdb3f58e0ed3511cb1e3c8964faa/06dbb/docker-repository.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.20833333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/b7afbdb3f58e0ed3511cb1e3c8964faa/06dbb/docker-repository.jpg\"\n        srcset=\"/static/b7afbdb3f58e0ed3511cb1e3c8964faa/a3e66/docker-repository.jpg 480w,\n/static/b7afbdb3f58e0ed3511cb1e3c8964faa/fb816/docker-repository.jpg 960w,\n/static/b7afbdb3f58e0ed3511cb1e3c8964faa/06dbb/docker-repository.jpg 1140w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>지금까지 GitHub 전용 드론 서버 배포를 마쳤습니다. 본 문서는 파드에서 도커 이미지를 적용하는 절차는 다루지 않습니다.</p>","frontmatter":{"category":"kubernetes","index":8,"title":"Drone CI","description":"매번 코드를 커밋할 때마다 컨테이너 이미지를 만들고 배포해야 하는 일을 해야 할까요? 여기 커밋 이벤트를 감지해서 자동으로 컨테이너 이미지를 만드는 방법이 있어요.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/kubernetes/drone/cover.jpg?raw=true","date":"2020-05-25","draft":null}},{"id":"b6b0c2f4-b656-5334-b3f4-c30bbe30e94e","fields":{"slug":"/post/kubernetes/clear-eks-infrastructure/"},"html":"<h2 id=\"목차\" style=\"position:relative;\">목차<a href=\"#%EB%AA%A9%EC%B0%A8\" aria-label=\"목차 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<ol>\n<li><a href=\"#Auto-Scaling-%EA%B7%B8%EB%A3%B9-%EC%84%A4%EC%A0%95\">Auto Scaling 그룹 설정</a></li>\n<li><a href=\"#%EC%99%B8%EB%B6%80-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A2%85%EC%86%8D%EC%84%B1-%ED%95%B4%EC%A0%9C\">외부 서비스 종속성 해제</a></li>\n<li><a href=\"#EKS-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%82%AD%EC%A0%9C\">EKS 클러스터 삭제</a></li>\n<li><a href=\"#VPC-%EC%82%AD%EC%A0%9C\">VPC 삭제</a></li>\n<li><a href=\"#%EC%8A%A4%ED%83%9D-%EC%82%AD%EC%A0%9C\">스택 삭제</a></li>\n</ol>\n<h2 id=\"Auto-Scaling-그룹-설정\" style=\"position:relative;\">Auto Scaling 그룹 설정<a href=\"#Auto-Scaling-%EA%B7%B8%EB%A3%B9-%EC%84%A4%EC%A0%95\" aria-label=\"Auto Scaling 그룹 설정 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>EKS 클러스터는 EC2 인스턴스를 생성하면서 인스턴스 상태가 이상이 있는 경우에도 고정된 수의 인스턴스를 계속 유지하도록 <strong>Auto Scaling</strong>(오토 스케일링) 그룹을 생성합니다. EC2 - AUTO SCALING - Auto Scaling 그룹 - <code>&#x3C;your-nodegroup-worker></code> - 편집 버튼 클릭 후 인스턴스의 최소 및 최대 용량 한도를 0으로 지정하여 모든 리소스의 작동을 중지해 봅시다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 945px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c434d6334a7b8b041b43b603d431d53c/23301/auto-scaling-group-settings.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 111.04166666666666%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/c434d6334a7b8b041b43b603d431d53c/23301/auto-scaling-group-settings.jpg\"\n        srcset=\"/static/c434d6334a7b8b041b43b603d431d53c/a3e66/auto-scaling-group-settings.jpg 480w,\n/static/c434d6334a7b8b041b43b603d431d53c/23301/auto-scaling-group-settings.jpg 945w\"\n        sizes=\"(max-width: 945px) 100vw, 945px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"외부-서비스-종속성-해제\" style=\"position:relative;\">외부 서비스 종속성 해제<a href=\"#%EC%99%B8%EB%B6%80-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A2%85%EC%86%8D%EC%84%B1-%ED%95%B4%EC%A0%9C\" aria-label=\"외부 서비스 종속성 해제 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<h3 id=\"RDS\" style=\"position:relative;\">RDS<a href=\"#RDS\" aria-label=\"RDS permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>데이터베이스의 경우 쿠버네티스에서 관리하지 않는 외부 서비스로 해당 서비스와 연결된 리소스가 있는 경우 쿠버네티스에서 삭제할 수 없기 때문에 수동으로 삭제해야 합니다.</p>\n<p>RDS - 데이터베이스 - 삭제 버튼을 클릭하여 데이터베이스를 삭제하세요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 975px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8dca41611436815abd189fda420a1163/1e9b2/delete-rds-database.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 97.29166666666667%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/8dca41611436815abd189fda420a1163/1e9b2/delete-rds-database.jpg\"\n        srcset=\"/static/8dca41611436815abd189fda420a1163/a3e66/delete-rds-database.jpg 480w,\n/static/8dca41611436815abd189fda420a1163/fb816/delete-rds-database.jpg 960w,\n/static/8dca41611436815abd189fda420a1163/1e9b2/delete-rds-database.jpg 975w\"\n        sizes=\"(max-width: 975px) 100vw, 975px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 975px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1786dfd2491bb1ed106a0184f21c615d/1e9b2/delete-rds-database-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 97.29166666666667%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/1786dfd2491bb1ed106a0184f21c615d/1e9b2/delete-rds-database-2.jpg\"\n        srcset=\"/static/1786dfd2491bb1ed106a0184f21c615d/a3e66/delete-rds-database-2.jpg 480w,\n/static/1786dfd2491bb1ed106a0184f21c615d/fb816/delete-rds-database-2.jpg 960w,\n/static/1786dfd2491bb1ed106a0184f21c615d/1e9b2/delete-rds-database-2.jpg 975w\"\n        sizes=\"(max-width: 975px) 100vw, 975px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>데이터베이스 삭제를 완료하였습니다.</p>\n<h3 id=\"Route-53\" style=\"position:relative;\">Route 53<a href=\"#Route-53\" aria-label=\"Route 53 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>외부 접속을 위하여 호스팅한 리소스가 있는 경우 Route 53 - 호스팅 영역 - <code>&#x3C;your-domain></code> - 레코드 목록에서 삭제할 리소스와 연결된 레코드를 삭제하세요.</p>\n<h3 id=\"정책\" style=\"position:relative;\">정책<a href=\"#%EC%A0%95%EC%B1%85\" aria-label=\"정책 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>임의로 연결한 정책이 있다면 쿠버네티스에서 관리하지 않아 삭제할 수 없기 때문에 수동으로 삭제해야 합니다. EBS CSI 드라이버를 사용하는 경우 노드 그룹에 정책을 연결하기 때문에 임의로 연결한 정책이 있습니다. IAM - 역할 - <code>&#x3C;your-cluster-name></code> 항목을 검색하여 <code>NodeInstanceRole</code> 단어를 포함하는 역할에 임의로 연결한 정책을 삭제하세요.</p>\n<h2 id=\"EKS-클러스터-삭제\" style=\"position:relative;\">EKS 클러스터 삭제<a href=\"#EKS-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%82%AD%EC%A0%9C\" aria-label=\"EKS 클러스터 삭제 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>다음 명령어를 입력하세요. 약 10~20분 정도 소요됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>eksctl delete cluster <span class=\"token operator\">&lt;</span>your-cluster-name<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b8a2793881d1a181ab7775a1a4a02696/396d0/delete-cluster.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.958333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/b8a2793881d1a181ab7775a1a4a02696/396d0/delete-cluster.jpg\"\n        srcset=\"/static/b8a2793881d1a181ab7775a1a4a02696/a3e66/delete-cluster.jpg 480w,\n/static/b8a2793881d1a181ab7775a1a4a02696/396d0/delete-cluster.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>클러스터 삭제를 완료하였습니다.</p>\n<h3 id=\"ERROR-DependencyViolation\" style=\"position:relative;\">[ERROR] DependencyViolation<a href=\"#ERROR-DependencyViolation\" aria-label=\"ERROR DependencyViolation permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>외부 서비스를 삭제하지 않는 경우 다음과 같은 오류를 표시합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2117ab5e6dc1092ea11b53775ff49dca/396d0/delete-cluster-failed.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.04166666666667%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/2117ab5e6dc1092ea11b53775ff49dca/396d0/delete-cluster-failed.jpg\"\n        srcset=\"/static/2117ab5e6dc1092ea11b53775ff49dca/a3e66/delete-cluster-failed.jpg 480w,\n/static/2117ab5e6dc1092ea11b53775ff49dca/396d0/delete-cluster-failed.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>CloudFormation 이벤트 내역에서 자세한 내용을 확인할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/44620d4868dce6239afccbc61013a2ae/06dbb/delete-role-and-sg-failed.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.125%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/44620d4868dce6239afccbc61013a2ae/06dbb/delete-role-and-sg-failed.jpg\"\n        srcset=\"/static/44620d4868dce6239afccbc61013a2ae/a3e66/delete-role-and-sg-failed.jpg 480w,\n/static/44620d4868dce6239afccbc61013a2ae/fb816/delete-role-and-sg-failed.jpg 960w,\n/static/44620d4868dce6239afccbc61013a2ae/06dbb/delete-role-and-sg-failed.jpg 1140w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>EC2 - 보안 그룹 - <code>&#x3C;your-target-security-group></code> - 삭제 버튼 클릭 후 자세한 정보를 확인합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0f28f5ba4139a329747ca0280f0984bf/06dbb/delete-security-group.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.125%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/0f28f5ba4139a329747ca0280f0984bf/06dbb/delete-security-group.jpg\"\n        srcset=\"/static/0f28f5ba4139a329747ca0280f0984bf/a3e66/delete-security-group.jpg 480w,\n/static/0f28f5ba4139a329747ca0280f0984bf/fb816/delete-security-group.jpg 960w,\n/static/0f28f5ba4139a329747ca0280f0984bf/06dbb/delete-security-group.jpg 1140w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/546b4e62fce837bcd7abe6c329cf52ae/06dbb/delete-security-group-failed.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.08333333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/546b4e62fce837bcd7abe6c329cf52ae/06dbb/delete-security-group-failed.jpg\"\n        srcset=\"/static/546b4e62fce837bcd7abe6c329cf52ae/a3e66/delete-security-group-failed.jpg 480w,\n/static/546b4e62fce837bcd7abe6c329cf52ae/fb816/delete-security-group-failed.jpg 960w,\n/static/546b4e62fce837bcd7abe6c329cf52ae/06dbb/delete-security-group-failed.jpg 1140w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>해당 오류 문구는 외부 서비스인 RDS 종속성과 관련된 것이지만 AWS는 그다지 친절하게 안내하지 않기 때문에 여러분이 어떤 외부 서비스를 사용하고 있는지 미리 파악해 두는 것이 중요합니다.</p>\n</blockquote>\n<h2 id=\"VPC-삭제\" style=\"position:relative;\">VPC 삭제<a href=\"#VPC-%EC%82%AD%EC%A0%9C\" aria-label=\"VPC 삭제 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>클러스터는 삭제하였지만 CloudFormation 이벤트 내역에서 VPC 삭제 도중 오류가 발생한 것을 확인할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/df94ade5493910a209e03f9ddc6302a3/06dbb/delete-vpc-failed.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.125%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/df94ade5493910a209e03f9ddc6302a3/06dbb/delete-vpc-failed.jpg\"\n        srcset=\"/static/df94ade5493910a209e03f9ddc6302a3/a3e66/delete-vpc-failed.jpg 480w,\n/static/df94ade5493910a209e03f9ddc6302a3/fb816/delete-vpc-failed.jpg 960w,\n/static/df94ade5493910a209e03f9ddc6302a3/06dbb/delete-vpc-failed.jpg 1140w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>VPC - <code>&#x3C;your-vpc></code> - 작업 - 삭제 버튼을 클릭하여 VPC 삭제를 진행합니다.\u001c</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/af75c775bf954ab44ed0c0f6dbf76a95/06dbb/delete-vpc.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.125%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/af75c775bf954ab44ed0c0f6dbf76a95/06dbb/delete-vpc.jpg\"\n        srcset=\"/static/af75c775bf954ab44ed0c0f6dbf76a95/a3e66/delete-vpc.jpg 480w,\n/static/af75c775bf954ab44ed0c0f6dbf76a95/fb816/delete-vpc.jpg 960w,\n/static/af75c775bf954ab44ed0c0f6dbf76a95/06dbb/delete-vpc.jpg 1140w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7dd880b38a11ea011404ef1289228731/06dbb/delete-vpc-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.125%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/7dd880b38a11ea011404ef1289228731/06dbb/delete-vpc-2.jpg\"\n        srcset=\"/static/7dd880b38a11ea011404ef1289228731/a3e66/delete-vpc-2.jpg 480w,\n/static/7dd880b38a11ea011404ef1289228731/fb816/delete-vpc-2.jpg 960w,\n/static/7dd880b38a11ea011404ef1289228731/06dbb/delete-vpc-2.jpg 1140w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>VPC 삭제를 완료하였습니다.</p>\n<h2 id=\"스택-삭제\" style=\"position:relative;\">스택 삭제<a href=\"#%EC%8A%A4%ED%83%9D-%EC%82%AD%EC%A0%9C\" aria-label=\"스택 삭제 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>CloudFormation - 스택 - <code>&#x3C;your-stack></code> - 삭제 버튼을 클릭하여 클러스터와 관련된 모든 스택 리소스를 삭제합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3692cc93a15db97d4d1323791925d5d2/06dbb/delete-cloudformation-stack.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.125%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/3692cc93a15db97d4d1323791925d5d2/06dbb/delete-cloudformation-stack.jpg\"\n        srcset=\"/static/3692cc93a15db97d4d1323791925d5d2/a3e66/delete-cloudformation-stack.jpg 480w,\n/static/3692cc93a15db97d4d1323791925d5d2/fb816/delete-cloudformation-stack.jpg 960w,\n/static/3692cc93a15db97d4d1323791925d5d2/06dbb/delete-cloudformation-stack.jpg 1140w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/16daf928df8c624c4247b9e1fec38898/06dbb/delete-cloudformation-stack-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.08333333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/16daf928df8c624c4247b9e1fec38898/06dbb/delete-cloudformation-stack-2.jpg\"\n        srcset=\"/static/16daf928df8c624c4247b9e1fec38898/a3e66/delete-cloudformation-stack-2.jpg 480w,\n/static/16daf928df8c624c4247b9e1fec38898/fb816/delete-cloudformation-stack-2.jpg 960w,\n/static/16daf928df8c624c4247b9e1fec38898/06dbb/delete-cloudformation-stack-2.jpg 1140w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3f51d6a55c3f0808bbbe237b79f84cb8/06dbb/delete-cloudformation-stack-3.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.95833333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/3f51d6a55c3f0808bbbe237b79f84cb8/06dbb/delete-cloudformation-stack-3.jpg\"\n        srcset=\"/static/3f51d6a55c3f0808bbbe237b79f84cb8/a3e66/delete-cloudformation-stack-3.jpg 480w,\n/static/3f51d6a55c3f0808bbbe237b79f84cb8/fb816/delete-cloudformation-stack-3.jpg 960w,\n/static/3f51d6a55c3f0808bbbe237b79f84cb8/06dbb/delete-cloudformation-stack-3.jpg 1140w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>모든 스택 리소스 삭제를 완료하였습니다.</p>","frontmatter":{"category":"kubernetes","index":7,"title":"Amazon EKS 인프라 제거하기","description":"다양한 문제로 서비스를 중지하거나 초기화하는 경우가 발생합니다. 화장은 하는 것보다 지우는 것이 중요하듯 인프라를 제거하는 방법 또한 매우 중요한 부분입니다.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/kubernetes/build-eks-infrastructure/cover.jpg?raw=true","date":"2020-05-25","draft":null}},{"id":"41ed7fb8-dd4d-5965-ab4f-5b0a1c059231","fields":{"slug":"/post/kubernetes/deploy-project/"},"html":"<h2 id=\"목차\" style=\"position:relative;\">목차<a href=\"#%EB%AA%A9%EC%B0%A8\" aria-label=\"목차 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<ol>\n<li><a href=\"#IAM-%EC%A0%95%EC%B1%85-%EC%97%B0%EA%B2%B0\">IAM 정책 연결</a></li>\n<li><a href=\"#%ED%85%8C%EC%9D%B4%EB%B8%94-%EC%83%9D%EC%84%B1\">테이블 생성</a></li>\n<li><a href=\"#%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EB%B0%B0%ED%8F%AC\">오브젝트 배포</a></li>\n</ol>\n<h2 id=\"IAM-정책-연결\" style=\"position:relative;\">IAM 정책 연결<a href=\"#IAM-%EC%A0%95%EC%B1%85-%EC%97%B0%EA%B2%B0\" aria-label=\"IAM 정책 연결 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>IAM - 역할 - <code>&#x3C;your-cluster-name></code> 항목을 검색해서 <code>NodeInstanceRole</code> 단어를 포함하는 역할에 <code>ingressController-iam-policy</code> 정책을 연결하세요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1155px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/84fda6e7caca321ee14860650cc91757/010af/attach-policy-for-ingress-controller.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95.41666666666667%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/84fda6e7caca321ee14860650cc91757/010af/attach-policy-for-ingress-controller.jpg\"\n        srcset=\"/static/84fda6e7caca321ee14860650cc91757/a3e66/attach-policy-for-ingress-controller.jpg 480w,\n/static/84fda6e7caca321ee14860650cc91757/fb816/attach-policy-for-ingress-controller.jpg 960w,\n/static/84fda6e7caca321ee14860650cc91757/010af/attach-policy-for-ingress-controller.jpg 1155w\"\n        sizes=\"(max-width: 1155px) 100vw, 1155px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"테이블-생성\" style=\"position:relative;\">테이블 생성<a href=\"#%ED%85%8C%EC%9D%B4%EB%B8%94-%EC%83%9D%EC%84%B1\" aria-label=\"테이블 생성 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>RDS 데이터베이스에 테이블을 생성하기 위해 <code>kubectl port-forward</code> 명령어로 maxscale 파드를 선택해 포트 포워딩을 한 다음 로컬에서 작업합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl port-forward service/maxscale <span class=\"token number\">4006</span>:4006 --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 730px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/41013038bd9cd59e00efe10cdd53ef7e/899a9/port-forward-maxscale.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 14.375000000000002%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/41013038bd9cd59e00efe10cdd53ef7e/899a9/port-forward-maxscale.jpg\"\n        srcset=\"/static/41013038bd9cd59e00efe10cdd53ef7e/a3e66/port-forward-maxscale.jpg 480w,\n/static/41013038bd9cd59e00efe10cdd53ef7e/899a9/port-forward-maxscale.jpg 730w\"\n        sizes=\"(max-width: 730px) 100vw, 730px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>파드의 포트를 로컬 포트로 포워딩한 상태입니다. 데이터베이스 툴을 사용하여 직접 데이터베이스에 접속해 봅시다. (필자는 <a href=\"https://dbeaver.io/download/\"><code>DBeaver</code></a> 툴을 사용하였습니다.)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1120px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b94cd59dd01340ae6adae6007da3f48b/811cd/mariadb-connection-settings.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 91.66666666666667%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/b94cd59dd01340ae6adae6007da3f48b/811cd/mariadb-connection-settings.jpg\"\n        srcset=\"/static/b94cd59dd01340ae6adae6007da3f48b/a3e66/mariadb-connection-settings.jpg 480w,\n/static/b94cd59dd01340ae6adae6007da3f48b/fb816/mariadb-connection-settings.jpg 960w,\n/static/b94cd59dd01340ae6adae6007da3f48b/811cd/mariadb-connection-settings.jpg 1120w\"\n        sizes=\"(max-width: 1120px) 100vw, 1120px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>데이터베이스 접속을 완료하였습니다. 이제 데이터베이스에 마이그레이션 및 다양한 작업을 수행할 수 있습니다.</p>\n<h2 id=\"오브젝트-배포\" style=\"position:relative;\">오브젝트 배포<a href=\"#%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EB%B0%B0%ED%8F%AC\" aria-label=\"오브젝트 배포 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<h3 id=\"Deployment\" style=\"position:relative;\">Deployment<a href=\"#Deployment\" aria-label=\"Deployment permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>Deployment</strong>(디플로이먼트) 오브젝트는 파드와 레플리카셋에 대한 선언적 업데이트를 제공합니다. 자세한 정보는 쿠버네티스 공식 문서의 <a href=\"https://kubernetes.io/ko/docs/concepts/workloads/controllers/deployment/\">디플로이먼트</a> 내용을 참조하세요.</p>\n<p><code>containers</code> 필드에 컨테이너 이미지에 대한 정보를 입력합니다. 자세한 정보는 쿠버네티스 공식 문서의 <a href=\"https://kubernetes.io/ko/docs/concepts/containers/#%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%9D%B4%EB%AF%B8%EC%A7%80\">컨테이너 이미지</a> 내용을 참조하세요.</p>\n<ul>\n<li><code>image</code>: 컨테이너가 항상 같은 버전의 이미지를 사용하도록 하기 위해 <code>&#x3C;image>:&#x3C;digest></code> 형태의 <strong>다이제스트</strong> 정보를 명시하는 것이 좋습니다. 다이제스트는 특정 버전의 이미지를 고유하게 식별하며 다이제스트 값을 변경하지 않는 한 쿠버네티스에 의해 절대로 변경되지 않습니다.</li>\n<li><code>imagePullPolicy</code>: 이미지 Pull(풀) 정책을 설정합니다.\n<ul>\n<li><code>IfNotPresent</code>: 이미지가 로컬에 이미 존재하지 않으면 이미지 풀을 시도합니다.</li>\n<li><code>Always</code>: 파드가 시작될 때마다 이미지 풀을 시도합니다.</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>운영(Production) 환경에서 컨테이너를 생성할 때 <code>:latest</code> 태그의 사용은 실행 중인 이미지를 추적하거나 롤백할 때 어려움이 있어 추천하지 않습니다.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> collector\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> collector\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> collector\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> collector\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> collector\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> &lt;id<span class=\"token punctuation\">></span>/&lt;project<span class=\"token punctuation\">></span><span class=\"token punctuation\">:</span>&lt;digest<span class=\"token punctuation\">-</span>of<span class=\"token punctuation\">-</span>the<span class=\"token punctuation\">-</span>image<span class=\"token punctuation\">></span>\n          <span class=\"token key atrule\">imagePullPolicy</span><span class=\"token punctuation\">:</span> &lt;IfNotPresent<span class=\"token punctuation\">|</span>Always<span class=\"token punctuation\">></span>\n          <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 200m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 1Gi\n            <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 1000m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 1Gi\n          <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> SPRING_PROFILES_ACTIVE\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"&lt;local|development|production>\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> FMS_KAFKA_BROKER_LIST\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"kafka:9092\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> SPRING_DATASOURCE_JDBC_URL\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"jdbc:log4jdbc:mysql://mariadb:3306/&lt;database-name>?autoReconnect=true&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=false&amp;serverTimezone=Asia/Seoul\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> NEW_RELIC_AGENT_ENABLED\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"false\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> SPRING_DATASOURCE_USERNAME\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"&lt;mariadb-username>\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> SPRING_DATASOURCE_PASSWORD\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"&lt;mariadb-password>\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> SPRING_DATASOURCE_MAXIMUM_POOL_SIZE\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"30\"</span>\n      <span class=\"token key atrule\">imagePullSecrets</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> dockerhub</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><img src=\"https://user-images.githubusercontent.com/16731356/82756835-920d4100-9e17-11ea-99da-b0dc046a3ff5.gif\" alt=\"apply-collector\"></p>\n<h3 id=\"Ingress\" style=\"position:relative;\">Ingress<a href=\"#Ingress\" aria-label=\"Ingress permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>Ingress</strong>(인그레스) 오브젝트는 서비스에 대한 로드 밸런서를 생성하고 웹 사이트에 대한 트래픽을 인스턴스 간에 분산할 수 있도록 합니다. 다음과 같이 오브젝트를 구성하고 배포하세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> extensions/v1beta1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Ingress\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>service<span class=\"token punctuation\">-</span>name<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">kubernetes.io/ingress.class</span><span class=\"token punctuation\">:</span> alb\n    <span class=\"token key atrule\">alb.ingress.kubernetes.io/certificate-arn</span><span class=\"token punctuation\">:</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>acm<span class=\"token punctuation\">:</span>ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span>2<span class=\"token punctuation\">:</span>050914238222<span class=\"token punctuation\">:</span>certificate/f47dc907<span class=\"token punctuation\">-</span>3e20<span class=\"token punctuation\">-</span>4eba<span class=\"token punctuation\">-</span>9a37<span class=\"token punctuation\">-</span>71c039a9c28f\n    <span class=\"token key atrule\">alb.ingress.kubernetes.io/listen-ports</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'[{\"HTTP\":80},{\"HTTPS\":443}]'</span>\n    <span class=\"token key atrule\">alb.ingress.kubernetes.io/scheme</span><span class=\"token punctuation\">:</span> internet<span class=\"token punctuation\">-</span>facing\n    <span class=\"token key atrule\">alb.ingress.kubernetes.io/subnets</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>public<span class=\"token punctuation\">-</span>subnet<span class=\"token punctuation\">-</span>id<span class=\"token punctuation\">-</span>1<span class=\"token punctuation\">></span><span class=\"token punctuation\">,</span> &lt;your<span class=\"token punctuation\">-</span>public<span class=\"token punctuation\">-</span>subnet<span class=\"token punctuation\">-</span>id<span class=\"token punctuation\">-</span>2<span class=\"token punctuation\">></span><span class=\"token punctuation\">,</span> &lt;your<span class=\"token punctuation\">-</span>public<span class=\"token punctuation\">-</span>subnet<span class=\"token punctuation\">-</span>id<span class=\"token punctuation\">-</span>3<span class=\"token punctuation\">></span>\n    <span class=\"token key atrule\">alb.ingress.kubernetes.io/security-groups</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>public<span class=\"token punctuation\">-</span>security<span class=\"token punctuation\">-</span>group<span class=\"token punctuation\">-</span>id<span class=\"token punctuation\">></span><span class=\"token punctuation\">,</span> &lt;your<span class=\"token punctuation\">-</span>cluster<span class=\"token punctuation\">-</span>shared<span class=\"token punctuation\">-</span>node<span class=\"token punctuation\">-</span>security<span class=\"token punctuation\">-</span>group<span class=\"token punctuation\">-</span>id<span class=\"token punctuation\">></span><span class=\"token punctuation\">,</span> &lt;your<span class=\"token punctuation\">-</span>nodegroup<span class=\"token punctuation\">-</span>security<span class=\"token punctuation\">-</span>group<span class=\"token punctuation\">-</span>id<span class=\"token punctuation\">></span>\n    <span class=\"token key atrule\">alb.ingress.kubernetes.io/tags</span><span class=\"token punctuation\">:</span> Env=Dev\n    <span class=\"token key atrule\">alb.ingress.kubernetes.io/healthcheck-path</span><span class=\"token punctuation\">:</span> /health\n    <span class=\"token key atrule\">alb.ingress.kubernetes.io/load-balancer-attributes</span><span class=\"token punctuation\">:</span> idle_timeout.timeout_seconds=600\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">rules</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>service<span class=\"token punctuation\">-</span>server<span class=\"token punctuation\">-</span>host<span class=\"token punctuation\">></span>\n      <span class=\"token key atrule\">http</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">paths</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /api/*\n            <span class=\"token key atrule\">backend</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">serviceName</span><span class=\"token punctuation\">:</span> api\n              <span class=\"token key atrule\">servicePort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8080</span>\n          <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /*\n            <span class=\"token key atrule\">backend</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">serviceName</span><span class=\"token punctuation\">:</span> web\n              <span class=\"token key atrule\">servicePort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Route 53 - 호스팅 영역 - <code>&#x3C;your-domain></code> - 레코드 세트 생성 - <code>&#x3C;your-service-server-host></code> 이름의 레코드를 생성합니다. 별칭으로 이전 단계에서 생성한 로드 밸런서를 선택합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d603fb6eda776730bc5ba663843c4b03/06dbb/create-route-53-record-set.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.125%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/d603fb6eda776730bc5ba663843c4b03/06dbb/create-route-53-record-set.jpg\"\n        srcset=\"/static/d603fb6eda776730bc5ba663843c4b03/a3e66/create-route-53-record-set.jpg 480w,\n/static/d603fb6eda776730bc5ba663843c4b03/fb816/create-route-53-record-set.jpg 960w,\n/static/d603fb6eda776730bc5ba663843c4b03/06dbb/create-route-53-record-set.jpg 1140w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"Service\" style=\"position:relative;\">Service<a href=\"#Service\" aria-label=\"Service permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>네트워크 서비스로 노출이 필요한 클라이언트 프로젝트 파드는 Deployment 오브젝트 외에 추상적 개념인 <strong>Service</strong>(서비스) 오브젝트를 같이 구성해야 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> api\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> api\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8080</span>\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8080</span>\n      <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> api\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> NodePort\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> api\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> api\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> api\n  <span class=\"token key atrule\">strategy</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">rollingUpdate</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">maxSurge</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n      <span class=\"token key atrule\">maxUnavailable</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n  <span class=\"token key atrule\">minReadySeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">30</span>\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> api\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">...</span>\n      <span class=\"token key atrule\">imagePullSecrets</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> dockerhub</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>오브젝트를 배포한 다음 호스트와 로드 밸런서의 엔드포인트 주소의 연결 상태를 확인하세요. <code>ADDRESS</code> 필드에 값이 있으면 정상적으로 연결된 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl get ingresses --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 730px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/adfd0c9f4a4e7b6e08c2b7ec079dcb03/899a9/get-ingresses.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.166666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/adfd0c9f4a4e7b6e08c2b7ec079dcb03/899a9/get-ingresses.jpg\"\n        srcset=\"/static/adfd0c9f4a4e7b6e08c2b7ec079dcb03/a3e66/get-ingresses.jpg 480w,\n/static/adfd0c9f4a4e7b6e08c2b7ec079dcb03/899a9/get-ingresses.jpg 730w\"\n        sizes=\"(max-width: 730px) 100vw, 730px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>로드 밸런서 전파에는 다소 시간이 소요됩니다. 따라서 <em>- 필자는 5분 안에 값이 들어왔지만 몇 시간이 지나도 -</em> <code>ADDRESS</code> 필드에 엔드포인트 값이 없을 수 있습니다. 호스팅의 경우 쿠버네티스에서 관리하지 않는 AWS 서비스로 요청 시 바로 처리가 되지 않는 점에 유의하세요.</p>\n<p>(+) <em>- 필자의 경험에 의하면 -</em> <code>Unhealthy</code> 경고를 표시하더라도 <code>paths</code> 필드에 해당하는 오브젝트를 배포하면 주소를 찾으면서 엔드포인트 값이 들어오는 것으로 보입니다.</p>\n</blockquote>\n<h1>마치며</h1>\n<p>지금까지 2020년 모빌리티 스타트업에서 근무할 때 적용한 Amazon EKS 구성에 대한 핵심적인 내용을 공유하였습니다. Amazon EKS 서비스는 버전 업데이트가 활발하고 버전 간에 <strong>BREAKING CHANGE</strong>가 빈번하게 발생하는 편이기 때문에 최신 버전에서 위 내용에 맞춰 구성할 경우 실패할 수 있습니다. 꼭 다양한 레퍼런스를 참조해서 구성하세요.</p>","frontmatter":{"category":"kubernetes","index":6,"title":"Amazon EKS 프로젝트 배포하기","description":"프로젝트를 배포하는 방식은 사용하는 기술에 따라 다르겠지만 전체적인 뼈대는 비슷합니다. 실전에서 어떻게 배포했는지 살펴보세요.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/kubernetes/build-eks-infrastructure/cover.jpg?raw=true","date":"2020-05-25","draft":null}},{"id":"b5be6402-2c4b-50e9-8f1a-aa4edc6bb89d","fields":{"slug":"/post/kubernetes/build-eks-infrastructure/"},"html":"<blockquote>\n<p>아마존 웹 서비스에서 제공하는 Amazon EKS(Elastic Kubernetes Service)로 인프라를 구성한 내용을 정리한 글입니다. 내용이 방대하여 사전 설치가 필요한 명령어 및 프로그램에 대한 설명이 생략될 수 있습니다. 🙏</p>\n</blockquote>\n<h2 id=\"목차\" style=\"position:relative;\">목차<a href=\"#%EB%AA%A9%EC%B0%A8\" aria-label=\"목차 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<ol>\n<li><a href=\"#IAM-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%B6%94%EA%B0%80\">IAM 사용자 추가</a></li>\n<li><a href=\"#EKS-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%83%9D%EC%84%B1\">EKS 클러스터 생성</a></li>\n<li><a href=\"#%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%ED%81%B4%EB%9E%98%EC%8A%A4-%EB%B0%B0%ED%8F%AC\">스토리지 클래스 배포</a></li>\n<li><a href=\"#EBS-CSI-%EB%93%9C%EB%9D%BC%EC%9D%B4%EB%B2%84-%EB%B0%B0%ED%8F%AC\">EBS CSI 드라이버 배포</a></li>\n<li><a href=\"#ALB-%EC%88%98%EC%8B%A0-%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC-%EB%B0%B0%ED%8F%AC\">ALB 수신 컨트롤러 배포</a></li>\n<li><a href=\"#RDS-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%83%9D%EC%84%B1\">RDS 데이터베이스 생성</a></li>\n<li><a href=\"#%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4-%EC%83%9D%EC%84%B1\">네임스페이스 생성</a></li>\n<li><a href=\"#ExternalName-%EC%84%A4%EC%A0%95\">ExternalName 설정</a></li>\n<li><a href=\"#MariaDB-CLI-%EB%B0%B0%ED%8F%AC\">MariaDB CLI 배포</a></li>\n<li><a href=\"#MaxScale-%EB%B0%B0%ED%8F%AC\">MaxScale 배포</a></li>\n<li><a href=\"#Docker-%EC%9E%90%EA%B2%A9-%EC%A6%9D%EB%AA%85-%EA%B8%B0%EB%B0%98-Secret-%EB%B0%B0%ED%8F%AC\">Docker 자격 증명 기반 Secret 배포</a></li>\n</ol>\n<h2 id=\"IAM-사용자-추가\" style=\"position:relative;\">IAM 사용자 추가<a href=\"#IAM-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%B6%94%EA%B0%80\" aria-label=\"IAM 사용자 추가 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>AWS 서비스를 사용하기 위해 루트 사용자 이메일 주소로 <strong>IAM</strong>(Identity and Access Management, 아이에이앰)에 사용자를 추가해야 합니다. 자세한 정보는 <a href=\"/aws/iam\">IAM</a> 내용을 참조하세요.</p>\n<h2 id=\"Kubernetes-API\" style=\"position:relative;\">Kubernetes API<a href=\"#Kubernetes-API\" aria-label=\"Kubernetes API permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>쿠버네티스 오브젝트는 <strong>쿠버네티스 API</strong>를 요청해서 생성합니다. 쿠버네티스 오브젝트를 생성할 때 오브젝트에 대한 기본적인 정보와 더불어 의도한 상태를 기술한 오브젝트 <code>spec</code>이 필요합니다. 요청한 내용은 JSON 형식으로 정보를 포함하는데 대부분 <code>.yaml</code> 파일로 <code>kubectl</code>에 제공합니다. <code>kubectl</code>은 API 요청이 이루어질 때 JSON 형식으로 정보를 변환합니다.</p>\n<p><strong>deployment.yaml</strong> (예시)</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">-</span>deployment\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> nginx\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> nginx\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">:</span>1.14.2\n          <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>생성하고자 하는 쿠버네티스 오브젝트에 대한 <code>.yaml</code> 파일 내, 다음 필드를 위한 값들을 설정합니다.</p>\n<ul>\n<li>apiVersion: 해당 오브젝트 생성에 사용하는 쿠버네티스 API 버전 (안정성: stable > beta > alpha)</li>\n<li>kind: 오브젝트의 종류</li>\n<li>metadata: 유일한 오브젝트로 구분하기 위한 데이터</li>\n<li>spec: 오브젝트에 대한 상태</li>\n</ul>\n<p>오브젝트 <code>spec</code>에 대한 정확한 포맷은 모든 쿠버네티스 오브젝트마다 다르고, 그 오브젝트 특유의 중첩된 필드를 포함합니다. 다음 명령어를 입력하여 오브젝트를 생성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl apply -f deployment.yaml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>자세한 정보는 쿠버네티스 공식 문서의 <a href=\"https://kubernetes.io/ko/docs/concepts/overview/working-with-objects/kubernetes-objects/\">쿠버네티스 오브젝트 이해하기</a> 내용을 참조하세요.</p>\n<h2 id=\"EKS-클러스터-생성\" style=\"position:relative;\">EKS 클러스터 생성<a href=\"#EKS-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%83%9D%EC%84%B1\" aria-label=\"EKS 클러스터 생성 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>쿠버네티스를 시작하기 위해 가장 먼저 해야 할 일은 <strong>클러스터</strong>를 생성하는 것입니다. 쿠버네티스 클러스터는 컨테이너화된 애플리케이션을 실행하는 노드의 집합입니다.</p>\n<p><strong>cluster.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> eksctl.io/v1alpha5\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ClusterConfig\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> &lt;insert<span class=\"token punctuation\">-</span>your<span class=\"token punctuation\">-</span>cluster<span class=\"token punctuation\">-</span>name<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">2</span>\n<span class=\"token key atrule\">vpc</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">cidr</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"&lt;insert-your-cidr>\"</span>\n  <span class=\"token key atrule\">nat</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">gateway</span><span class=\"token punctuation\">:</span> HighlyAvailable\n<span class=\"token key atrule\">nodeGroups</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> &lt;insert<span class=\"token punctuation\">-</span>your<span class=\"token punctuation\">-</span>worker<span class=\"token punctuation\">-</span>name<span class=\"token punctuation\">></span>\n    <span class=\"token key atrule\">instanceType</span><span class=\"token punctuation\">:</span> m5.large\n    <span class=\"token key atrule\">availabilityZones</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span>2a\n      <span class=\"token punctuation\">-</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span>2b\n    <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">role</span><span class=\"token punctuation\">:</span> worker\n    <span class=\"token key atrule\">desiredCapacity</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n    <span class=\"token key atrule\">privateNetworking</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token key atrule\">iam</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">withAddonPolicies</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">ebs</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n        <span class=\"token key atrule\">efs</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n        <span class=\"token key atrule\">autoScaler</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>eksctl create cluster -f cluster.yaml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3f0badf15a1f9448d90ac8f242125d50/396d0/create-cluster.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.375%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/3f0badf15a1f9448d90ac8f242125d50/396d0/create-cluster.jpg\"\n        srcset=\"/static/3f0badf15a1f9448d90ac8f242125d50/a3e66/create-cluster.jpg 480w,\n/static/3f0badf15a1f9448d90ac8f242125d50/396d0/create-cluster.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>도커에서 쿠버네티스를 활성화하면 기본적으로 <code>current-context</code> 필드를 <code>docker-desktop</code> 클러스터로 지정합니다. <code>~/.kube/config</code> 파일에서 현재 생성한 클러스터로 변경이 잘 이루어졌는지 확인하세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl config get-contexts</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e3b1a42aa68e7d212229c492b52e79fd/5ab81/context-config.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 124.58333333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/e3b1a42aa68e7d212229c492b52e79fd/5ab81/context-config.jpg\"\n        srcset=\"/static/e3b1a42aa68e7d212229c492b52e79fd/a3e66/context-config.jpg 480w,\n/static/e3b1a42aa68e7d212229c492b52e79fd/5ab81/context-config.jpg 660w\"\n        sizes=\"(max-width: 660px) 100vw, 660px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"VPC\" style=\"position:relative;\">VPC<a href=\"#VPC\" aria-label=\"VPC permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>VPC</strong>(Virtual Private Cloud)는 사용자의 AWS 계정 전용 가상 네트워크입니다.</p>\n<p>VPC는 AWS 클라우드에서 다른 가상 네트워크와 논리적으로 분리되어 있습니다. Amazon EC2 인스턴스와 같은 AWS 리소스를 VPC에서 실행할 수 있습니다.</p>\n<p>VPC를 만들 때 VPC의 IPv4 주소의 범위는 <strong>CIDR</strong>(Classless Inter-Domain Routing, 사이더) 블록 형태로 지정해야 합니다. (예: 172.31.0.0/16) 자세한 정보는 <a href=\"https://m.blog.naver.com/ncloud24/221208338209\">CIDR 표기법</a> 내용을 참조하세요.</p>\n<h3 id=\"NAT-Gateway\" style=\"position:relative;\">NAT Gateway<a href=\"#NAT-Gateway\" aria-label=\"NAT Gateway permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>NAT</strong>(Network Address Translation, 네트워크 주소 변환) 게이트웨이는 프라이빗 서브넷의 인스턴스를 인터넷 또는 기타 AWS 서비스에 연결합니다. 프라이빗 서브넷을 사용하면 NAT 게이트웨이를 사용한다고 보시면 됩니다.</small></p>\n<h3 id=\"CloudFormation\" style=\"position:relative;\">CloudFormation<a href=\"#CloudFormation\" aria-label=\"CloudFormation permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>CloudFormation</strong>은 인프라 관리를 간소화하여 리소스 관리 시간을 줄이고 AWS에서 실행되는 애플리케이션에 더 많은 시간을 사용하도록 해 주는 서비스입니다. 템플릿을 사용하여 스택을 생성할 경우 Auto Scaling 그룹, 로드 밸런서 및 데이터베이스를 자동으로 프로비저닝합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a516015670db5758a6dd50a5750319ce/06dbb/create-cloudformation-stack-completed.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.125%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/a516015670db5758a6dd50a5750319ce/06dbb/create-cloudformation-stack-completed.jpg\"\n        srcset=\"/static/a516015670db5758a6dd50a5750319ce/a3e66/create-cloudformation-stack-completed.jpg 480w,\n/static/a516015670db5758a6dd50a5750319ce/fb816/create-cloudformation-stack-completed.jpg 960w,\n/static/a516015670db5758a6dd50a5750319ce/06dbb/create-cloudformation-stack-completed.jpg 1140w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>클러스터 생성을 성공적으로 완료하였습니다. 생성 도중에 문제가 발생한 경우에도 해당 서비스를 통해 확인할 수 있습니다.</p>\n<h2 id=\"스토리지-클래스-배포\" style=\"position:relative;\">스토리지 클래스 배포<a href=\"#%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%ED%81%B4%EB%9E%98%EC%8A%A4-%EB%B0%B0%ED%8F%AC\" aria-label=\"스토리지 클래스 배포 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>볼륨은 쿠버네티스의 디스크 서비스입니다. 쿠버네티스는 많은 유형의 볼륨을 지원하고, 파드는 여러 볼륨을 동시에 사용할 수 있습니다. 볼륨 유형에 대한 전체 목록은 쿠버네티스 공식 문서의 <a href=\"https://kubernetes.io/ko/docs/concepts/storage/volumes/#%EB%B3%BC%EB%A5%A8-%EC%9C%A0%ED%98%95%EB%93%A4\">볼륨 유형들</a> 내용을 참조하세요.</p>\n<p><strong>storage-classes.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> storage.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> StorageClass\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ebs<span class=\"token punctuation\">-</span>default\n<span class=\"token key atrule\">provisioner</span><span class=\"token punctuation\">:</span> ebs.csi.aws.com\n<span class=\"token key atrule\">volumeBindingMode</span><span class=\"token punctuation\">:</span> WaitForFirstConsumer\n<span class=\"token key atrule\">parameters</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> gp2\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> storage.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> StorageClass\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ebs<span class=\"token punctuation\">-</span>default<span class=\"token punctuation\">-</span>a\n<span class=\"token key atrule\">provisioner</span><span class=\"token punctuation\">:</span> ebs.csi.aws.com\n<span class=\"token key atrule\">volumeBindingMode</span><span class=\"token punctuation\">:</span> WaitForFirstConsumer\n<span class=\"token key atrule\">parameters</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> gp2\n<span class=\"token key atrule\">allowedTopologies</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">matchLabelExpressions</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> topology.ebs.csi.aws.com/zone\n        <span class=\"token key atrule\">values</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span>2a\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> storage.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> StorageClass\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ebs<span class=\"token punctuation\">-</span>default<span class=\"token punctuation\">-</span>encrypted\n<span class=\"token key atrule\">provisioner</span><span class=\"token punctuation\">:</span> ebs.csi.aws.com\n<span class=\"token key atrule\">volumeBindingMode</span><span class=\"token punctuation\">:</span> WaitForFirstConsumer\n<span class=\"token key atrule\">parameters</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> gp2\n  <span class=\"token key atrule\">encrypted</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span>\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> storage.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> StorageClass\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ebs<span class=\"token punctuation\">-</span>fast\n<span class=\"token key atrule\">provisioner</span><span class=\"token punctuation\">:</span> ebs.csi.aws.com\n<span class=\"token key atrule\">volumeBindingMode</span><span class=\"token punctuation\">:</span> WaitForFirstConsumer\n<span class=\"token key atrule\">parameters</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> io1\n  <span class=\"token key atrule\">iopsPerGB</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"10\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>볼륨 타입은 애플리케이션의 입출력 특성에 따라 선택합니다.</p>\n<ul>\n<li><code>gp2</code>: 범용 SSD 볼륨</li>\n<li><code>io1</code>: 프로비저닝된 IOPS* SSD 볼륨</li>\n</ul>\n<p><small>※ IOPS(Input/Output Operations Per Second, 아이옵스): 초당 입/출력 처리 횟수</small></p>\n<p><code>volumeBindingMode</code> 필드는 볼륨 바인딩과 동적 프로비저닝의 시작 시기를 제어합니다. <code>WaitForFirstConsumer</code> 모드로 지정하면 볼륨을 사용하는 파드가 생성될 때까지 볼륨의 바인딩과 프로비저닝을 지연시킵니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl apply -f storage-classes.yaml\nkubectl get storageclasses</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1c3d00e74e9620c2b01a713063b93312/396d0/apply-storageclasses.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.708333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/1c3d00e74e9620c2b01a713063b93312/396d0/apply-storageclasses.jpg\"\n        srcset=\"/static/1c3d00e74e9620c2b01a713063b93312/a3e66/apply-storageclasses.jpg 480w,\n/static/1c3d00e74e9620c2b01a713063b93312/396d0/apply-storageclasses.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>필자는 스토리지 클래스 8개를 생성하였습니다. 예제에는 내용이 길어서 4개만 작성하였습니다.</p>\n</blockquote>\n<p>스토리지 클래스 생성을 완료하였습니다. 클러스터 관리자는 앞으로 생성할 오브젝트에 <code>storageClassName</code> 필드가 있다면 해당 스토리지 클래스의 <code>name</code> 값을 입력해야 합니다. 쿠버네티스는 동적 볼륨 프로비저닝을 통해 On-Demand(온디맨드, 주문형 서비스) 방식으로 스토리지 볼륨을 생성합니다.</p>\n<blockquote>\n<p>온디맨드 방식은 볼륨을 원하는 옵션으로 상품화하여 등록한 후 앞으로 사용할 오브젝트에서 해당 볼륨을 선택해 주문하는 방식을 의미합니다.</p>\n</blockquote>\n<h2 id=\"EBS-CSI-드라이버-배포\" style=\"position:relative;\">EBS CSI 드라이버 배포<a href=\"#EBS-CSI-%EB%93%9C%EB%9D%BC%EC%9D%B4%EB%B2%84-%EB%B0%B0%ED%8F%AC\" aria-label=\"EBS CSI 드라이버 배포 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>EBS(Elastic Block Store, 고성능 블록 스토리지 서비스) <strong>CSI</strong>(Container Storage Interface)는 쿠버네티스를 위한 임의의 스토리지 시스템을 컨테이너 워크로드에 노출시키는 인터페이스입니다. EBS CSI 드라이버는 EKS 클러스터가 EBS 볼륨의 수명 주기를 관리할 수 있게 해 주는 CSI 인터페이스를 제공합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl apply -k <span class=\"token string\">\"github.com/kubernetes-sigs/aws-ebs-csi-driver/deploy/kubernetes/overlays/stable/?ref=master\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li><code>-k</code>: kustomization directory</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/65924c89293b7a813e095ba3ebe42e34/396d0/apply-aws-ebs-csi-driver.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.708333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/65924c89293b7a813e095ba3ebe42e34/396d0/apply-aws-ebs-csi-driver.jpg\"\n        srcset=\"/static/65924c89293b7a813e095ba3ebe42e34/a3e66/apply-aws-ebs-csi-driver.jpg 480w,\n/static/65924c89293b7a813e095ba3ebe42e34/396d0/apply-aws-ebs-csi-driver.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>EBS CSI 드라이버를 사용하기 위하여 노드 그룹에 정책을 연결해 봅시다. IAM - 정책 - 정책 생성 버튼 클릭 후 다음과 같이 정책을 하나 생성하세요. 이름은 마음대로 하셔도 됩니다. (필자는 <code>Amazon_EBS_CSI_Driver</code> 이름으로 생성)</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"Version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2012-10-17\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Statement\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"Effect\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Allow\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Action\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string\">\"ec2:AttachVolume\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:CreateSnapshot\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:CreateTags\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:CreateVolume\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:DeleteSnapshot\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:DeleteTags\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:DeleteVolume\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:DescribeInstances\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:DescribeSnapshots\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:DescribeTags\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:DescribeVolumes\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:DetachVolume\"</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Resource\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"*\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/66b102998812991329202d3b481a0232/83ca0/add-iam-ebs-csi-policy.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 94.79166666666666%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/66b102998812991329202d3b481a0232/aaf92/add-iam-ebs-csi-policy.jpg\"\n        srcset=\"/static/66b102998812991329202d3b481a0232/a3e66/add-iam-ebs-csi-policy.jpg 480w,\n/static/66b102998812991329202d3b481a0232/fb816/add-iam-ebs-csi-policy.jpg 960w,\n/static/66b102998812991329202d3b481a0232/aaf92/add-iam-ebs-csi-policy.jpg 1920w,\n/static/66b102998812991329202d3b481a0232/83ca0/add-iam-ebs-csi-policy.jpg 2001w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>IAM - 역할 - <code>&#x3C;your-cluster-name></code> 항목을 검색하여 <code>NodeInstanceRole</code> 단어를 포함하는 역할에 정책을 연결하세요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cc93f051f414f39f66f80f85c6b165f5/83ca0/add-iam-ebs-csi-policy-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.79166666666667%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/cc93f051f414f39f66f80f85c6b165f5/aaf92/add-iam-ebs-csi-policy-2.jpg\"\n        srcset=\"/static/cc93f051f414f39f66f80f85c6b165f5/a3e66/add-iam-ebs-csi-policy-2.jpg 480w,\n/static/cc93f051f414f39f66f80f85c6b165f5/fb816/add-iam-ebs-csi-policy-2.jpg 960w,\n/static/cc93f051f414f39f66f80f85c6b165f5/aaf92/add-iam-ebs-csi-policy-2.jpg 1920w,\n/static/cc93f051f414f39f66f80f85c6b165f5/83ca0/add-iam-ebs-csi-policy-2.jpg 2001w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl get pods --namespace<span class=\"token operator\">=</span>kube-system</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8653fd392a901e0c7303a6dde2ffdb42/396d0/ebs-csi-driver-pods.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.458333333333332%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/8653fd392a901e0c7303a6dde2ffdb42/396d0/ebs-csi-driver-pods.jpg\"\n        srcset=\"/static/8653fd392a901e0c7303a6dde2ffdb42/a3e66/ebs-csi-driver-pods.jpg 480w,\n/static/8653fd392a901e0c7303a6dde2ffdb42/396d0/ebs-csi-driver-pods.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>정책 연결을 완료하였습니다. 이제 쿠버네티스로 EBS CSI 드라이버의 기능을 사용할 수 있습니다.</p>\n<h2 id=\"ALB-수신-컨트롤러-배포\" style=\"position:relative;\">ALB 수신 컨트롤러 배포<a href=\"#ALB-%EC%88%98%EC%8B%A0-%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC-%EB%B0%B0%ED%8F%AC\" aria-label=\"ALB 수신 컨트롤러 배포 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>LB</strong>(Load Balancer, 로드 밸런서)는 애플리케이션이 2개 이상 있을 때 서버에 가해지는 부하(load)를 분산(balancer)시켜 작업을 나누는 장치 또는 기술을 의미합니다.</p>\n<p><strong>ALB</strong>(Application Load Balancer)는 AWS에서 서비스 중인 로드 밸런서 중의 하나로 애플리케이션(HTTP, FTP, SMTP) 계층에서 로드를 분산하는 L7(Layer 7, 7계층) 로드 밸런서입니다. HTTP 헤더, 쿠키 등과 같은 사용자의 요청을 기준으로 특정 서버에 트래픽을 분산하는 것이 가능합니다. 클라이언트의 요청을 보다 세분화하여 서버에 전달할 수 있습니다.</p>\n<p><strong>aws-alb-ingress-controller.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ServiceAccount\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n    <span class=\"token key atrule\">helm.sh/chart</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller<span class=\"token punctuation\">-</span>0.1.11\n    <span class=\"token key atrule\">app.kubernetes.io/managed-by</span><span class=\"token punctuation\">:</span> Helm\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ClusterRole\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n    <span class=\"token key atrule\">helm.sh/chart</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller<span class=\"token punctuation\">-</span>0.1.11\n    <span class=\"token key atrule\">app.kubernetes.io/managed-by</span><span class=\"token punctuation\">:</span> Helm\n<span class=\"token key atrule\">rules</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"\"</span>\n      <span class=\"token punctuation\">-</span> extensions\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> configmaps\n      <span class=\"token punctuation\">-</span> endpoints\n      <span class=\"token punctuation\">-</span> events\n      <span class=\"token punctuation\">-</span> ingresses\n      <span class=\"token punctuation\">-</span> ingresses/status\n      <span class=\"token punctuation\">-</span> services\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> create\n      <span class=\"token punctuation\">-</span> get\n      <span class=\"token punctuation\">-</span> list\n      <span class=\"token punctuation\">-</span> update\n      <span class=\"token punctuation\">-</span> watch\n      <span class=\"token punctuation\">-</span> patch\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"\"</span>\n      <span class=\"token punctuation\">-</span> extensions\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> nodes\n      <span class=\"token punctuation\">-</span> pods\n      <span class=\"token punctuation\">-</span> secrets\n      <span class=\"token punctuation\">-</span> services\n      <span class=\"token punctuation\">-</span> namespaces\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> get\n      <span class=\"token punctuation\">-</span> list\n      <span class=\"token punctuation\">-</span> watch\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ClusterRoleBinding\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n    <span class=\"token key atrule\">helm.sh/chart</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller<span class=\"token punctuation\">-</span>0.1.11\n    <span class=\"token key atrule\">app.kubernetes.io/managed-by</span><span class=\"token punctuation\">:</span> Helm\n<span class=\"token key atrule\">roleRef</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">apiGroup</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io\n  <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ClusterRole\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n<span class=\"token key atrule\">subjects</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ServiceAccount\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n    <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> default\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n    <span class=\"token key atrule\">helm.sh/chart</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller<span class=\"token punctuation\">-</span>0.1.11\n    <span class=\"token key atrule\">app.kubernetes.io/managed-by</span><span class=\"token punctuation\">:</span> Helm\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"docker.io/amazon/aws-alb-ingress-controller:v1.1.3\"</span>\n          <span class=\"token key atrule\">imagePullPolicy</span><span class=\"token punctuation\">:</span> IfNotPresent\n          <span class=\"token key atrule\">args</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>cluster<span class=\"token punctuation\">-</span>name=&lt;your<span class=\"token punctuation\">-</span>cluster<span class=\"token punctuation\">-</span>name<span class=\"token punctuation\">></span>\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>class=alb\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>aws<span class=\"token punctuation\">-</span>region=ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">2</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>aws<span class=\"token punctuation\">-</span>vpc<span class=\"token punctuation\">-</span>id=&lt;your<span class=\"token punctuation\">-</span>vpc<span class=\"token punctuation\">-</span>id<span class=\"token punctuation\">></span>\n          <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> health\n              <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10254</span>\n              <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n          <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n      <span class=\"token key atrule\">serviceAccountName</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n      <span class=\"token key atrule\">terminationGracePeriodSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">60</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code>--aws-vpc-id</code> 필드에 대한 정보는 <em>- AWS > VPC 메뉴 또는 -</em> 다음 명령어를 입력해 확인할 수 있습니다. 자세한 정보는 AWS 공식 문서의 <a href=\"https://docs.aws.amazon.com/cli/latest/reference/eks/describe-cluster.html\">describe-cluster</a> 내용을 참조하세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>aws eks describe-cluster --name<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-cluster-name<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cd2563630027625a61f67ca30cede3d5/396d0/describe-cluster.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 125.83333333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/cd2563630027625a61f67ca30cede3d5/396d0/describe-cluster.jpg\"\n        srcset=\"/static/cd2563630027625a61f67ca30cede3d5/a3e66/describe-cluster.jpg 480w,\n/static/cd2563630027625a61f67ca30cede3d5/396d0/describe-cluster.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>필자는 <strong>Helm</strong>(헬름)에서 제공하는 차트를 사용하였습니다. 하단의 <code>--cluster-name</code>, <code>--aws-region</code>, <code>--aws-vpc-id</code> 필드는 여러분이 설정한 값으로 입력하세요. 헬름 차트에 대한 자세한 정보는 <a href=\"https://github.com/helm/charts/tree/master/incubator/aws-alb-ingress-controller\">aws-alb-ingress-controller</a> 내용을 참조하세요.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl apply -f aws-alb-ingress-controller.yaml\nkubectl get all</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/63c1d66dc15b4f23d3dcd181cdaf6fbf/396d0/apply-aws-alb-ingress-controller.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.166666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/63c1d66dc15b4f23d3dcd181cdaf6fbf/396d0/apply-aws-alb-ingress-controller.jpg\"\n        srcset=\"/static/63c1d66dc15b4f23d3dcd181cdaf6fbf/a3e66/apply-aws-alb-ingress-controller.jpg 480w,\n/static/63c1d66dc15b4f23d3dcd181cdaf6fbf/396d0/apply-aws-alb-ingress-controller.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>ALB 수신 컨트롤러 생성을 완료하였습니다.</p>\n<h2 id=\"RDS-데이터베이스-생성\" style=\"position:relative;\">RDS 데이터베이스 생성<a href=\"#RDS-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%83%9D%EC%84%B1\" aria-label=\"RDS 데이터베이스 생성 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>RDS</strong>(Relational Database Service)는 AWS 클라우드에서 관계형 데이터베이스를 더 쉽게 설치, 운영 및 확장할 수 있는 웹 서비스입니다. RDS는 어렵거나 지루한 관계형 데이터베이스 관리 작업을 대다수 대신합니다.</p>\n<p>RDS - 데이터베이스 - 데이터베이스 생성 버튼을 클릭하여 새 데이터베이스 정보를 입력하세요. 데이터베이스 인스턴스 생성에 대한 자세한 정보는 AWS 공식 문서의 <a href=\"https://docs.aws.amazon.com/ko_kr/AmazonRDS/latest/UserGuide/CHAP_Tutorials.WebServerDB.CreateDBInstance.html\">RDS DB 인스턴스 만들기</a> 내용을 참조하세요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 890px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/32a937b06f326c2c9be51855a94abbc8/4e63b/create-rds-database.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 629.5833333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/32a937b06f326c2c9be51855a94abbc8/4e63b/create-rds-database.jpg\"\n        srcset=\"/static/32a937b06f326c2c9be51855a94abbc8/a3e66/create-rds-database.jpg 480w,\n/static/32a937b06f326c2c9be51855a94abbc8/4e63b/create-rds-database.jpg 890w\"\n        sizes=\"(max-width: 890px) 100vw, 890px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>필자의 경우 최소 사양으로 구성하였습니다. 사양이 높을수록 월 청구 요금도 높아지기 때문에 하단의 월별 추정 요금을 확인하면서 설정하세요.</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c3d539e3fbe40704b03bb3cff94cc3d5/06dbb/create-rds-database-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.125%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/c3d539e3fbe40704b03bb3cff94cc3d5/06dbb/create-rds-database-2.jpg\"\n        srcset=\"/static/c3d539e3fbe40704b03bb3cff94cc3d5/a3e66/create-rds-database-2.jpg 480w,\n/static/c3d539e3fbe40704b03bb3cff94cc3d5/fb816/create-rds-database-2.jpg 960w,\n/static/c3d539e3fbe40704b03bb3cff94cc3d5/06dbb/create-rds-database-2.jpg 1140w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>데이터베이스 생성을 완료하였습니다.</p>\n<h2 id=\"네임스페이스-생성\" style=\"position:relative;\">네임스페이스 생성<a href=\"#%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4-%EC%83%9D%EC%84%B1\" aria-label=\"네임스페이스 생성 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>Namespace</strong>(네임스페이스)는 클러스터 내 논리적인 분리를 통한 가상 클러스터를 의미합니다. 같은 네임스페이스 내 오브젝트는 기본적으로 동일한 접근 제어 정책을 갖습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl get namespace</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>쿠버네티스는 처음에 3개의 네임스페이스를 갖습니다.</p>\n<ul>\n<li><code>default</code>: 다른 네임스페이스가 없는 오브젝트를 위한 기본 네임스페이스</li>\n<li><code>kube-system</code>: 쿠버네티스 시스템에서 생성한 오브젝트를 위한 네임스페이스</li>\n<li><code>kube-public</code>: 모든 사용자(인증되지 않은 사용자 포함)가 읽기 권한으로 접근할 수 있는 네임스페이스</li>\n</ul>\n<p>다음 명령어를 입력하여 네임스페이스를 생성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl create namespace <span class=\"token operator\">&lt;</span>insert-your-namespace-name<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/89821c2bffd652bbc7b3b3fa75f97634/396d0/create-namespace.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 11.249999999999998%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/89821c2bffd652bbc7b3b3fa75f97634/396d0/create-namespace.jpg\"\n        srcset=\"/static/89821c2bffd652bbc7b3b3fa75f97634/a3e66/create-namespace.jpg 480w,\n/static/89821c2bffd652bbc7b3b3fa75f97634/396d0/create-namespace.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>필자는 <code>fms</code> 네임스페이스를 생성하였습니다. 여러분이 원하는 네임스페이스를 생성하세요. 네임스페이스를 삭제하고 싶다면 다음 명령어를 입력하세요.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl delete namespace <span class=\"token operator\">&lt;</span>insert-your-namespace-name<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>모든 오브젝트가 네임스페이스에 속하지는 않습니다. 파드, 서비스 등의 쿠버네티스 리소스는 네임스페이스에 속하지만 네임스페이스 리소스 자체는 네임스페이스에 속하지 않습니다. 노드나 퍼시스턴트 볼륨 등의 저수준 리소스는 어느 네임스페이스에도 속하지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl api-resources --namespaced<span class=\"token operator\">=</span>true  // 네임스페이스에 속하는 리소스 조회\nkubectl api-resources --namespaced<span class=\"token operator\">=</span>false // 네임스페이스에 속하지 않는 리소스 조회</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3 id=\"네임스페이스에-속하는-리소스\" style=\"position:relative;\">네임스페이스에 속하는 리소스<a href=\"#%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4%EC%97%90-%EC%86%8D%ED%95%98%EB%8A%94-%EB%A6%AC%EC%86%8C%EC%8A%A4\" aria-label=\"네임스페이스에 속하는 리소스 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl get <span class=\"token operator\">&lt;</span>NAME<span class=\"token operator\">|</span>SHORTNAMES<span class=\"token operator\">></span> --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<table>\n<thead>\n<tr>\n<th>NAME</th>\n<th>SHORTNAMES</th>\n<th>KIND</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>bindings</code></td>\n<td></td>\n<td>Binding</td>\n</tr>\n<tr>\n<td><code>configmaps</code></td>\n<td><code>cm</code></td>\n<td>ConfigMap</td>\n</tr>\n<tr>\n<td><code>endpoints</code></td>\n<td><code>ep</code></td>\n<td>Endpoints</td>\n</tr>\n<tr>\n<td><code>events</code></td>\n<td><code>ev</code></td>\n<td>Event</td>\n</tr>\n<tr>\n<td><code>limitranges</code></td>\n<td><code>limits</code></td>\n<td>LimitRange</td>\n</tr>\n<tr>\n<td><code>persistentvolumeclaims</code></td>\n<td><code>pvc</code></td>\n<td>PersistentVolumeClaim</td>\n</tr>\n<tr>\n<td><code>pods</code></td>\n<td><code>pod</code></td>\n<td>Pod</td>\n</tr>\n<tr>\n<td><code>podtemplates</code></td>\n<td></td>\n<td>PodTemplate</td>\n</tr>\n<tr>\n<td><code>replicationcontrollers</code></td>\n<td><code>rc</code></td>\n<td>ReplicationController</td>\n</tr>\n<tr>\n<td><code>resourcequotas</code></td>\n<td><code>quota</code></td>\n<td>ResourceQuota</td>\n</tr>\n<tr>\n<td><code>secrets</code></td>\n<td></td>\n<td>Secret</td>\n</tr>\n<tr>\n<td><code>serviceaccounts</code></td>\n<td><code>sa</code></td>\n<td>ServiceAccount</td>\n</tr>\n<tr>\n<td><code>services</code></td>\n<td><code>svc</code></td>\n<td>Service</td>\n</tr>\n<tr>\n<td><code>controllerrevisions</code></td>\n<td></td>\n<td>ControllerRevision</td>\n</tr>\n<tr>\n<td><code>daemonsets</code></td>\n<td><code>ds</code></td>\n<td>DaemonSet</td>\n</tr>\n<tr>\n<td><code>deployments</code></td>\n<td><code>deploy</code></td>\n<td>Deployment</td>\n</tr>\n<tr>\n<td><code>replicasets</code></td>\n<td><code>rs</code></td>\n<td>ReplicaSet</td>\n</tr>\n<tr>\n<td><code>statefulsets</code></td>\n<td><code>sts</code></td>\n<td>StatefulSet</td>\n</tr>\n<tr>\n<td><code>localsubjectaccessreviews</code></td>\n<td></td>\n<td>LocalSubjectAccessReview</td>\n</tr>\n<tr>\n<td><code>horizontalpodautoscalers</code></td>\n<td><code>hpa</code></td>\n<td>HorizontalPodAutoscaler</td>\n</tr>\n<tr>\n<td><code>cronjobs</code></td>\n<td><code>cj</code></td>\n<td>CronJob</td>\n</tr>\n<tr>\n<td><code>jobs</code></td>\n<td></td>\n<td>Job</td>\n</tr>\n<tr>\n<td><code>leases</code></td>\n<td></td>\n<td>Lease</td>\n</tr>\n<tr>\n<td><code>events</code></td>\n<td><code>ev</code></td>\n<td>Event</td>\n</tr>\n<tr>\n<td><code>daemonsets</code></td>\n<td><code>ds</code></td>\n<td>DaemonSet</td>\n</tr>\n<tr>\n<td><code>deployments</code></td>\n<td><code>deploy</code></td>\n<td>Deployment</td>\n</tr>\n<tr>\n<td><code>ingresses</code></td>\n<td><code>ing</code></td>\n<td>Ingress</td>\n</tr>\n<tr>\n<td><code>networkpolicies</code></td>\n<td><code>netpol</code></td>\n<td>NetworkPolicy</td>\n</tr>\n<tr>\n<td><code>replicasets</code></td>\n<td><code>rs</code></td>\n<td>ReplicaSet</td>\n</tr>\n<tr>\n<td><code>ingresses</code></td>\n<td><code>ing</code></td>\n<td>Ingress</td>\n</tr>\n<tr>\n<td><code>networkpolicies</code></td>\n<td><code>netpo</code></td>\n<td>NetworkPolicy</td>\n</tr>\n<tr>\n<td><code>poddisruptionbudgets</code></td>\n<td><code>pdb</code></td>\n<td>PodDisruptionBudget</td>\n</tr>\n<tr>\n<td><code>rolebindings</code></td>\n<td></td>\n<td>RoleBinding</td>\n</tr>\n<tr>\n<td><code>roles</code></td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"네임스페이스에-속하지-않는-리소스\" style=\"position:relative;\">네임스페이스에 속하지 않는 리소스<a href=\"#%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4%EC%97%90-%EC%86%8D%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94-%EB%A6%AC%EC%86%8C%EC%8A%A4\" aria-label=\"네임스페이스에 속하지 않는 리소스 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl get <span class=\"token operator\">&lt;</span>NAME<span class=\"token operator\">|</span>SHORTNAMES<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<table>\n<thead>\n<tr>\n<th>NAME</th>\n<th>SHORTNAMES</th>\n<th>KIND</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>componentstatuses</code></td>\n<td><code>cs</code></td>\n<td>ComponentStatus</td>\n</tr>\n<tr>\n<td><code>namespaces</code></td>\n<td><code>ns</code></td>\n<td>Namespace</td>\n</tr>\n<tr>\n<td><code>nodes</code></td>\n<td><code>no</code></td>\n<td>Node</td>\n</tr>\n<tr>\n<td><code>persistentvolumes</code></td>\n<td><code>pv</code></td>\n<td>PersistentVolume</td>\n</tr>\n<tr>\n<td><code>mutatingwebhookconfigurations</code></td>\n<td></td>\n<td>MutatingWebhookConfiguration</td>\n</tr>\n<tr>\n<td><code>validatingwebhookconfigurations</code></td>\n<td></td>\n<td>ValidatingWebhookConfiguration</td>\n</tr>\n<tr>\n<td><code>customresourcedefinitions</code></td>\n<td><code>crd</code></td>\n<td>CustomResourceDefinition</td>\n</tr>\n<tr>\n<td><code>apiservices</code></td>\n<td></td>\n<td>APIService</td>\n</tr>\n<tr>\n<td><code>tokenreviews</code></td>\n<td></td>\n<td>TokenReview</td>\n</tr>\n<tr>\n<td><code>selfsubjectaccessreviews</code></td>\n<td></td>\n<td>SelfSubjectAccessReview</td>\n</tr>\n<tr>\n<td><code>selfsubjectrulesreviews</code></td>\n<td></td>\n<td>SelfSubjectRulesReview</td>\n</tr>\n<tr>\n<td><code>subjectaccessreviews</code></td>\n<td></td>\n<td>SubjectAccessReview</td>\n</tr>\n<tr>\n<td><code>certificatesigningrequests</code></td>\n<td><code>csr</code></td>\n<td>CertificateSigningRequest</td>\n</tr>\n<tr>\n<td><code>eniconfigs</code></td>\n<td></td>\n<td>ENIConfig</td>\n</tr>\n<tr>\n<td><code>podsecuritypolicies</code></td>\n<td><code>psp</code></td>\n<td>PodSecurityPolicy</td>\n</tr>\n<tr>\n<td><code>runtimeclasses</code></td>\n<td></td>\n<td>RuntimeClass</td>\n</tr>\n<tr>\n<td><code>podsecuritypolicies</code></td>\n<td><code>psp</code></td>\n<td>PodSecurityPolicy</td>\n</tr>\n<tr>\n<td><code>clusterrolebindings</code></td>\n<td></td>\n<td>ClusterRoleBinding</td>\n</tr>\n<tr>\n<td><code>clusterroles</code></td>\n<td></td>\n<td>ClusterRole</td>\n</tr>\n<tr>\n<td><code>priorityclasses</code></td>\n<td><code>pc</code></td>\n<td>PriorityClass</td>\n</tr>\n<tr>\n<td><code>csidrivers</code></td>\n<td></td>\n<td>CSIDriver</td>\n</tr>\n<tr>\n<td><code>csinodes</code></td>\n<td></td>\n<td>CSINode</td>\n</tr>\n<tr>\n<td><code>storageclasses</code></td>\n<td><code>sc</code></td>\n<td>StorageClass</td>\n</tr>\n<tr>\n<td><code>volumeattachments</code></td>\n<td></td>\n<td>VolumeAttachment</td>\n</tr>\n</tbody>\n</table>\n<p>네임스페이스 생성을 완료하였습니다.</p>\n<h2 id=\"ExternalName-설정\" style=\"position:relative;\">ExternalName 설정<a href=\"#ExternalName-%EC%84%A4%EC%A0%95\" aria-label=\"ExternalName 설정 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>자격 증명 세부 정보 보기</strong> 또는 RDS - 데이터베이스 - <code>&#x3C;your-database-identifier></code> 항목을 클릭하여 현재 생성한 데이터베이스의 엔드포인트를 복사합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2664a6fd77f5b750cf36f324221250cb/06dbb/create-rds-database-3.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.041666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/2664a6fd77f5b750cf36f324221250cb/06dbb/create-rds-database-3.jpg\"\n        srcset=\"/static/2664a6fd77f5b750cf36f324221250cb/a3e66/create-rds-database-3.jpg 480w,\n/static/2664a6fd77f5b750cf36f324221250cb/fb816/create-rds-database-3.jpg 960w,\n/static/2664a6fd77f5b750cf36f324221250cb/06dbb/create-rds-database-3.jpg 1140w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>데이터베이스의 경우 쿠버네티스에서 관리하지 않는 AWS 서비스로 쿠버네티스 명령어로는 조회할 수 없지만 필자와 동일한 VPC 보안 그룹에 속해 있어 서비스를 사용할 수 있습니다.</p>\n<p>다만, 서비스에서 사용할 때 <em>- 가독성이 낮은 -</em> 엔드포인트 주소 전체를 입력해야 하는데 <code>ExternalName</code> 유형을 지정해서 <code>spec.externalName</code> 파라미터를 사용하면 쿠버네티스 안에서 별칭 형태로 서비스에 적용할 수 있습니다. 자세한 정보는 쿠버네티스 공식 문서의 <a href=\"https://kubernetes.io/ko/docs/concepts/services-networking/service/#externalname\">ExternalName 유형</a> 내용을 참조하세요.</p>\n<p><strong>external-name.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mariadb\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> ExternalName\n  <span class=\"token key atrule\">externalName</span><span class=\"token punctuation\">:</span> &lt;database<span class=\"token punctuation\">-</span>endpoint<span class=\"token punctuation\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl apply -f external-name.yaml\nkubectl get services --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f468d70453a427f54152bf84f7854973/396d0/apply-external-name-for-mariadb.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.458333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/f468d70453a427f54152bf84f7854973/396d0/apply-external-name-for-mariadb.jpg\"\n        srcset=\"/static/f468d70453a427f54152bf84f7854973/a3e66/apply-external-name-for-mariadb.jpg 480w,\n/static/f468d70453a427f54152bf84f7854973/396d0/apply-external-name-for-mariadb.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이제 오브젝트에 <em>- 가독성이 높은 -</em> <code>mariadb</code> 별칭으로 서비스에 적용할 수 있습니다.</p>\n<h2 id=\"MariaDB-CLI-배포\" style=\"position:relative;\">MariaDB CLI 배포<a href=\"#MariaDB-CLI-%EB%B0%B0%ED%8F%AC\" aria-label=\"MariaDB CLI 배포 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>외부 서비스인 데이터베이스는 쿠버네티스 명령어로 조회할 수 없기 때문에 쿠버네티스 안에서 사용할 수 있도록 CLI 툴을 배포해 봅시다.</p>\n<p><strong>mariadb-cli.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mariadb<span class=\"token punctuation\">-</span>cli\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> mariadb<span class=\"token punctuation\">-</span>cli\n    <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> client\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> mariadb<span class=\"token punctuation\">-</span>cli\n      <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> client\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> mariadb<span class=\"token punctuation\">-</span>cli\n        <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> client\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">serviceAccountName</span><span class=\"token punctuation\">:</span> default\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mariadb\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> mariadb<span class=\"token punctuation\">:</span><span class=\"token number\">10.3</span>\n          <span class=\"token key atrule\">imagePullPolicy</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"IfNotPresent\"</span>\n          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"/bin/sh\"</span><span class=\"token punctuation\">]</span>\n          <span class=\"token key atrule\">args</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">[</span>\n              <span class=\"token string\">\"-c\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">\"while true; do echo $(date +%Y-%m-%d' '%H:%M:%S); sleep 60; done\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">]</span>\n          <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 50m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 64Mi\n            <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 100m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 64Mi</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl apply -f mariadb-cli.yaml\nkubectl get pods --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7093a85d691c54933805a23be9fb30e5/396d0/apply-mariadb-cli.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.708333333333332%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/7093a85d691c54933805a23be9fb30e5/396d0/apply-mariadb-cli.jpg\"\n        srcset=\"/static/7093a85d691c54933805a23be9fb30e5/a3e66/apply-mariadb-cli.jpg 480w,\n/static/7093a85d691c54933805a23be9fb30e5/396d0/apply-mariadb-cli.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>필자의 경우 <em>- 지속적 연결 상태 확인 목적으로 -</em> <code>args</code> 필드에 60초마다 현재 시각을 출력하는 스크립트를 정의해 놓았습니다. 여러분은 다른 스크립트로 정의하거나 정의하지 않아도 됩니다. <code>kubectl logs -f &#x3C;mariadb-cli-pod> --namespace=&#x3C;your-namespace></code> 명령어로 확인할 수 있습니다.</p>\n</blockquote>\n<p>다음 명령어를 입력하면 <em>- 다소 복잡하긴 하지만 -</em> 파드를 조회하는 과정을 생략할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl logs -f <span class=\"token variable\"><span class=\"token variable\">$(</span>kubectl get pods -o <span class=\"token assign-left variable\">jsonpath</span><span class=\"token operator\">=</span><span class=\"token string\">\"{.items[0].metadata.name}\"</span> --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span> -l <span class=\"token string\">\"app=mariadb-cli\"</span><span class=\"token variable\">)</span></span> --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span> --timestamps</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li><code>-l, --selector</code>: 레이블 셀렉터. 쿠버네티스 오브젝트를 식별합니다. 자세한 정보는 쿠버네티스 공식 문서의 <a href=\"https://kubernetes.io/ko/docs/concepts/overview/working-with-objects/labels/#%EB%A0%88%EC%9D%B4%EB%B8%94-%EC%85%80%EB%A0%89%ED%84%B0\">레이블과 셀렉터</a> 내용을 참조하세요.</li>\n<li><code>-o, --output</code>: 반환된 목록의 각 파드에서 이름을 가져오는 표현식을 지정합니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c9645d5f6ea82cf396f820cca54d1dba/396d0/apply-mariadb-cli-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.41666666666667%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/c9645d5f6ea82cf396f820cca54d1dba/396d0/apply-mariadb-cli-2.jpg\"\n        srcset=\"/static/c9645d5f6ea82cf396f820cca54d1dba/a3e66/apply-mariadb-cli-2.jpg 480w,\n/static/c9645d5f6ea82cf396f820cca54d1dba/396d0/apply-mariadb-cli-2.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>다음 명령어를 입력하여 <code>mariadb-cli</code> 내부로 접속합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl <span class=\"token builtin class-name\">exec</span> -it <span class=\"token operator\">&lt;</span>mariadb-cli-pod<span class=\"token operator\">></span> --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span> <span class=\"token function\">bash</span>\nmysql -h <span class=\"token operator\">&lt;</span>mariadb-external-name<span class=\"token operator\">></span> -u admin -p\nEnter Password: <span class=\"token operator\">&lt;</span>mariadb-password<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/754eb8ae5033cda0770b0af39c271bdc/396d0/connect-mariadb.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.874999999999996%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/754eb8ae5033cda0770b0af39c271bdc/396d0/connect-mariadb.jpg\"\n        srcset=\"/static/754eb8ae5033cda0770b0af39c271bdc/a3e66/connect-mariadb.jpg 480w,\n/static/754eb8ae5033cda0770b0af39c271bdc/396d0/connect-mariadb.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p><code>&#x3C;mariadb-external-name></code> 필드의 경우 엔드포인트 주소 그대로 입력해도 무방하지만 미리 정의해 놓은 별칭을 사용하는 것이 좋습니다.</p>\n</blockquote>\n<h3 id=\"ERROR-Connection-Failed\" style=\"position:relative;\">[ERROR] Connection Failed.<a href=\"#ERROR-Connection-Failed\" aria-label=\"ERROR Connection Failed permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>접속에 실패할 경우 로드 밸런서 및 보안 그룹 설정을 검토하세요.</p>\n<ol>\n<li><code>aws-alb-ingress-controller</code> 설정에서 <code>cluster-name</code> 또는 <code>aws-vpc-id</code> 필드 값 확인</li>\n<li>데이터베이스 보안 그룹 <code>ClusterSharedNodeSecurityGroup</code> 추가 확인 (<code>ControlPlaneSecurityGroup</code> 아님)</li>\n</ol>\n<h2 id=\"MaxScale-배포\" style=\"position:relative;\">MaxScale 배포<a href=\"#MaxScale-%EB%B0%B0%ED%8F%AC\" aria-label=\"MaxScale 배포 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>MariaDB <strong>MaxScale</strong>(맥스스케일)은 기본 데이터베이스 인프라에서 애플리케이션 개발을 분리하여 애플리케이션 개발을 단순화하는 데이터베이스 프록시입니다.</p>\n<p>MaxScale 서비스를 사용하기 위해 <code>maxscale</code> 계정을 생성하고 특정 테이블에 대한 권한을 부여해야 합니다. 자세한 정보는 MariaDB 공식 문서의 <a href=\"https://mariadb.com/kb/en/mariadb-maxscale-23-setting-up-mariadb-maxscale/#creating-a-user-account-for-maxscale\">Creating a user account for MaxScale</a> 내용을 참조하세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">USER</span> <span class=\"token string\">'maxscale'</span><span class=\"token variable\">@'%'</span> IDENTIFIED <span class=\"token keyword\">BY</span> <span class=\"token string\">'&lt;insert-your-maxscale-password>'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">ON</span> mysql<span class=\"token punctuation\">.</span><span class=\"token keyword\">user</span> <span class=\"token keyword\">TO</span> <span class=\"token string\">'maxscale'</span><span class=\"token variable\">@'%'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">ON</span> mysql<span class=\"token punctuation\">.</span>db <span class=\"token keyword\">TO</span> <span class=\"token string\">'maxscale'</span><span class=\"token variable\">@'%'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">ON</span> mysql<span class=\"token punctuation\">.</span>tables_priv <span class=\"token keyword\">TO</span> <span class=\"token string\">'maxscale'</span><span class=\"token variable\">@'%'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">ON</span> mysql<span class=\"token punctuation\">.</span>roles_mapping <span class=\"token keyword\">TO</span> <span class=\"token string\">'maxscale'</span><span class=\"token variable\">@'%'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">SHOW</span> <span class=\"token keyword\">DATABASES</span> <span class=\"token keyword\">ON</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span> <span class=\"token keyword\">TO</span> <span class=\"token string\">'maxscale'</span><span class=\"token variable\">@'%'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">SELECT</span> Host<span class=\"token punctuation\">,</span> <span class=\"token keyword\">User</span> <span class=\"token keyword\">FROM</span> mysql<span class=\"token punctuation\">.</span><span class=\"token keyword\">user</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/927a82867c75b30a0bc5cbea3916534c/396d0/create-user-account-for-maxscale.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.791666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/927a82867c75b30a0bc5cbea3916534c/396d0/create-user-account-for-maxscale.jpg\"\n        srcset=\"/static/927a82867c75b30a0bc5cbea3916534c/a3e66/create-user-account-for-maxscale.jpg 480w,\n/static/927a82867c75b30a0bc5cbea3916534c/396d0/create-user-account-for-maxscale.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>my-maxscale.cnf</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"properties\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-properties line-numbers\"><code class=\"language-properties\">[master]\n<span class=\"token attr-name\">type</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">server</span>\n<span class=\"token attr-name\">address</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">mariadb</span>\n<span class=\"token attr-name\">port</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">3306</span>\n<span class=\"token attr-name\">protocol</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">MariaDBBackend</span>\n\n[slave1]\n<span class=\"token attr-name\">type</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">server</span>\n<span class=\"token attr-name\">address</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">mariadb</span>\n<span class=\"token attr-name\">port</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">3306</span>\n<span class=\"token attr-name\">protocol</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">MariaDBBackend</span>\n\n[slave2]\n<span class=\"token attr-name\">type</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">server</span>\n<span class=\"token attr-name\">address</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">mariadb</span>\n<span class=\"token attr-name\">port</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">3306</span>\n<span class=\"token attr-name\">protocol</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">MariaDBBackend</span>\n\n<span class=\"token comment\"># Monitor for the servers</span>\n<span class=\"token comment\"># This will keep MaxScale aware of the state of the servers.</span>\n<span class=\"token comment\"># MySQL Monitor documentation:</span>\n<span class=\"token comment\"># https://github.com/mariadb-corporation/MaxScale/blob/2.3/Documentation/Monitors/MariaDB-Monitor.md</span>\n\n[MariaDB-Monitor]\n<span class=\"token attr-name\">type</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">monitor</span>\n<span class=\"token attr-name\">module</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">mariadbmon</span>\n<span class=\"token attr-name\">servers</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">master</span>\n<span class=\"token attr-name\">user</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">maxscale</span>\n<span class=\"token attr-name\">passwd</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">&lt;your-maxscale-password></span>\n<span class=\"token attr-name\">auto_failover</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">true</span>\n<span class=\"token attr-name\">auto_rejoin</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">true</span>\n<span class=\"token attr-name\">enforce_read_only_slaves</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">1</span>\n\n<span class=\"token comment\"># Service definitions</span>\n<span class=\"token comment\"># Service Definition for a read-only service and a read/write splitting service.</span>\n\n<span class=\"token comment\"># ReadConnRoute documentation:</span>\n<span class=\"token comment\"># https://github.com/mariadb-corporation/MaxScale/blob/2.3/Documentation/Routers/ReadConnRoute.md</span>\n\n[Read-Only-Service]\n<span class=\"token attr-name\">type</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">service</span>\n<span class=\"token attr-name\">router</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">readconnroute</span>\n<span class=\"token attr-name\">servers</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">master</span>\n<span class=\"token attr-name\">user</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">maxscale</span>\n<span class=\"token attr-name\">passwd</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">&lt;your-maxscale-password></span>\n<span class=\"token attr-name\">router_options</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">slave</span>\n\n<span class=\"token comment\"># ReadWriteSplit documentation:</span>\n<span class=\"token comment\"># https://github.com/mariadb-corporation/MaxScale/blob/2.3/Documentation/Routers/ReadWriteSplit.md</span>\n\n[Read-Write-Service]\n<span class=\"token attr-name\">type</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">service</span>\n<span class=\"token attr-name\">router</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">readwritesplit</span>\n<span class=\"token attr-name\">servers</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">master</span>\n<span class=\"token attr-name\">user</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">maxscale</span>\n<span class=\"token attr-name\">passwd</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">&lt;your-maxscale-password></span>\n<span class=\"token attr-name\">master_failure_mode</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">fail_on_write</span>\n\n<span class=\"token comment\"># Listener definitions for the services</span>\n<span class=\"token comment\"># Listeners represent the ports the services will listen on.</span>\n\n[Read-Only-Listener]\n<span class=\"token attr-name\">type</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">listener</span>\n<span class=\"token attr-name\">service</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">Read-Only-Service</span>\n<span class=\"token attr-name\">protocol</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">MySQLClient</span>\n<span class=\"token attr-name\">port</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">4008</span>\n<span class=\"token attr-name\">address</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">0.0.0.0</span>\n\n[Read-Write-Listener]\n<span class=\"token attr-name\">type</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">listener</span>\n<span class=\"token attr-name\">service</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">Read-Write-Service</span>\n<span class=\"token attr-name\">protocol</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">MySQLClient</span>\n<span class=\"token attr-name\">port</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">4006</span>\n<span class=\"token attr-name\">address</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">0.0.0.0</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Maxscale 구성으로 시크릿을 생성해 봅시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl create secret generic maxscale-config --from-file<span class=\"token operator\">=</span>my-maxscale.cnf<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>repository-absolute-path<span class=\"token operator\">></span>/my-maxscale.cnf --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span>\nkubectl get secrets --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<blockquote>\n<p><code>&#x3C;repository-absolute-path></code> 필드의 경우 <code>${PWD}</code> 변수를 사용하면 편리합니다.</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/43fdf533680246215d21ca298f86c484/396d0/create-secret-for-maxscale-config.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.958333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/43fdf533680246215d21ca298f86c484/396d0/create-secret-for-maxscale-config.jpg\"\n        srcset=\"/static/43fdf533680246215d21ca298f86c484/a3e66/create-secret-for-maxscale-config.jpg 480w,\n/static/43fdf533680246215d21ca298f86c484/396d0/create-secret-for-maxscale-config.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>maxscale.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> maxscale\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> maxscale\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4006</span>\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4006</span>\n      <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> maxscale\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> ClusterIP\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> extensions/v1beta1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> maxscale\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> maxscale\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">initContainers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> init<span class=\"token punctuation\">-</span>myservice\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> mariadb/maxscale<span class=\"token punctuation\">:</span><span class=\"token number\">2.3</span>\n          <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> conf<span class=\"token punctuation\">-</span>d\n              <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /tmp/maxscale.cnf.d\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> secret<span class=\"token punctuation\">-</span>conf<span class=\"token punctuation\">-</span>d\n              <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /tmp/source.maxscale.cnf.d\n          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token string\">\"sh\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token string\">\"-c\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token string\">\"cat /tmp/source.maxscale.cnf.d/my-maxscale.cnf >> /tmp/maxscale.cnf.d/my-maxscale.cnf\"</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> maxscale\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> mariadb/maxscale<span class=\"token punctuation\">:</span><span class=\"token number\">2.3</span>\n          <span class=\"token key atrule\">imagePullPolicy</span><span class=\"token punctuation\">:</span> IfNotPresent\n          <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 50m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 200Mi\n            <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 300m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 300Mi\n          <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4006</span>\n              <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> readwrite<span class=\"token punctuation\">-</span>port\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4008</span>\n              <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> readonly<span class=\"token punctuation\">-</span>port\n          <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> conf<span class=\"token punctuation\">-</span>d\n              <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/etc/maxscale.cnf.d\"</span>\n              <span class=\"token key atrule\">readOnly</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n      <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> secret<span class=\"token punctuation\">-</span>conf<span class=\"token punctuation\">-</span>d\n          <span class=\"token key atrule\">secret</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">secretName</span><span class=\"token punctuation\">:</span> maxscale<span class=\"token punctuation\">-</span>config\n            <span class=\"token key atrule\">items</span><span class=\"token punctuation\">:</span>\n              <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>maxscale.cnf\n                <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>maxscale.cnf\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> conf<span class=\"token punctuation\">-</span>d\n          <span class=\"token key atrule\">emptyDir</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl apply -f maxscale.yaml\nkubectl get services --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/78668b181cea9bcd99cdfb777f4e9eec/396d0/apply-maxscale.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.708333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/78668b181cea9bcd99cdfb777f4e9eec/396d0/apply-maxscale.jpg\"\n        srcset=\"/static/78668b181cea9bcd99cdfb777f4e9eec/a3e66/apply-maxscale.jpg 480w,\n/static/78668b181cea9bcd99cdfb777f4e9eec/396d0/apply-maxscale.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>MaxScale 배포를 완료하였습니다. 이제 <code>kubectl port-forward</code> 명령어로 리소스 이름과 파드 이름과 사용하여 일치하는 파드를 선택해 포트 포워딩을 할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl port-forward service/maxscale <span class=\"token number\">4006</span>:4006 --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/855b62701aedcab4abc408403846af4a/396d0/port-forward-maxscale.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 13.750000000000002%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/855b62701aedcab4abc408403846af4a/396d0/port-forward-maxscale.jpg\"\n        srcset=\"/static/855b62701aedcab4abc408403846af4a/a3e66/port-forward-maxscale.jpg 480w,\n/static/855b62701aedcab4abc408403846af4a/396d0/port-forward-maxscale.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>파드의 포트를 로컬 포트로 포워딩한 상태입니다. 데이터베이스 툴을 사용하여 직접 데이터베이스에 접속해 봅시다. (필자는 <a href=\"https://dbeaver.io/download/\"><code>DBeaver</code></a> 툴을 사용하였습니다.)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1120px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b94cd59dd01340ae6adae6007da3f48b/811cd/mariadb-connection-settings.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 91.66666666666667%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/b94cd59dd01340ae6adae6007da3f48b/811cd/mariadb-connection-settings.jpg\"\n        srcset=\"/static/b94cd59dd01340ae6adae6007da3f48b/a3e66/mariadb-connection-settings.jpg 480w,\n/static/b94cd59dd01340ae6adae6007da3f48b/fb816/mariadb-connection-settings.jpg 960w,\n/static/b94cd59dd01340ae6adae6007da3f48b/811cd/mariadb-connection-settings.jpg 1120w\"\n        sizes=\"(max-width: 1120px) 100vw, 1120px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>데이터베이스 접속을 완료하였습니다. 이제 데이터베이스에 마이그레이션 및 다양한 작업을 수행할 수 있습니다.</p>\n<h2 id=\"Docker-자격-증명-기반-Secret-배포\" style=\"position:relative;\">Docker 자격 증명 기반 Secret 배포<a href=\"#Docker-%EC%9E%90%EA%B2%A9-%EC%A6%9D%EB%AA%85-%EA%B8%B0%EB%B0%98-Secret-%EB%B0%B0%ED%8F%AC\" aria-label=\"Docker 자격 증명 기반 Secret 배포 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>애플리케이션을 오브젝트로 배포할 때 도커 이미지를 가져오기 위한 자격 증명이 필요합니다. 그렇다면 배포하는 <code>.yaml</code> 파일마다 도커 계정과 비밀번호를 설정해야 할까요? <em>- 보안을 중요시하는 개발자라면 -</em> 절대로 그렇게 설정하고 싶지 않을 겁니다. 쿠버네티스는 중요한 정보를 별도로 저장할 수 있도록 <strong>Secret</strong>(시크릿) 기능을 지원합니다. 지금부터 도커 계정 정보를 시크릿으로 만들어 배포해 봅시다.</p>\n<p>도커 사용자 이름과 비밀번호를 <code>base64</code> 형태로 변환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span><span class=\"token builtin class-name\">echo</span> -n <span class=\"token string\">'&lt;username>:&lt;password>'</span> <span class=\"token operator\">|</span> base64</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong>docker/config.json</strong></p>\n<p>변환한 정보를 <code>auth</code> 필드에 삽입합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"auths\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"https://index.docker.io/v1/\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"auth\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;base64-encoded-string>\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>해당 파일을 <code>base64</code> 형태로 변환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span><span class=\"token function\">cat</span> config.json <span class=\"token operator\">|</span> base64</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong>docker/dockerhub.yaml</strong></p>\n<p>변환한 정보를 <code>.dockerconfigjson</code> 필드에 삽입합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Secret\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> dockerhub\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n<span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> kubernetes.io/dockerconfigjson\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">.dockerconfigjson</span><span class=\"token punctuation\">:</span> &lt;base64<span class=\"token punctuation\">-</span>encoded<span class=\"token punctuation\">-</span>string<span class=\"token punctuation\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl apply -f dockerhub.yaml\nkubectl get secrets --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span>\nkubectl describe secrets/dockerhub --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5e1cafbe1e517907086323378f08b9b1/396d0/apply-secret-for-dockerhub.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.458333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/5e1cafbe1e517907086323378f08b9b1/396d0/apply-secret-for-dockerhub.jpg\"\n        srcset=\"/static/5e1cafbe1e517907086323378f08b9b1/a3e66/apply-secret-for-dockerhub.jpg 480w,\n/static/5e1cafbe1e517907086323378f08b9b1/396d0/apply-secret-for-dockerhub.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>시크릿 배포를 완료하였습니다. 이제 애플리케이션 오브젝트 내 <code>imagePullSecrets</code> 필드에 다음과 같이 도커 자격 증명을 지정할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token punctuation\">...</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">imagePullSecrets</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> dockerhub</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>ㅗㅜㅑ 🤭<br />설마 여기까지 온 건가요?</h1>\n<p>이 엄청난 스크롤의 압박을 극복한 당신은 최소 쿠버네티스 사랑꾼! 👍 이제 서비스를 구성하는 파드를 쿠버네티스 오브젝트로 만들고 배포하는 단계가 남았습니다. 심호흡하고 <a href=\"/kubernetes/deploy-project\">Amazon EKS 프로젝트 배포하기</a> 글을 살펴보세요.</p>","frontmatter":{"category":"kubernetes","index":5,"title":"Amazon EKS 인프라 구성하기","description":"모빌리티 스타트업에서 EKS 인프라를 구성하는 데브옵스 업무를 맡았습니다. 실전에서 인프라를 어떻게 구성했는지 살펴보세요.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/kubernetes/build-eks-infrastructure/cover.jpg?raw=true","date":"2020-05-25","draft":null}},{"id":"ddad2133-4517-5324-8bdf-fe971e979719","fields":{"slug":"/post/kubernetes/pod/"},"html":"<blockquote>\n<p>쿠버네티스 공식 문서의 <a href=\"https://kubernetes.io/ko/docs/concepts/workloads/pods/\">파드</a> 내용을 참조해서 작성한 글입니다. 자세한 내용은 해당 문서를 참조하세요. 😉</p>\n</blockquote>\n<p><strong>Pod</strong>(파드)는 쿠버네티스에서 생성하고 관리할 수 있는 <strong>배포 가능한 가장 작은 컴퓨팅 단위</strong>의 단순한 쿠버네티스 오브젝트입니다. 파드의 어원은 고래 떼(pod of whales), 콩 꼬투리(pea pod) 의미에서 유래하였습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 362px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8e898c043a9c46c2c2ab0784223ea4e6/e1e3d/pod.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 108.28729281767957%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/8e898c043a9c46c2c2ab0784223ea4e6/e1e3d/pod.jpg\"\n        srcset=\"/static/8e898c043a9c46c2c2ab0784223ea4e6/e1e3d/pod.jpg 362w\"\n        sizes=\"(max-width: 362px) 100vw, 362px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"Container\" style=\"position:relative;\">Container<a href=\"#Container\" aria-label=\"Container permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>파드 당 하나의 컨테이너</strong> 모델은 가장 일반적은 쿠버네티스 배포 방식입니다. 그래서 파드를 컨테이너로 퉁쳐서 생각하는 분들이 있는데 정확하게 파드는 단일 컨테이너를 둘러싼 래퍼(wrapper) 개념으로 생각하면 좋습니다.</p>\n<p><strong>파드 당 여러 개의 컨테이너</strong> 모델을 사용할 수도 있습니다. 여러 컨테이너가 밀접하게 결합되어 있고 리소스를 공유해야 하는 경우 다중 컨테이너로 파드를 구성하는 것이 좋습니다. 다중 컨테이너로 구성한 파드는 하나의 결합된 서비스 단위를 형성합니다.</p>\n<blockquote>\n<p>단일 파드에서 여러 컨테이너를 그룹화하는 것은 컨테이너가 밀접하게 결합된 특정 인스턴스에서만 사용해 주세요.</p>\n</blockquote>\n<h3 id=\"Network\" style=\"position:relative;\">Network<a href=\"#Network\" aria-label=\"Network permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>각 파드에는 고유한 IP 주소가 할당됩니다. 파드 내부의 모든 컨테이너는 IP 주소와 네트워크 포트를 포함하여 네트워크 네임스페이스를 공유합니다. 파드 내부에서 파드에 속한 컨테이너는 <code>localhost</code>를 사용하여 서로를 찾을 수 있습니다. 네트워킹에 대한 자세한 정보는 쿠버네티스 공식 문서의 <a href=\"https://kubernetes.io/ko/docs/concepts/cluster-administration/networking/\">클러스터 네트워킹</a> 내용을 참조하세요.</p>\n<h3 id=\"Storage\" style=\"position:relative;\">Storage<a href=\"#Storage\" aria-label=\"Storage permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>파드는 공유 스토리지 볼륨의 집합을 지정할 수 있습니다. 파드의 모든 컨테이너는 공유 볼륨에 접근하여 데이터를 공유할 수 있습니다. 스토리지에 대한 자세한 정보는 쿠버네티스 공식 문서의 <a href=\"https://kubernetes.io/ko/docs/concepts/storage/\">스토리지</a> 내용을 참조하세요.</p>","frontmatter":{"category":"kubernetes","index":4,"title":"Pod","description":"도커는 컨테이너를 배포해서 서비스를 구성하고, 쿠버네티스는 파드를 배포해서 서비스를 구성합니다. 컨테이너와 파드는 비슷하지만 미묘한 차이가 있어요.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/kubernetes/cover.jpg?raw=true","date":"2020-05-25","draft":null}},{"id":"57e89794-5c2c-5a1e-b3ba-4b67824db3f2","fields":{"slug":"/post/kubernetes/component/"},"html":"<blockquote>\n<p>쿠버네티스 공식 문서의 <a href=\"https://kubernetes.io/ko/docs/concepts/overview/components/\">컴포넌트</a>와 서비큐라의 <a href=\"https://subicura.com/2019/05/19/kubernetes-basic-1.html#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EA%B8%B0%EB%B3%B8-%EA%B0%9C%EB%85%90\">쿠버네티스 기본 개념</a> 내용을 참조해서 작성한 글입니다. 자세한 내용은 해당 문서를 참조하세요. 😉</p>\n</blockquote>\n<p><strong>Component</strong>(컴포넌트)는 독립적인 소프트웨어 단위 모듈입니다. 독립적인 모듈은 의존성이 없기 때문에 재사용을 가능하게 합니다. 파란색 7각형 모양의 도형이 컴포넌트를 의미합니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1441px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/de8dd2b080cc11fa24a2541f3e541a4d/2332f/kubernetes-components.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.958333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"쿠버네티스를 구성하는 컴포넌트들\"\n        title=\"쿠버네티스를 구성하는 컴포넌트들\"\n        src=\"/static/de8dd2b080cc11fa24a2541f3e541a4d/2332f/kubernetes-components.jpg\"\n        srcset=\"/static/de8dd2b080cc11fa24a2541f3e541a4d/a3e66/kubernetes-components.jpg 480w,\n/static/de8dd2b080cc11fa24a2541f3e541a4d/fb816/kubernetes-components.jpg 960w,\n/static/de8dd2b080cc11fa24a2541f3e541a4d/2332f/kubernetes-components.jpg 1441w\"\n        sizes=\"(max-width: 1441px) 100vw, 1441px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>쿠버네티스를 구성하는 컴포넌트들</p></figcaption>\n  </figure></p>\n<h2 id=\"Master-Node---Control-Plane-Component\" style=\"position:relative;\">Master Node - Control Plane Component<a href=\"#Master-Node---Control-Plane-Component\" aria-label=\"Master Node   Control Plane Component permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>Master Node</strong>(마스터 노드)는 다양한 모듈의 확장성을 고려한 <strong>MSA</strong>* 방식으로 구성하였습니다. <strong>Control Plane</strong>(컨트롤 플레인) 컴포넌트는 클러스터에 관한 전반적인 결정을 수행하고 클러스터 이벤트를 감지합니다.</p>\n<ul>\n<li>MSA(Microservices Architecture, 마이크로서비스 아키텍처): 하나의 큰 애플리케이션을 여러 개의 작은 애플리케이션으로 쪼개어 변경과 조합이 가능하도록 만든 소프트웨어 개발 기법</li>\n</ul>\n<h3 id=\"kube-apiserver\" style=\"position:relative;\">kube-apiserver<a href=\"#kube-apiserver\" aria-label=\"kube apiserver permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>kube-apiserver</strong>(큐브 API 서버)는 쿠버네티스의 모든 요청을 처리하는 마스터의 핵심 컴포넌트입니다. <code>kubectl</code> <em>- 및 내부 컴포넌트 -</em> 요청을 처리합니다.  <strong>Desired State</strong>(원하는 상태)를 etcd에 저장하고 저장한 상태를 조회합니다. 요청에 대한 권한을 체크한 후 요청을 거부할 수도 있습니다. 노드에서 실행 중인 컨테이너의 로그를 보여주고 명령을 보내는 등 디버거 역할도 수행합니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1152px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f6a8ddb17eac98dc2f79d770d79a3476/4472f/kube-apiserver.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.833333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"© KT Cloud\"\n        title=\"© KT Cloud\"\n        src=\"/static/f6a8ddb17eac98dc2f79d770d79a3476/4472f/kube-apiserver.jpg\"\n        srcset=\"/static/f6a8ddb17eac98dc2f79d770d79a3476/a3e66/kube-apiserver.jpg 480w,\n/static/f6a8ddb17eac98dc2f79d770d79a3476/fb816/kube-apiserver.jpg 960w,\n/static/f6a8ddb17eac98dc2f79d770d79a3476/4472f/kube-apiserver.jpg 1152w\"\n        sizes=\"(max-width: 1152px) 100vw, 1152px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>© KT Cloud</p></figcaption>\n  </figure></p>\n<h3 id=\"etcd\" style=\"position:relative;\">etcd<a href=\"#etcd\" aria-label=\"etcd permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>etcd</strong>(/etc distributed, 엣시디)는 키-값 데이터베이스 저장소입니다. 쿠버네티스 클러스터의 구성, 서비스 검색 및 스케줄러 조정, 시스템의 실제 상태(current state)와 원하는 상태(desired state)를 저장합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f31cf2cd5ad0e8b5b2162957a4c2572b/d0f75/etcd.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.33333333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/f31cf2cd5ad0e8b5b2162957a4c2572b/d0f75/etcd.jpg\"\n        srcset=\"/static/f31cf2cd5ad0e8b5b2162957a4c2572b/a3e66/etcd.jpg 480w,\n/static/f31cf2cd5ad0e8b5b2162957a4c2572b/d0f75/etcd.jpg 750w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>쿠버네티스 클러스터는 <strong>모든 데이터를 etcd에 저장</strong>합니다. <code>kubectl get &#x3C;xyz></code> 명령어 실행 시 읽을 수 있는 모든 데이터를 저장합니다. <code>kubectl create &#x3C;xyz></code> 명령어 실행 시 변경된 항목을 업데이트하고 서로에게 변경 사항을 알립니다.</p>\n<h3 id=\"kube-scheduler\" style=\"position:relative;\">kube-scheduler<a href=\"#kube-scheduler\" aria-label=\"kube scheduler permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>kube-scheduler</strong>(큐브 스케줄러)는 새로운 파드를 배포할 때 자원 할당이 가능한 노드를 선택합니다. <code>cpu</code>, <code>memory</code>, <code>affinity</code> 등의 조건을 만족하는 노드를 찾아 배포합니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1180px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/763b8d0c25c042991d39b4ddf11a0e4c/096b1/kube-scheduler.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.29166666666667%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"© KT Cloud\"\n        title=\"© KT Cloud\"\n        src=\"/static/763b8d0c25c042991d39b4ddf11a0e4c/096b1/kube-scheduler.jpg\"\n        srcset=\"/static/763b8d0c25c042991d39b4ddf11a0e4c/a3e66/kube-scheduler.jpg 480w,\n/static/763b8d0c25c042991d39b4ddf11a0e4c/fb816/kube-scheduler.jpg 960w,\n/static/763b8d0c25c042991d39b4ddf11a0e4c/096b1/kube-scheduler.jpg 1180w\"\n        sizes=\"(max-width: 1180px) 100vw, 1180px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>© KT Cloud</p></figcaption>\n  </figure></p>\n<h3 id=\"kube-controller-manager\" style=\"position:relative;\">kube-controller-manager<a href=\"#kube-controller-manager\" aria-label=\"kube controller manager permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>kube-controller-manager</strong>(큐브 컨트롤러 매니저)는 쿠버네티스 오브젝트의 상태를 관리합니다.</p>\n<h3 id=\"cloud-controller-manager\" style=\"position:relative;\">cloud-controller-manager<a href=\"#cloud-controller-manager\" aria-label=\"cloud controller manager permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>cloud-controller-manager</strong>(클라우드 컨트롤러 매니저)는 AWS, GCE, Azure 등 클라우드에 특화된 컴포넌트입니다. 노드를 추가/삭제하고 로드 밸런서를 연결하거나 볼륨을 붙일 수 있습니다.</p>\n<h2 id=\"Worker-Node---Node-Component\" style=\"position:relative;\">Worker Node - Node Component<a href=\"#Worker-Node---Node-Component\" aria-label=\"Worker Node   Node Component permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>Worker Node</strong>(워커 노드)는 마스터 노드와 통신하면서 필요한 파드를 생성합니다. 모든 노드 상에서 동작합니다.</p>\n<h3 id=\"kubelet\" style=\"position:relative;\">kubelet<a href=\"#kubelet\" aria-label=\"kubelet permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>kubelet</strong>(큐블릿)은 각 노드에서 실행하는 기본 <strong>노드 에이전트</strong>로 마스터 노드와 통신합니다. 각 노드에 할당된 파드의 생명 주기를 관리합니다. 파드 배포 시 <strong>PodSpec</strong>* 정보를 토대로 컨테이너에 이상이 없는지 확인합니다.</p>\n<ul>\n<li>PodSpec: 파드를 설명하는 YAML 또는 JSON 객체</li>\n</ul>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/64fb249616e50827644f4c195d5f68f1/ee99d/kubelet.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.87500000000001%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"© Aswin&#39;s Site\"\n        title=\"© Aswin&#39;s Site\"\n        src=\"/static/64fb249616e50827644f4c195d5f68f1/aaf92/kubelet.jpg\"\n        srcset=\"/static/64fb249616e50827644f4c195d5f68f1/a3e66/kubelet.jpg 480w,\n/static/64fb249616e50827644f4c195d5f68f1/fb816/kubelet.jpg 960w,\n/static/64fb249616e50827644f4c195d5f68f1/aaf92/kubelet.jpg 1920w,\n/static/64fb249616e50827644f4c195d5f68f1/ee99d/kubelet.jpg 2286w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>© Aswin’s Site</p></figcaption>\n  </figure></p>\n<h3 id=\"kube-proxy\" style=\"position:relative;\">kube-proxy<a href=\"#kube-proxy\" aria-label=\"kube proxy permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>kube-proxy</strong>(큐브 프록시)는 각 노드에서 실행하는 프록시로 컨테이너 서비스 포트로 접근할 수 있도록 합니다. 쿠버네티스는 클러스터 내부에 별도의 가상 네트워크를 설정하고 관리합니다.</p>\n<p>kube-proxy는 클러스터 내부 IP로 연결 요청이 들어오면 적절한 파드에 전달합니다. 네트워크를 관리하는 방법은 userspace, <strong>iptables</strong>(기본 모드), IPVS(IP Virtual Server) 3가지가 있습니다.</p>\n<h4>userspace 모드</h4>\n<p>클라이언트에서 서비스 IP를 통한 요청이 들어오면 iptables 프로그램을 거쳐 <strong>kube-proxy에 전달</strong>합니다. kube-proxy는 <strong>Round Robin</strong>* 방식에 따라 요청을 파드에 분배합니다.</p>\n<ul>\n<li>Round Robin(라운드 로빈): 프로세스들 사이에 순서대로 일정 시간 CPU를 할당하고 할당된 시간이 지나면 그 프로세스는 잠시 보류한 뒤 다른 프로세스에게 기회를 부여하는 운영 방식</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 804px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f710410b42aeaa5d3816d1737699e56c/56b8b/kube-proxy-userspace.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.875%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/f710410b42aeaa5d3816d1737699e56c/56b8b/kube-proxy-userspace.jpg\"\n        srcset=\"/static/f710410b42aeaa5d3816d1737699e56c/a3e66/kube-proxy-userspace.jpg 480w,\n/static/f710410b42aeaa5d3816d1737699e56c/56b8b/kube-proxy-userspace.jpg 804w\"\n        sizes=\"(max-width: 804px) 100vw, 804px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>kube-proxy를 거치기 때문에 파드에 요청이 실패하면 자동으로 다른 파드에 요청을 재시도합니다.</p>\n<h4>iptables 모드</h4>\n<p>클라이언트에서 서비스 IP를 통한 요청이 들어오면 iptables 프로그램을 거쳐 <strong>직접 파드에 전달</strong>합니다. kube-proxy는 API 서버 요청만 받고 클라이언트 트래픽은 받지 않기 때문에 userspace 모드보다 성능이 빠릅니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 815px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/da64f68630b76ef6ba498ecb2d0d8afa/9bf9d/kube-proxy-iptables.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/da64f68630b76ef6ba498ecb2d0d8afa/9bf9d/kube-proxy-iptables.jpg\"\n        srcset=\"/static/da64f68630b76ef6ba498ecb2d0d8afa/a3e66/kube-proxy-iptables.jpg 480w,\n/static/da64f68630b76ef6ba498ecb2d0d8afa/9bf9d/kube-proxy-iptables.jpg 815w\"\n        sizes=\"(max-width: 815px) 100vw, 815px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>kube-proxy를 거치지 않아 파드에 요청이 실패하면 재시도를 하지 않기 때문에 배포 오브젝트 설정 시 <code>readinessProbe</code> 값을 알맞게 설정해야 합니다.</p>","frontmatter":{"category":"kubernetes","index":3,"title":"Component","description":"인체를 세포로 구성한다면, 쿠버네티스는 컴포넌트로 구성합니다. 쿠버네티스를 구성하는 컴포넌트의 종류는 매우 다양하게 있어요.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/kubernetes/cover.jpg?raw=true","date":"2020-05-25","draft":null}},{"id":"20e16e74-75ec-5284-a146-ba2050e2c06a","fields":{"slug":"/post/kubernetes/cluster/"},"html":"<h1>🧐<br />클러스터?</h1>\n<p>쿠버네티스를 시작하기 위해 가장 먼저 해야 할 일은 <strong>Cluster</strong>(클러스터)를 생성하는 것입니다. 쿠버네티스 클러스터는 컨테이너화된 애플리케이션을 실행하는 노드의 집합입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1655px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4c1ad2ed7aa9159bccf6cab608205153/76ee5/cluster-structure.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.833333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/4c1ad2ed7aa9159bccf6cab608205153/76ee5/cluster-structure.jpg\"\n        srcset=\"/static/4c1ad2ed7aa9159bccf6cab608205153/a3e66/cluster-structure.jpg 480w,\n/static/4c1ad2ed7aa9159bccf6cab608205153/fb816/cluster-structure.jpg 960w,\n/static/4c1ad2ed7aa9159bccf6cab608205153/76ee5/cluster-structure.jpg 1655w\"\n        sizes=\"(max-width: 1655px) 100vw, 1655px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"Node\" style=\"position:relative;\">Node<a href=\"#Node\" aria-label=\"Node permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>Node</strong>(노드)는 쿠버네티스 클러스터를 구성하는 머신입니다. 머신은 클러스터 유형에 따라 가상 머신(Virtual Machine, VM) 또는 물리 머신(Physical Computer)일 수 있습니다.</p>\n<blockquote>\n<p>쿠버네티스는 클라우드, 온프레미스 환경을 모두 지원합니다. AWS, GCP, Azure 서비스에 구성하면 가상 머신, 서버 컴퓨터에 구성하면 물리 머신이 됩니다.</p>\n</blockquote>\n<p>노드에는 두 가지 종류가 있습니다.</p>\n<ul>\n<li>Master Node</li>\n<li>Worker Node</li>\n</ul>\n<h3 id=\"Master-Node\" style=\"position:relative;\">Master Node<a href=\"#Master-Node\" aria-label=\"Master Node permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>Master Node</strong>(마스터 노드)는 클러스터를 관리하는 노드입니다. 두뇌 역할을 하는 <strong>Control Plane</strong>(컨트롤 플레인)을 형성합니다. 컨트롤 플레인은 전체 쿠버네티스 시스템을 관리하고 통제합니다. 컨테이너의 라이프사이클을 정의, 배포, 관리하기 위한 API와 인터페이스를 노출하는 컨테이너를 관리합니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/862bed7d51b8a8a39ab5de426c43b63a/20801/master-node.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.333333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"마스터 노드 구조\"\n        title=\"마스터 노드 구조\"\n        src=\"/static/862bed7d51b8a8a39ab5de426c43b63a/20801/master-node.jpg\"\n        srcset=\"/static/862bed7d51b8a8a39ab5de426c43b63a/a3e66/master-node.jpg 480w,\n/static/862bed7d51b8a8a39ab5de426c43b63a/20801/master-node.jpg 720w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>마스터 노드 구조</p></figcaption>\n  </figure></p>\n<p>노란색 영역이 컨트롤 플레인입니다. 중심 컴포넌트는 RESTful 인터페이스로 쿠버네티스 기능을 제공하는 <strong>API 서버</strong>입니다. 컨트롤 플레인에 대한 자세한 정보는 Amazon EKS 워크샵의 <a href=\"https://awskrug.github.io/eks-workshop/introduction/architecture/architecture_control/\">쿠버네티스 아키텍처 - 컨트롤 플레인</a> 내용을 참조하세요.</p>\n<p>클러스터를 구성할 때 어려움을 겪는 부분이 바로 마스터 노드를 구성하는 일입니다. AWS의 경우 이와 같은 문제를 인지하고 쿠버네티스를 쉽게 사용할 수 있도록 <strong>Amazon EKS</strong> 관리형 서비스를 만들어 자체 쿠버네티스 컨트롤 플레인을 제공하고 있습니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 760px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/923a16a2fcebb4a47a34d1cd95539339/a6335/aws-eks-introduction.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.916666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AWS 공식 사이트에서 소개한 EKS 정의\"\n        title=\"AWS 공식 사이트에서 소개한 EKS 정의\"\n        src=\"/static/923a16a2fcebb4a47a34d1cd95539339/a6335/aws-eks-introduction.jpg\"\n        srcset=\"/static/923a16a2fcebb4a47a34d1cd95539339/a3e66/aws-eks-introduction.jpg 480w,\n/static/923a16a2fcebb4a47a34d1cd95539339/a6335/aws-eks-introduction.jpg 760w\"\n        sizes=\"(max-width: 760px) 100vw, 760px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>AWS 공식 사이트에서 소개한 EKS 정의</p></figcaption>\n  </figure></p>\n<p>AWS 공식 사이트에서 소개한 정의입니다. <strong>완전 관리형</strong>(fully managed)은 <strong>우리가 마스터 노드를 구성할 필요가 없다</strong>는 의미입니다. 실제로 필자도 EKS 서비스를 사용하면서 별도의 마스터 노드를 구성하지 않았습니다.</p>\n<h3 id=\"Worker-Node\" style=\"position:relative;\">Worker Node<a href=\"#Worker-Node\" aria-label=\"Worker Node permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>Worker Node</strong>(워커 노드, 작업자 노드)는 파드를 통해 실제 컨테이너 이미지를 실행하는 노드입니다. 컨테이너에 CPU, 메모리, 네트워크, 스토리지와 같은 능력을 제공하는 <strong>Data Plane</strong>(데이터 플레인)을 형성합니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6a9e7015918bae1bd3ca15dcaa6e0739/a22ce/worker-node.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.625%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"워커 노드 구조\"\n        title=\"워커 노드 구조\"\n        src=\"/static/6a9e7015918bae1bd3ca15dcaa6e0739/a22ce/worker-node.jpg\"\n        srcset=\"/static/6a9e7015918bae1bd3ca15dcaa6e0739/a3e66/worker-node.jpg 480w,\n/static/6a9e7015918bae1bd3ca15dcaa6e0739/a22ce/worker-node.jpg 680w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>워커 노드 구조</p></figcaption>\n  </figure></p>\n<p>EKS 서비스로 구성한 쿠버네티스의 워커 노드는 <strong>EC2 인스턴스</strong>로 실행합니다. 워커 노드는 줄여서 <strong>노드</strong>로 부르기도 합니다. Amazon EKS 서비스에서 <strong>노드와 인스턴스는 같은 의미</strong>입니다. 다음 명령어는 클러스터 노드를 조회합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl get nodes</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/55e7e4511cd23fa646765a5a00a16687/396d0/terminal-kubectl-get-nodes.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.333333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/55e7e4511cd23fa646765a5a00a16687/396d0/terminal-kubectl-get-nodes.jpg\"\n        srcset=\"/static/55e7e4511cd23fa646765a5a00a16687/a3e66/terminal-kubectl-get-nodes.jpg 480w,\n/static/55e7e4511cd23fa646765a5a00a16687/396d0/terminal-kubectl-get-nodes.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>클러스터에 2개의 EC2 인스턴스 노드를 실행하고 있습니다. 노드의 이름은 <code>&#x3C;private-IPv4-address>.&#x3C;region>.compute.internal</code> 형식으로 구성합니다.</p>\n<p>데이터 플레인에 대한 자세한 정보는 Amazon EKS 워크샵의 <a href=\"https://awskrug.github.io/eks-workshop/introduction/architecture/architecture_worker/\">쿠버네티스 아키텍처 - 데이터 플레인</a> 내용을 참조하세요.</p>","frontmatter":{"category":"kubernetes","index":2,"title":"Cluster","description":"회사 쿠버네티스를 설립하고 직원들을 수용할 사무실 클러스터를 매입하였습니다. 사무실은 임원진 구역인 마스터 노드와 직원 구역인 워커 노드로 나누어 관리하려고 합니다. 임원진은 컨설팅 업체 EKS에 자문을 구하면 1시간 안에 구성할 수 있어요.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/kubernetes/cover.jpg?raw=true","date":"2020-05-25","draft":null}},{"id":"6a5d51f5-1934-5277-a08c-452362b09e93","fields":{"slug":"/post/docker/introduction/"},"html":"<h1>시작하기</h1>\n<blockquote>\n<p>노마드 코더의 <a href=\"https://youtu.be/chnCcGCTyBg\">도커가 좋은 이유</a> 영상의 내용을 재구성한 글입니다. 영어지만 자막을 제공하는 Red Hat의 <a href=\"https://youtu.be/n-JwAM6XF88\">왜 컨테이너인가?</a> 영상도 있습니다.</p>\n</blockquote>\n<p><strong>Docker</strong>(도커)는 <strong>컨테이너 기반의 오픈 소스 가상화 플랫폼</strong>입니다. 컨테이너 기반이라는 말이 무엇일까요? 우리는 보통 컨테이너를 어떤 물체를 격리하는 공간으로 생각합니다. IT에서 의미하는 <strong>Container</strong>(컨테이너)는 <strong>격리된 공간에서 프로세스가 동작하는 가상화 기술</strong>입니다. 또는 소프트웨어와 그것에 종속된 모든 것을 포함하는 가볍고 휴대성이 높은 실행 가능한 이미지를 의미합니다.</p>\n<p>컨테이너는 <strong>Environment Disparity</strong>(환경 차이)를 해결합니다. 다음 몇 가지 <strong>예시</strong>를 살펴보면 이해할 수 있습니다.</p>\n<h3 id=\"예시-1\" style=\"position:relative;\">예시 1<a href=\"#%EC%98%88%EC%8B%9C-1\" aria-label=\"예시 1 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>당신은 불금 저녁에 개발을 하고 있습니다. 그리고 코드를 서버에 올리기만 하면 되는 상황에 있습니다. 일은 거의 다 끝났고 저녁에 친구들이랑 삼겹살만 먹으면 되는데, 이상하게 코드가 서버에만 올리면 작동을 하지 않는 겁니다. 이유인즉 로컬은 윈도우, 서버는 리눅스였습니다. 운영 체제가 다르기 때문에 서버에 올리기 전까지는 알 수도 없고 해결할 수도 없는 오류입니다. 안타깝지만 당신은 <em>- 오류를 해결할 때까지 -</em> 집에 있어야 합니다.</p>\n<blockquote>\n<p>필자도 위와 같은 문제를 경험한 적이 있습니다. 그래서 환경 차이로 인한 오류를 방지하려면 최대한 서버 환경과 동일하게 로컬 환경을 구성할 수밖에 없었습니다.</p>\n</blockquote>\n<h3 id=\"예시-2\" style=\"position:relative;\">예시 2<a href=\"#%EC%98%88%EC%8B%9C-2\" aria-label=\"예시 2 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>당신은 최신 <code>Node.js</code> 버전으로 개발을 하고 있고, 서버는 한참이나 이전 버전입니다. 개발을 마치고 서버에 올리는 순간! 역시나 서버에만 올리면 모듈 설치에 실패하는 겁니다. 노드 버전 차이의 문제를 직감하고 허겁지겁 로컬에 있는 노드 버전을 낮췄습니다. 서버가 하나 더 있네요. 맙소사! 여기는 노드를 설치하지 않았습니다. 허겁지겁 최신 버전으로 설치하고 올리는 순간! 이번에는 최신 버전이라서 오류가 발생합니다.</p>\n<blockquote>\n<p>개발자는 코드만 열심히 작성하면 된다고 생각한 필자는 버전의 늪에 빠지는 순간 하루 종일 괴로운 숫자 맞추기 놀이를 하고 있었습니다. 💀</p>\n</blockquote>\n<p>도커가 환경 차이를 해결하는 방법은 간단합니다. ① 도커를 로컬과 서버에 설치합니다. ② <code>Dockerfile</code> 이름으로 파일을 생성하고 그 안에 구현하고 싶은 환경을 정의합니다. (<code>Node.js</code>, <code>Java</code>, <code>Go</code>, <code>Python</code>, <code>Git</code> 등) ③ 도커는 파일의 내용을 읽고 필요한 모듈을 다운로드합니다. ④ 도커는 당신이 설정한 환경과 비슷한 <strong>가상 컨테이너</strong>를 만들어 냅니다. ⑤ 로컬과 서버는 <strong>동일한 환경</strong>이 됩니다.</p>\n<p>도커 컨테이너들은 <strong>독립적</strong>이기 때문에 서버 하나에 컨테이너 여러 개를 가질 수 있습니다. (<code>Node.js</code> 컨테이너, <code>Java</code> 컨테이너, <code>Go</code> 컨테이너 등) 서버에 환경을 설정하는 것이 아닌 컨테이너에 설정하는 것이죠.</p>\n<h3 id=\"예시-3\" style=\"position:relative;\">예시 3<a href=\"#%EC%98%88%EC%8B%9C-3\" aria-label=\"예시 3 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>당신이 만든 앱이 입소문을 타기 시작합니다. 트래픽을 감당할 수 없을 정도로 접속자가 많아져서 서버를 몇 개 더 만들었습니다. 트래픽에 의한 오류를 발견해서 수정하고 서버에 올려야 하는데, 여러 개라서 시간이 걸리네요. 잠깐, 방금 몇 번 서버에 반영했는지 정신줄을 놓치고 말았습니다.</p>\n<p>도커를 사용하면 간단합니다. 하나의 서버에 원하는 수만큼 컨테이너를 복제하면 됩니다. 트래픽이 줄어들면? 컨테이너 수를 줄이면 됩니다. 매번 새로운 서비스를 만들 때마다 새로운 서버를 생성할 필요가 없습니다. 당신이 원할 때마다 도커로 새로운 환경을 생성할 수 있습니다.</p>\n<h2 id=\"정리\" style=\"position:relative;\">정리<a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>도커는 <strong>격리된 가상화 공간</strong>을 만듭니다. ① 원하는 개발 환경을 <code>Dockerfile</code>에 저장하면 도커는 당신이 원하는 환경을 만듭니다. ② 컨테이너는 독립적으로 작용하기 때문에 모듈식으로 관리할 수 있습니다.</p>","frontmatter":{"category":"docker","index":1,"title":"Docker 소개","description":"Docker(도커)는 컨테이너 기반의 가상화 플랫폼으로 Environment Disparity(환경 차이)를 해결합니다. 다음 몇 가지 예시를 살펴보면 이해할 수 있습니다.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/docker/cover.jpg?raw=true","date":"2020-05-25","draft":null}},{"id":"375e2b29-1b27-5ed0-afab-d2b66d983863","fields":{"slug":"/post/kubernetes/introduction/"},"html":"<h1>시작하기</h1>\n<blockquote>\n<p>노마드 코더의 <a href=\"https://youtu.be/S3FVcdZcZnA\">쿠버네티스가 대세가 된 이유 3가지</a> 영상의 내용을 재구성한 글입니다. 자세한 정보는 <a href=\"https://kubernetes.io/ko/docs/concepts/overview/what-is-kubernetes/\">쿠버네티스 공식 문서</a> 내용을 참조하세요.</p>\n</blockquote>\n<p><strong>Kubernetes</strong>(쿠버네티스)는 구글이 만든 컨테이너화된 애플리케이션을 자동으로 배포, 스케일링 및 관리하는 <strong>오픈 소스 컨테이너 관리 플랫폼</strong>입니다. 줄여서 K8s(케이츠, 케이에이츠) 또는 Kube(큐브)로 부릅니다. 구글이 설립한 <a href=\"https://www.cncf.io/\">CNCF</a><small>(Cloud Native Computing Foundation, 클라우드 네이티브 컴퓨팅 재단)</small>의 졸업 단계 프로젝트에 속한다고 하네요.</p>\n<p>시작하기 전 <strong>Docker</strong>(도커)와 <strong>Container</strong>(컨테이너)에 대한 사전 학습이 필요합니다. 도커와 컨테이너를 잘 모른다면 <a href=\"/docker/introduction\">여기</a>부터 시작하세요.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1320px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0806c967113912fe828a7fcd4ce39b75/9ef87/kubernetes-introduction.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.625%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"쿠버네티스 공식 사이트에서 소개한 정의\"\n        title=\"쿠버네티스 공식 사이트에서 소개한 정의\"\n        src=\"/static/0806c967113912fe828a7fcd4ce39b75/9ef87/kubernetes-introduction.jpg\"\n        srcset=\"/static/0806c967113912fe828a7fcd4ce39b75/a3e66/kubernetes-introduction.jpg 480w,\n/static/0806c967113912fe828a7fcd4ce39b75/fb816/kubernetes-introduction.jpg 960w,\n/static/0806c967113912fe828a7fcd4ce39b75/9ef87/kubernetes-introduction.jpg 1320w\"\n        sizes=\"(max-width: 1320px) 100vw, 1320px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>쿠버네티스 공식 사이트에서 소개한 정의</p></figcaption>\n  </figure></p>\n<p><strong>운영 수준의 컨테이너 오케스트레이션</strong> 제목부터 진입 장벽이 느껴지는 건 기분 탓이겠죠? 마치 쿠버네티스가 입구에서부터 ‘이 정의를 이해하는 분만 들어오세요.’ 경고하는 것처럼 보입니다. 하지만 당황하지 마세요! 쿠버네티스는 결국 <strong>컨테이너를 관리하기 위한 툴</strong>입니다. 다음 몇 가지 <strong>예시</strong>를 살펴보면 이해할 수 있습니다.</p>\n<h3 id=\"예시-1\" style=\"position:relative;\">예시 1<a href=\"#%EC%98%88%EC%8B%9C-1\" aria-label=\"예시 1 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<blockquote>\n<p>만약 당신이 개발한 웹 사이트를 도커 컨테이너 안에 넣고 AWS(아마존 웹 서비스)에 배포하는 작업만 수행한다면 쿠버네티스를 알아야 할 이유가 없습니다. 도커를 업로드하고 배포하는 일이 전부이기 때문입니다.</p>\n</blockquote>\n<p>쿠버네티스는 여러 개의 컨테이너를 다룰 때 쓰입니다. <strong>MSA</strong>* 서비스를 개발한다고 가정해 봅시다. 어떤 컨테이너는 이용자 등록만 다루고, 어떤 컨테이너는 인증만 다루고, 어떤 컨테이너는 결제만 다룬다면 이 모든 컨테이너들은 동시에 업로드가 이루어져야 합니다.</p>\n<ul>\n<li>MSA(Microservices Architecture, 마이크로서비스 아키텍처): 하나의 큰 애플리케이션을 여러 개의 작은 애플리케이션으로 쪼개어 변경과 조합이 가능하도록 만든 소프트웨어 개발 기법</li>\n</ul>\n<p>수동으로 배포하면 된다고 생각하겠지만 컨테이너 수가 많아지면 문제가 발생할 수 있습니다. 만약 서비스의 핵심 파트인 컨테이너가 죽었다면? 우리는 재빠르게 해당 컨테이너를 재시작해야 합니다.</p>\n<p>바로 이때 쿠버네티스가 등장합니다! 쿠버네티스에게 해당 컨테이너를 작동할 수 있도록 권한을 부여하세요. 쿠버네티스는 그 중 하나라도 죽으면 낼름 재시작합니다. -> <strong>자동화된 복구</strong></p>\n<p>쿠버네티스는 실패한 컨테이너를 재시작하고, 컨테이너를 교체하며, ‘사용자 정의 상태 검사’에 응답하지 않는 컨테이너를 죽이고, 서비스 준비가 끝날 때까지 그러한 과정을 클라이언트에 보여주지 않습니다.</p>\n<p>바로 <strong>컨테이너 모니터링</strong>을 실시하는 것입니다. 자동으로 재시작하기 때문에 걱정을 한시름 놓을 수 있습니다. 컨테이너가 많으면 많을수록 쿠버네티스는 더 유용하게 쓰일 것입니다.</p>\n<h3 id=\"예시-2\" style=\"position:relative;\">예시 2<a href=\"#%EC%98%88%EC%8B%9C-2\" aria-label=\"예시 2 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>1만 명의 이용자가 접속을 시도합니다. 하지만 당신은 이러한 경우에 대한 대비를 하지 않았습니다. 이때 쿠버네티스는 해당 웹 사이트의 니즈를 수용할 수 있도록 자동으로 새로운 컨테이너를 만들 수 있습니다. -> <strong>서비스 디스커버리와 로드 밸런싱</strong></p>\n<p>쿠버네티스는 DNS 이름을 사용하거나 자체 IP 주소를 사용하여 컨테이너를 노출합니다. 컨테이너에 대한 트래픽이 많아지면 쿠버네티스는 네트워크 트래픽을 로드밸런싱하여 배포가 안정적으로 이루어질 수 있도록 합니다.</p>\n<p>쿠버네티스는 자동으로 해당 웹 니즈에 맞춰서 컨테이너들을 준비하고 사람들이 떠나고 니즈가 줄어들면 컨테이너를 지정한 최소 숫자로 자동 조정합니다.</p>\n<h3 id=\"예시-3\" style=\"position:relative;\">예시 3<a href=\"#%EC%98%88%EC%8B%9C-3\" aria-label=\"예시 3 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>클라우드에 5개의 컨테이너가 있습니다. 코드를 수정하여 새로운 버전이 나왔습니다. 이때 당신은 어떻게 작업하나요? <em>- 아마도 -</em>  컨테이너들을 종료하고 새로운 버전을 올리고 컨테이너들을 재시작할 것입니다. 작업을 실행하는 동안 웹 사이트가 잠시 다운된다는 의미이기도 합니다.</p>\n<p>쿠버네티스는 컨테이너의 신규 버전을 차례대로 업데이트 처리합니다. 쿠버네티스를 자동화해서 배포용 새 컨테이너를 만들고, 기존 컨테이너를 제거하고, 모든 리소스를 새 컨테이너에 적용합니다. 물론 그러한 과정을 클라이언트에 보여주지 않습니다. -> <strong>자동화된 롤아웃</strong></p>\n<h2 id=\"정리\" style=\"position:relative;\">정리<a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>컨테이너로 작업하면 자동화해야 할 것들이 은근히 많습니다. (새로운 버전을 배포한다거나, 컨테이너 사이즈를 조정한다거나, 컨테이너가 죽었을 때 재시작해야 한다거나 등) 쿠버네티스는 많은 컨테이너가 필요한 웹/앱 서비스를 운영하는 데 있어 훌륭한 솔루션입니다.</p>","frontmatter":{"category":"kubernetes","index":1,"title":"Kubernetes 소개","description":"Kubernetes(쿠버네티스)는 컨테이너를 관리하기 위한 툴입니다. 다음 몇 가지 예시를 살펴보면 이해할 수 있습니다.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/kubernetes/cover.jpg?raw=true","date":"2020-05-25","draft":null}},{"id":"c178697f-dde4-5851-b5e4-71edb386030e","fields":{"slug":"/post/aws/iam/"},"html":"<p><strong><a href=\"https://console.aws.amazon.com/iam/home\">IAM</a></strong>(Identity and Access Management, 아이에이앰)은 AWS 서비스와 리소스에 대한 액세스를 안전하게 관리하는 기능입니다. AWS 계정에서 추가 비용 없이 제공합니다.</p>\n<h2 id=\"목차\" style=\"position:relative;\">목차<a href=\"#%EB%AA%A9%EC%B0%A8\" aria-label=\"목차 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<ol>\n<li><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%B6%94%EA%B0%80\">사용자 추가</a></li>\n<li><a href=\"#%EC%A0%95%EC%B1%85-%EC%84%A4%EC%A0%95\">정책 설정</a></li>\n<li><a href=\"#%EB%B6%80%EA%B0%80-%EC%A0%95%EB%B3%B4-%EC%84%A4%EC%A0%95\">부가 정보 설정</a></li>\n<li><a href=\"#%EC%9E%90%EA%B2%A9-%EC%A6%9D%EB%AA%85-%EC%A0%80%EC%9E%A5\">자격 증명 저장</a></li>\n<li><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%84%A4%EC%A0%95\">사용자 설정</a></li>\n</ol>\n<h2 id=\"사용자-추가\" style=\"position:relative;\">사용자 추가<a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%B6%94%EA%B0%80\" aria-label=\"사용자 추가 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>IAM 사용자의 주된 용도는 대화형 작업을 위해 AWS Management 콘솔에 로그인하고 API 또는 CLI를 사용해 AWS 서비스로 프로그래밍 방식의 요청을 보내는 데 사용할 수 있는 능력을 사람들에게 제공하는 것입니다. 자세한 정보는 Amazon EKS 워크샵 문서의 <a href=\"https://awskrug.github.io/eks-workshop/prerequisites/self_paced/account/\">IAM 사용자 만들기</a> 내용을 참조하세요.</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">종류</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">루트 사용자</td>\n<td>무제한 액세스 권한이 필요한 작업을 수행하는 계정 소유자</td>\n</tr>\n<tr>\n<td align=\"center\">IAM 사용자</td>\n<td>일일 작업을 수행하는 계정 내 사용자</td>\n</tr>\n</tbody>\n</table>\n<p>IAM - 사용자 - 사용자 추가 - 버튼을 클릭한 후 다음 표시한 항목에 모두 체크하세요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1221px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fc54170f7404b295c9cb5ba7bc69a4b5/4fe08/add-iam-user.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.45833333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/fc54170f7404b295c9cb5ba7bc69a4b5/4fe08/add-iam-user.jpg\"\n        srcset=\"/static/fc54170f7404b295c9cb5ba7bc69a4b5/a3e66/add-iam-user.jpg 480w,\n/static/fc54170f7404b295c9cb5ba7bc69a4b5/fb816/add-iam-user.jpg 960w,\n/static/fc54170f7404b295c9cb5ba7bc69a4b5/4fe08/add-iam-user.jpg 1221w\"\n        sizes=\"(max-width: 1221px) 100vw, 1221px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"정책-설정\" style=\"position:relative;\">정책 설정<a href=\"#%EC%A0%95%EC%B1%85-%EC%84%A4%EC%A0%95\" aria-label=\"정책 설정 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>정책</strong>(Policy)은 자격 증명이나 리소스를 연결할 때 해당 권한을 정의하는 AWS의 객체입니다. AWS는 IAM 보안 주체(사용자 또는 역할)가 요청을 보낼 때 이러한 정책을 평가합니다.</p>\n<h3 id=\"EKS\" style=\"position:relative;\">EKS<a href=\"#EKS\" aria-label=\"EKS permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>EKS를 사용하는 경우 사용자에게 다음 정책을 추가합니다. 사용자가 여러 명인 경우 정책 그룹을 생성하여 공통된 정책을 적용하는 것이 좋습니다.</p>\n<ul>\n<li>AmazonEKSClusterPolicy</li>\n<li>AmazonEKSServicePolicy</li>\n<li>AmazonEKS_CNI_Policy</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1221px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/720553d36e2f244fc644803ede97993c/4fe08/add-iam-user-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.45833333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/720553d36e2f244fc644803ede97993c/4fe08/add-iam-user-2.jpg\"\n        srcset=\"/static/720553d36e2f244fc644803ede97993c/a3e66/add-iam-user-2.jpg 480w,\n/static/720553d36e2f244fc644803ede97993c/fb816/add-iam-user-2.jpg 960w,\n/static/720553d36e2f244fc644803ede97993c/4fe08/add-iam-user-2.jpg 1221w\"\n        sizes=\"(max-width: 1221px) 100vw, 1221px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"부가-정보-설정\" style=\"position:relative;\">부가 정보 설정<a href=\"#%EB%B6%80%EA%B0%80-%EC%A0%95%EB%B3%B4-%EC%84%A4%EC%A0%95\" aria-label=\"부가 정보 설정 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>IAM 태그에 이메일, 직책 등 사용자에 대한 부가 정보를 설정합니다. 추후 태그를 사용하여 사용자에 대한 액세스를 구성할 수 있습니다. 설정하지 않아도 무방합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1221px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/86525fb6b4bc547559430f785ba2937f/4fe08/add-iam-user-3.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.416666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/86525fb6b4bc547559430f785ba2937f/4fe08/add-iam-user-3.jpg\"\n        srcset=\"/static/86525fb6b4bc547559430f785ba2937f/a3e66/add-iam-user-3.jpg 480w,\n/static/86525fb6b4bc547559430f785ba2937f/fb816/add-iam-user-3.jpg 960w,\n/static/86525fb6b4bc547559430f785ba2937f/4fe08/add-iam-user-3.jpg 1221w\"\n        sizes=\"(max-width: 1221px) 100vw, 1221px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"자격-증명-저장\" style=\"position:relative;\">자격 증명 저장<a href=\"#%EC%9E%90%EA%B2%A9-%EC%A6%9D%EB%AA%85-%EC%A0%80%EC%9E%A5\" aria-label=\"자격 증명 저장 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>사용자 추가를 완료하면 credentials 정보가 나옵니다. 해당 정보는 한 번 확인하면 새로 고침 시 재확인이 불가하기 때문에 꼭 파일로 저장해 두어야 합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1221px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f6c9cdcc94c601d3600113a864309ea5/4fe08/add-iam-user-4.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.416666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/f6c9cdcc94c601d3600113a864309ea5/4fe08/add-iam-user-4.jpg\"\n        srcset=\"/static/f6c9cdcc94c601d3600113a864309ea5/a3e66/add-iam-user-4.jpg 480w,\n/static/f6c9cdcc94c601d3600113a864309ea5/fb816/add-iam-user-4.jpg 960w,\n/static/f6c9cdcc94c601d3600113a864309ea5/4fe08/add-iam-user-4.jpg 1221w\"\n        sizes=\"(max-width: 1221px) 100vw, 1221px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"사용자-설정\" style=\"position:relative;\">사용자 설정<a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%84%A4%EC%A0%95\" aria-label=\"사용자 설정 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>다음 명령어를 입력합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>aws configure</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>여러 사용자로 관리가 필요한 경우 <code>--profile</code> 옵션으로 사용자 프로필을 설정합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>aws configure --profile <span class=\"token operator\">&lt;</span>your-iam-user-name<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>사용자 정보 입력 후 엔터를 계속 입력하여 설정을 완료합니다. 해당 설정은 <code>~/.aws/</code> 폴더에 파일로 저장됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>AWS Access Key ID <span class=\"token punctuation\">[</span>None<span class=\"token punctuation\">]</span>: <span class=\"token operator\">&lt;</span>AKI***<span class=\"token operator\">></span>\nAWS Secret Access Key <span class=\"token punctuation\">[</span>None<span class=\"token punctuation\">]</span>: <span class=\"token operator\">&lt;</span>***<span class=\"token operator\">></span>\nDefault region name <span class=\"token punctuation\">[</span>None<span class=\"token punctuation\">]</span>: ap-northeast-2\nDefault output <span class=\"token function\">format</span> <span class=\"token punctuation\">[</span>None<span class=\"token punctuation\">]</span>:</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>설정을 확인합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>aws configure list</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/eecb88f81575c581f70c0ce71c60f8d4/396d0/aws-configure.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.458333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/eecb88f81575c581f70c0ce71c60f8d4/396d0/aws-configure.jpg\"\n        srcset=\"/static/eecb88f81575c581f70c0ce71c60f8d4/a3e66/aws-configure.jpg 480w,\n/static/eecb88f81575c581f70c0ce71c60f8d4/396d0/aws-configure.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>다음 명령어를 입력하면 사용자 프로필을 변경할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">AWS_DEFAULT_PROFILE</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-iam-user-name<span class=\"token operator\">></span>\naws configure list</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0a5e72227dc6247f8ac949675762a402/396d0/aws-configure-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.333333333333332%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/0a5e72227dc6247f8ac949675762a402/396d0/aws-configure-2.jpg\"\n        srcset=\"/static/0a5e72227dc6247f8ac949675762a402/a3e66/aws-configure-2.jpg 480w,\n/static/0a5e72227dc6247f8ac949675762a402/396d0/aws-configure-2.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>","frontmatter":{"category":"aws","index":2,"title":"IAM","description":"AWS 작업을 하려면 해당 리소스에 대한 권한이 있어야 합니다. AWS는 IAM 서비스를 통해 리소스 접근에 대한 권한을 안전하게 제어합니다.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/aws/cover.jpg?raw=true","date":"2020-05-18","draft":null}},{"id":"b8b0e0ea-840b-567e-ad21-5eabde40eec2","fields":{"slug":"/post/aws/awscli/"},"html":"<p><strong>AWS 커맨드 라인 인터페이스</strong>(AWS CLI, AWS Command Line Interface)는 AWS 서비스를 관리하는 통합 도구로 여러 AWS 서비스를 명령줄에서 제어합니다. 주로 자동화 처리 목적으로 사용합니다.</p>\n<h2 id=\"Install\" style=\"position:relative;\">Install<a href=\"#Install\" aria-label=\"Install permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><code>brew</code> 명령어로 설치하는 것을 권장합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>brew <span class=\"token function\">install</span> awscli // AWS CLI\nbrew <span class=\"token function\">install</span> jq     // JSON processor</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h2 id=\"Configure\" style=\"position:relative;\">Configure<a href=\"#Configure\" aria-label=\"Configure permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>AWS 서비스를 사용하기 위하여 <a href=\"https://console.aws.amazon.com/iam/home\">IAM</a>에 사용자 정보를 등록합니다. (개별 IAM 사용자 생성 - 사용자 관리 - 사용자 추가) 등록을 완료하면 credentials 정보가 나옵니다. 해당 정보는 한 번 확인하면 새로 고침 시 재확인이 불가하기 때문에 꼭 파일로 저장해 두어야 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>aws configure</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>AWS Access Key ID <span class=\"token punctuation\">[</span>None<span class=\"token punctuation\">]</span>: AKI***\nAWS Secret Access Key <span class=\"token punctuation\">[</span>None<span class=\"token punctuation\">]</span>: ***\nDefault region name <span class=\"token punctuation\">[</span>None<span class=\"token punctuation\">]</span>: ap-northeast-2\nDefault output <span class=\"token function\">format</span> <span class=\"token punctuation\">[</span>None<span class=\"token punctuation\">]</span>:</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>사용자 정보 입력 후 엔터를 계속 입력하여 설정을 완료합니다. 해당 설정은 <code>~/.aws/</code> 폴더에 파일로 저장됩니다.</p>\n<h2 id=\"Commands\" style=\"position:relative;\">Commands<a href=\"#Commands\" aria-label=\"Commands permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><a href=\"https://docs.aws.amazon.com/cli/latest/reference/\">Reference</a> 참조</p>\n<h3 id=\"ec2\" style=\"position:relative;\">ec2<a href=\"#ec2\" aria-label=\"ec2 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>aws ec2 describe-instances</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2 id=\"Scripts\" style=\"position:relative;\">Scripts<a href=\"#Scripts\" aria-label=\"Scripts permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<h3 id=\"Security-Group\" style=\"position:relative;\">Security Group<a href=\"#Security-Group\" aria-label=\"Security Group permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>필자가 작업하는 사무실은 유동 IP를 사용하여 매일 새 IP를 할당합니다. 새 IP를 할당하면 이전 IP로 서버 접속이 불가하여 AWS에서 보안 그룹의 사무실 IP 정보를 수정해야 합니다.</p>\n<p>서버에 문제가 발생하였는데 그 사이에 IP가 바뀌면서 서버 접속이 불가하면 굉장히 난감한 상황이 됩니다. AWS에 접속하여 보안 그룹을 수정해야 하는데 복잡하기로 유명한 AWS 인터페이스 안에서 버벅이다가 작업이 늦춰질 수 있습니다.</p>\n<p>다음 스크립트를 실행하면 설명과 일치하는 이전 IP 목록을 삭제한 후 새 IP를 추가할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token assign-left variable\">MY_IP</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> -s https://checkip.amazonaws.com<span class=\"token variable\">)</span></span>\n\n<span class=\"token function-name function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"describe-security-groups <span class=\"token variable\">$1</span>\"</span>\n    <span class=\"token assign-left variable\">REMOTE_IP_LIST</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span>aws ec2 describe-security-groups --group-id $1 <span class=\"token operator\">|</span> jq <span class=\"token string\">'.SecurityGroups[0].IpPermissions['</span>$2<span class=\"token string\">'].IpRanges[] | select(.Description == \"DUNAMU Office\") | .CidrIp'</span> -r<span class=\"token variable\">)</span></span>\n\n    <span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">REMOTE_IP</span> <span class=\"token keyword\">in</span> <span class=\"token variable\">$REMOTE_IP_LIST</span>\n    <span class=\"token keyword\">do</span>\n        <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"revoke-security-group-ingress <span class=\"token variable\">$REMOTE_IP</span>\"</span>\n        aws ec2 revoke-security-group-ingress --group-id <span class=\"token variable\">$1</span> --protocol tcp --port <span class=\"token number\">0</span>-65535 --cidr <span class=\"token variable\">$REMOTE_IP</span>\n    <span class=\"token keyword\">done</span>\n\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"authorize-security-group-ingress <span class=\"token variable\">$MY_IP</span>\"</span>\n    aws ec2 authorize-security-group-ingress --group-id <span class=\"token variable\">$1</span> --ip-permissions <span class=\"token assign-left variable\">IpProtocol</span><span class=\"token operator\">=</span>tcp,FromPort<span class=\"token operator\">=</span><span class=\"token number\">0</span>,ToPort<span class=\"token operator\">=</span><span class=\"token number\">65535</span>,IpRanges<span class=\"token operator\">=</span><span class=\"token string\">'[{CidrIp='</span><span class=\"token variable\">$MY_IP</span><span class=\"token string\">'/32,Description=\"DUNAMU Office\"}]'</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token entity\" title=\"\\n\">\\n</span>\"</span>\n<span class=\"token punctuation\">}</span>\n\nrun sg-***************** <span class=\"token number\">1</span>\nrun sg-***************** <span class=\"token number\">1</span>\nrun sg-***************** <span class=\"token number\">0</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","frontmatter":{"category":"aws","index":1,"title":"AWS 커맨드 라인 인터페이스","description":"보안 그룹 하나만 수정하면 되는데 AWS 웹 인터페이스 안에서 시간을 낭비한 경험이 있으신가요? 이제 터미널에서 AWS 웹과 동일한 기능을 구현하는 명령을 실행하세요.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/aws/cover.jpg?raw=true","date":"2020-05-17","draft":null}},{"id":"753474ee-204c-51b1-9c40-d1c1b4dfdfe4","fields":{"slug":"/post/jekyll/theme/"},"html":"<h2 id=\"목차\" style=\"position:relative;\">목차<a href=\"#%EB%AA%A9%EC%B0%A8\" aria-label=\"목차 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<ol>\n<li><a href=\"#%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\">시작하기</a></li>\n<li><a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%8B%A4%ED%96%89\">프로젝트 실행</a></li>\n<li><a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EA%B5%AC%EC%A1%B0\">프로젝트 구조</a></li>\n<li><a href=\"#%ED%85%8C%EB%A7%88-%EC%84%A4%EC%A0%95\">테마 설정</a></li>\n<li><a href=\"#%EC%96%B8%EB%8D%94%EC%8A%A4%EC%BD%94%EC%96%B4-%ED%8F%B4%EB%8D%94\">언더스코어 폴더</a></li>\n</ol>\n<h2 id=\"시작하기\" style=\"position:relative;\">시작하기<a href=\"#%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\" aria-label=\"시작하기 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>Jekyll</strong>로 블로그를 만드는 것은 <em>- 설치가 잘 된다는 전체 하에 -</em> 간단한 작업입니다. Java 애플리케이션 개발을 빌리자면 흔히 <mark>설정으로 시작해서 설정으로 끝난다</mark>고 하지요. Jekyll도 <em>- Java만큼은 아니지만 -</em> 마찬가지입니다.</p>\n<h2 id=\"프로젝트-실행\" style=\"position:relative;\">프로젝트 실행<a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%8B%A4%ED%96%89\" aria-label=\"프로젝트 실행 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>jekyll serve</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 818px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c7cb0f0053ac5750ef5db558528cad1f/73be1/serve-problem.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.791666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/c7cb0f0053ac5750ef5db558528cad1f/73be1/serve-problem.jpg\"\n        srcset=\"/static/c7cb0f0053ac5750ef5db558528cad1f/a3e66/serve-problem.jpg 480w,\n/static/c7cb0f0053ac5750ef5db558528cad1f/73be1/serve-problem.jpg 818w\"\n        sizes=\"(max-width: 818px) 100vw, 818px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>gem 버전이 다른 경우 위와 같은 오류가 발생할 수 있습니다. 번들이 적용된 환경을 로드하기 위하여 jekyll serve 명령어 앞에 <strong>bundle exec</strong> 명령어를 붙이고 실행하세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>bundle <span class=\"token builtin class-name\">exec</span> jekyll serve</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 818px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2c332d519aba9494b90618abe827b46e/73be1/resolve-serve-problem.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.791666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/2c332d519aba9494b90618abe827b46e/73be1/resolve-serve-problem.jpg\"\n        srcset=\"/static/2c332d519aba9494b90618abe827b46e/a3e66/resolve-serve-problem.jpg 480w,\n/static/2c332d519aba9494b90618abe827b46e/73be1/resolve-serve-problem.jpg 818w\"\n        sizes=\"(max-width: 818px) 100vw, 818px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>위에서 박스로 표시한 <strong><a href=\"http://127.0.0.1:4000\">http://127.0.0.1:4000</a></strong> 주소를 복사하여 브라우저로 접속하세요. 다음과 같이 테스트 페이지가 구동된 것을 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/76efc3ba8d049a14470558865c0559c3/aaf92/default-theme.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/76efc3ba8d049a14470558865c0559c3/aaf92/default-theme.jpg\"\n        srcset=\"/static/76efc3ba8d049a14470558865c0559c3/a3e66/default-theme.jpg 480w,\n/static/76efc3ba8d049a14470558865c0559c3/fb816/default-theme.jpg 960w,\n/static/76efc3ba8d049a14470558865c0559c3/aaf92/default-theme.jpg 1920w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"프로젝트-구조\" style=\"position:relative;\">프로젝트 구조<a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EA%B5%AC%EC%A1%B0\" aria-label=\"프로젝트 구조 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>이제 기본 테마의 폴더 구조를 살펴봅시다. 필자는 <a href=\"https://www.sublimetext.com/\">Sublime Text 3(서브라임 텍스트)</a>를 사용하도록 하겠습니다. 각자 사용 중인 편집기로 폴더를 로드하세요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/47a6ce27196b824a467ec878f8406044/a24e6/default-theme-structure.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/47a6ce27196b824a467ec878f8406044/a24e6/default-theme-structure.jpg\"\n        srcset=\"/static/47a6ce27196b824a467ec878f8406044/a3e66/default-theme-structure.jpg 480w,\n/static/47a6ce27196b824a467ec878f8406044/a24e6/default-theme-structure.jpg 800w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>폴더 구조가 굉장히 간단하지요? 물론 제대로 된 <a href=\"https://jekyllrb-ko.github.io/docs/structure/\">폴더 구조</a>는 따로 있습니다. 그렇다면 이 소스는 왜 폴더가 몇 개 없이도 구동이 되는 걸까요? 바로 외부 테마를 의존성으로 사용하기 때문인데요, <strong>Gemfile</strong> 파일을 살펴보세요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1058px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2029e9fd519c125021f7744f09c068f4/3a2a7/default-theme-gemfile.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.375%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/2029e9fd519c125021f7744f09c068f4/3a2a7/default-theme-gemfile.jpg\"\n        srcset=\"/static/2029e9fd519c125021f7744f09c068f4/a3e66/default-theme-gemfile.jpg 480w,\n/static/2029e9fd519c125021f7744f09c068f4/fb816/default-theme-gemfile.jpg 960w,\n/static/2029e9fd519c125021f7744f09c068f4/3a2a7/default-theme-gemfile.jpg 1058w\"\n        sizes=\"(max-width: 1058px) 100vw, 1058px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>minima</strong>는 기본 테마의 이름입니다. 위에 주석으로 ‘This is the default theme for new Jekyll sites. You may change this to anything you like. (지킬 사이트의 기본 테마입니다. 당신이 좋아하는 어떠한 테마로도 바꿀 수 있습니다.)’ 설명하고 있습니다.</p>\n<p><strong>Gem</strong>(젬)은 루비 프로젝트에 필요한 기능을 제공하는 라이브러리입니다. <a href=\"/jekyll/installation\">이전 글</a>을 보시면 Jekyll을 설치할 때 사용한 적이 있습니다. 하지만 상황에 따라 이렇게 Gemfile 안에 넣어 사용해도 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>gem <span class=\"token string\">\"minima\"</span>, <span class=\"token string\">\"~> 2.0\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>위 명령어에서 <strong>~></strong> 기호는 <strong>앞 자릿수는 같고 마지막 자릿수보다 크거나 같다</strong>는 의미를 가지고 있습니다. 간단하게 부등호로 표현하면 이해가 더 빠를 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">\"~> 2.0\"   : 2.0 &lt;= x &lt; 3.0     // 2.0 - 2.9\n\"~> 2.3.0\" : 2.3.0 &lt;= x &lt; 2.4.0 // 2.3.0 - 2.3.9</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h2 id=\"테마-설정\" style=\"position:relative;\">테마 설정<a href=\"#%ED%85%8C%EB%A7%88-%EC%84%A4%EC%A0%95\" aria-label=\"테마 설정 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>Jekyll 테마는 어디에서 얻을 수 있을까요? 바로 gem들의 집합소인 <a href=\"https://rubygems.org/\">RubyGems(루비젬)</a>에서 얻을 수 있습니다. RubyGems 사이트에 접속 후 ‘jekyll-theme’를 검색하세요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1359px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b7d076e2d0edd0c3c300420f1ff2ada7/f2d78/search-jekyll-theme-1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.208333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/b7d076e2d0edd0c3c300420f1ff2ada7/f2d78/search-jekyll-theme-1.jpg\"\n        srcset=\"/static/b7d076e2d0edd0c3c300420f1ff2ada7/a3e66/search-jekyll-theme-1.jpg 480w,\n/static/b7d076e2d0edd0c3c300420f1ff2ada7/fb816/search-jekyll-theme-1.jpg 960w,\n/static/b7d076e2d0edd0c3c300420f1ff2ada7/f2d78/search-jekyll-theme-1.jpg 1359w\"\n        sizes=\"(max-width: 1359px) 100vw, 1359px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 976px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/01fc3f57f945e2fcf82520f6248510dd/1446f/search-jekyll-theme-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.58333333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/01fc3f57f945e2fcf82520f6248510dd/1446f/search-jekyll-theme-2.jpg\"\n        srcset=\"/static/01fc3f57f945e2fcf82520f6248510dd/a3e66/search-jekyll-theme-2.jpg 480w,\n/static/01fc3f57f945e2fcf82520f6248510dd/fb816/search-jekyll-theme-2.jpg 960w,\n/static/01fc3f57f945e2fcf82520f6248510dd/1446f/search-jekyll-theme-2.jpg 976w\"\n        sizes=\"(max-width: 976px) 100vw, 976px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>현재 총 465개의 테마가 존재합니다. 썸네일이 없어서 아쉽긴 합니다만 RubyGems 사이트 자체가 모든 종류의 gem 라이브러리들을 다루기 때문에 <a href=\"http://jekyllthemes.org/\">Jekyll Themes(지킬 테마)</a>와 같이 구성할 수 없다는 점을 생각하면 이해가 됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7ebd8ac224bf5bee901a9a00524a49c2/aaf92/search-jekyll-theme-3.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.166666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/7ebd8ac224bf5bee901a9a00524a49c2/aaf92/search-jekyll-theme-3.jpg\"\n        srcset=\"/static/7ebd8ac224bf5bee901a9a00524a49c2/a3e66/search-jekyll-theme-3.jpg 480w,\n/static/7ebd8ac224bf5bee901a9a00524a49c2/fb816/search-jekyll-theme-3.jpg 960w,\n/static/7ebd8ac224bf5bee901a9a00524a49c2/aaf92/search-jekyll-theme-3.jpg 1920w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>테마를 하나 선택하고 상세 화면으로 진입하면 우측 하단에 Homepage 링크가 있습니다. 대부분 Git이나 GitLab으로 이동합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e93904a144579f15450927af924d8e03/aaf92/search-jekyll-theme-4.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.166666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/e93904a144579f15450927af924d8e03/aaf92/search-jekyll-theme-4.jpg\"\n        srcset=\"/static/e93904a144579f15450927af924d8e03/a3e66/search-jekyll-theme-4.jpg 480w,\n/static/e93904a144579f15450927af924d8e03/fb816/search-jekyll-theme-4.jpg 960w,\n/static/e93904a144579f15450927af924d8e03/aaf92/search-jekyll-theme-4.jpg 1920w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>소개글 또는 설명글에 있는 URL을 클릭하면 미리 보기 페이지로 이동합니다. (가끔 RubyGems 페이지로 이동하는 경우도 있습니다.)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3d92eb92cbf22f273cec35c74ecac6e0/aaf92/lens-theme-preview.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.166666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/3d92eb92cbf22f273cec35c74ecac6e0/aaf92/lens-theme-preview.jpg\"\n        srcset=\"/static/3d92eb92cbf22f273cec35c74ecac6e0/a3e66/lens-theme-preview.jpg 480w,\n/static/3d92eb92cbf22f273cec35c74ecac6e0/fb816/lens-theme-preview.jpg 960w,\n/static/3d92eb92cbf22f273cec35c74ecac6e0/aaf92/lens-theme-preview.jpg 1920w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>RubyGems 페이지로 돌아와서 GEMFILE 바로 밑의 ‘Copy to clipboard’ 버튼을 눌러 해당 명령어를 복사하세요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e543ae25b12ee5f5a1c58d8084222041/aaf92/apply-lens-theme-1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.166666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/e543ae25b12ee5f5a1c58d8084222041/aaf92/apply-lens-theme-1.jpg\"\n        srcset=\"/static/e543ae25b12ee5f5a1c58d8084222041/a3e66/apply-lens-theme-1.jpg 480w,\n/static/e543ae25b12ee5f5a1c58d8084222041/fb816/apply-lens-theme-1.jpg 960w,\n/static/e543ae25b12ee5f5a1c58d8084222041/aaf92/apply-lens-theme-1.jpg 1920w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>Gemfile</strong> 파일을 엽니다. 기존 minima 테마는 삭제 또는 주석 처리하고 바로 밑에 복사한 명령어를 붙여넣기하세요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 838px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d893c74d7b6730cd065fcc56e343ad45/1a7a8/apply-lens-theme-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.58333333333331%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/d893c74d7b6730cd065fcc56e343ad45/1a7a8/apply-lens-theme-2.jpg\"\n        srcset=\"/static/d893c74d7b6730cd065fcc56e343ad45/a3e66/apply-lens-theme-2.jpg 480w,\n/static/d893c74d7b6730cd065fcc56e343ad45/1a7a8/apply-lens-theme-2.jpg 838w\"\n        sizes=\"(max-width: 838px) 100vw, 838px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>_config.yml</strong> 파일을 열어서 박스로 표시한 부분을 새 테마명으로 변경하세요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 842px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9cc432eabe334921b11235b21d43d359/d8aaf/apply-lens-theme-3.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.58333333333331%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/9cc432eabe334921b11235b21d43d359/d8aaf/apply-lens-theme-3.jpg\"\n        srcset=\"/static/9cc432eabe334921b11235b21d43d359/a3e66/apply-lens-theme-3.jpg 480w,\n/static/9cc432eabe334921b11235b21d43d359/d8aaf/apply-lens-theme-3.jpg 842w\"\n        sizes=\"(max-width: 842px) 100vw, 842px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>테스트 페이지를 재구동하면 오류 메시지가 나옵니다. 해당 테마의 gem이 설치되지 않았기 때문인데요, <code>bundle install</code> 명령어를 실행해서 해당 테마의 gem을 설치하세요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 818px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a9f3dda97844035b17079f8ef9fa37ef/73be1/apply-lens-theme-4.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.99999999999999%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/a9f3dda97844035b17079f8ef9fa37ef/73be1/apply-lens-theme-4.jpg\"\n        srcset=\"/static/a9f3dda97844035b17079f8ef9fa37ef/a3e66/apply-lens-theme-4.jpg 480w,\n/static/a9f3dda97844035b17079f8ef9fa37ef/73be1/apply-lens-theme-4.jpg 818w\"\n        sizes=\"(max-width: 818px) 100vw, 818px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Lens 테마로 변경되었습니다. 어떠신가요? 입맛에 맞게 소스를 수정하는 건 어렵긴 하지만 포스팅만 하시는 분들 기준에서는 테마를 자유자재로 변경할 수 있어서 나름 큰 장점이라고 생각합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0861f8d6fb98c693a0c90e240433c639/aaf92/apply-lens-theme-5.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.166666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/0861f8d6fb98c693a0c90e240433c639/aaf92/apply-lens-theme-5.jpg\"\n        srcset=\"/static/0861f8d6fb98c693a0c90e240433c639/a3e66/apply-lens-theme-5.jpg 480w,\n/static/0861f8d6fb98c693a0c90e240433c639/fb816/apply-lens-theme-5.jpg 960w,\n/static/0861f8d6fb98c693a0c90e240433c639/aaf92/apply-lens-theme-5.jpg 1920w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"언더스코어-폴더\" style=\"position:relative;\">언더스코어 폴더<a href=\"#%EC%96%B8%EB%8D%94%EC%8A%A4%EC%BD%94%EC%96%B4-%ED%8F%B4%EB%8D%94\" aria-label=\"언더스코어 폴더 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>Jekyll 템플릿의 폴더들은 이름 앞에 _(언더스코어)가 붙습니다. 일종의 Jekyll 규칙인데요, 이 규약에 맞춰 소스를 구성하면 Jekyll 엔진이 _가 붙은 폴더 내 파일들을 컴파일하여 HTML로 이루어진 정적 웹 페이지 파일들을 만듭니다.</p>\n<ul>\n<li><strong>_posts</strong>: 블로그의 포스트를 담는 폴더</li>\n<li><strong>_site</strong>: Jekyll 엔진이 변환 작업을 마친 후 생성된 사이트를 저장하는 목적지 폴더. <strong>결과물</strong></li>\n</ul>\n<p>목적지 폴더(default: _site)는 빌드 시 자동으로 결과물을 저장하는 곳입니다. <mark>우리가 따로 작업할 필요는 없다</mark>는 점 명심하세요. 빌드가 어떻게 되었나 확인은 할 수 있어도 내용은 수정하지 마세요. 수정은 Jekyll 엔진이 컴파일하기 전 파일을 작업해야 합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 310px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cf2034a29af70b4b30e9049fd5970c76/60f7a/folder-rules.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 174.83870967741936%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/cf2034a29af70b4b30e9049fd5970c76/60f7a/folder-rules.jpg\"\n        srcset=\"/static/cf2034a29af70b4b30e9049fd5970c76/60f7a/folder-rules.jpg 310w\"\n        sizes=\"(max-width: 310px) 100vw, 310px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>","frontmatter":{"category":"jekyll","index":2,"title":"테마 적용하기","description":"Jekyll은 수많은 테마를 보유하고 있습니다. 여러분이 마음에 드는 테마를 골랐다면 설정하는 데 5분도 걸리지 않을 거예요.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/jekyll/cover.jpg?raw=true","date":"2018-02-04","draft":null}},{"id":"2bb61cf4-c21a-547b-900b-f64e94ad69c2","fields":{"slug":"/post/jekyll/installation/"},"html":"<h2 id=\"목차\" style=\"position:relative;\">목차<a href=\"#%EB%AA%A9%EC%B0%A8\" aria-label=\"목차 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<ol>\n<li><a href=\"#%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\">시작하기</a></li>\n<li><a href=\"#Ruby-Installer-for-Windows\">Ruby Installer for Windows</a></li>\n<li><a href=\"#Gem\">Gem</a></li>\n<li><a href=\"#Bundler\">Bundler</a></li>\n<li><a href=\"#Jekyll-%EC%82%AC%EC%9D%B4%ED%8A%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0\">Jekyll 사이트 만들기</a></li>\n</ol>\n<h2 id=\"시작하기\" style=\"position:relative;\">시작하기<a href=\"#%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\" aria-label=\"시작하기 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>Jekyll</strong>(지킬)은 정적 웹 페이지를 만들기 위한 툴입니다. 정적 웹 페이지는 DB 통신 없이 웹 서버 내 저장된 파일을 그대로 출력하는 페이지를 의미합니다. 많은 기능을 필요로 하지 않는 개인 블로그나 간단한 사이트의 경우 어려운 데이터베이스를 다루지 않고 Jekyll과 <a href=\"https://gist.github.com/ihoneymon/652be052a0727ad59601\">Markdown(마크다운)</a> 언어를 사용하여 간단하게 페이지를 만들 수 있습니다.</p>\n<p>Jekyll 템플릿을 만들고 규약에 따라 소스를 구성하면 Jekyll 엔진은 소스 파일들을 컴파일하여 HTML로 이루어진 정적 웹 페이지 파일들을 만들고 사용자가 정한 목적지 폴더(default: _site)에 저장합니다.</p>\n<div class=\"mermaid\" data-processed=\"true\"><svg id=\"mermaid-1642261900596\" width=\"659.875\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" height=\"55\" viewBox=\"0 0 659.875 55\"><style>#mermaid-1642261900596 {font-family:\"SF Pro KR\",\"SF Pro Display\",\"SF Pro Icons\",-apple-system,sans-serif;font-size:16px;fill:#333;}#mermaid-1642261900596 .error-icon{fill:#552222;}#mermaid-1642261900596 .error-text{fill:#552222;stroke:#552222;}#mermaid-1642261900596 .edge-thickness-normal{stroke-width:2px;}#mermaid-1642261900596 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1642261900596 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1642261900596 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1642261900596 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1642261900596 .marker{fill:#333333;stroke:#333333;}#mermaid-1642261900596 .marker.cross{stroke:#333333;}#mermaid-1642261900596 svg{font-family:\"SF Pro KR\",\"SF Pro Display\",\"SF Pro Icons\",-apple-system,sans-serif;font-size:16px;}#mermaid-1642261900596 .label{font-family:\"SF Pro KR\",\"SF Pro Display\",\"SF Pro Icons\",-apple-system,sans-serif;color:#333;}#mermaid-1642261900596 .cluster-label text{fill:#333;}#mermaid-1642261900596 .cluster-label span{color:#333;}#mermaid-1642261900596 .label text,#mermaid-1642261900596 span{fill:#333;color:#333;}#mermaid-1642261900596 .node rect,#mermaid-1642261900596 .node circle,#mermaid-1642261900596 .node ellipse,#mermaid-1642261900596 .node polygon,#mermaid-1642261900596 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1642261900596 .node .label{text-align:center;}#mermaid-1642261900596 .node.clickable{cursor:pointer;}#mermaid-1642261900596 .arrowheadPath{fill:#333333;}#mermaid-1642261900596 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-1642261900596 .flowchart-link{stroke:#333333;fill:none;}#mermaid-1642261900596 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-1642261900596 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-1642261900596 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-1642261900596 .cluster text{fill:#333;}#mermaid-1642261900596 .cluster span{color:#333;}#mermaid-1642261900596 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:\"SF Pro KR\",\"SF Pro Display\",\"SF Pro Icons\",-apple-system,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1642261900596 :root{--mermaid-font-family:\"SF Pro KR\",\"SF Pro Display\",\"SF Pro Icons\",-apple-system,sans-serif;}</style><g><g class=\"output\"><g class=\"clusters\"></g><g class=\"edgePaths\"><g class=\"edgePath LS-A LE-B\" id=\"L-A-B\" style=\"opacity: 1;\"><path class=\"path\" d=\"M136.671875,27.5L148.26041666666666,27.5C159.84895833333334,27.5,183.02604166666666,27.5,206.203125,27.5C229.38020833333334,27.5,252.55729166666666,27.5,264.1458333333333,27.5L275.734375,27.5\" marker-end=\"url(#arrowhead14)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead14\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-B LE-C\" id=\"L-B-C\" style=\"opacity: 1;\"><path class=\"path\" d=\"M388.46875,27.5L401.2096354166667,27.5C413.9505208333333,27.5,439.4322916666667,27.5,464.9140625,27.5C490.3958333333333,27.5,515.8776041666666,27.5,528.6184895833334,27.5L541.359375,27.5\" marker-end=\"url(#arrowhead15)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead15\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g></g><g class=\"edgeLabels\"><g class=\"edgeLabel\" transform=\"translate(206.203125,27.5)\" style=\"opacity: 1;\"><g transform=\"translate(-29.53125,-10)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"59.0625\" height=\"20\"></rect><foreignObject width=\"59.0625\" height=\"20\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-A-B\" class=\"edgeLabel L-LS-A' L-LE-B\">소스 구성</span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(464.9140625,27.5)\" style=\"opacity: 1;\"><g transform=\"translate(-36.4453125,-10)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"72.890625\" height=\"20\"></rect><foreignObject width=\"72.890625\" height=\"20\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-B-C\" class=\"edgeLabel L-LS-B' L-LE-C\">소스 컴파일</span></div></foreignObject></g></g></g><g class=\"nodes\"><g class=\"node common\" id=\"flowchart-A-4\" transform=\"translate(72.3359375,27.5)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-64.3359375\" y=\"-19.5\" width=\"128.671875\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-54.3359375,-9.5)\"><foreignObject width=\"108.671875\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Jekyll Template</div></foreignObject></g></g></g><g class=\"node common\" id=\"flowchart-B-5\" transform=\"translate(332.1015625,27.5)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-56.3671875\" y=\"-19.5\" width=\"112.734375\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-46.3671875,-9.5)\"><foreignObject width=\"92.734375\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">Jekyll Engine</div></foreignObject></g></g></g><g class=\"node highlight\" id=\"flowchart-C-7\" transform=\"translate(596.6171875,27.5)\" style=\"opacity: 1;\"><rect rx=\"0\" ry=\"0\" x=\"-55.2578125\" y=\"-19.5\" width=\"110.515625\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-45.2578125,-9.5)\"><foreignObject width=\"90.515625\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">HTML Pages</div></foreignObject></g></g></g></g></g></g></svg></div>\n<p><strong>왜 Jekyll을 사용하는 걸까요?</strong> HTML을 어느 정도 다룰 줄 안다면 <em>- CSS와 jQuery를 안다면 더 예쁘게 -</em> 지금 바로 정적인 웹 사이트를 만들 수 있습니다. 그리고 여러분이 어떤 페이지 하나를 소개 목적으로 만들고자 한다면 사실 Jekyll은 사용할 필요도 없습니다.</p>\n<p>하지만 여러분이 <strong>블로그</strong>를 만든다면 상황이 달라집니다. 블로그의 콘텐츠를 구성하는 페이지는 모두 동일한 HTML 템플릿에 내용만 다른 것입니다. 블로그에 콘텐츠를 추가할 때마다 매번 HTML 파일을 수작업해야 한다고 가정해 봅시다. 만약 콘텐츠가 100개 <em>- 또는 그 이상 -</em> 정도 된다면 여러분은 어떻게 하시겠습니까?</p>\n<p>내용만 쓰고 <strong>알아서 HTML 태그로 변환하여 페이지를 구성하는 툴</strong>이 있으면 좋겠다는 생각이 자연적으로 들 것입니다. <strong>Jekyll</strong>은 바로 그 툴을 의미합니다. 그리고 HTML 태그 없이 쉽게 내용을 작성할 수 있는 마크업 언어 Markdown을 사용합니다.</p>\n<p>이것이 Jekyll을 사용하는 가장 큰 이유입니다. Jekyll은 일련의 반복적인 작업을 최소화하여 페이지를 구성하고 웹 서버에 게시할 수 있도록 도와 줍니다. Jekyll을 설치하고 샘플 페이지를 만들어 본다면 더 이해가 빠를 것입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 941px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/66a88b2b0f4bf9c1703ee837fc604a54/238fe/running-jekyll-on-windows.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 94.375%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/66a88b2b0f4bf9c1703ee837fc604a54/238fe/running-jekyll-on-windows.jpg\"\n        srcset=\"/static/66a88b2b0f4bf9c1703ee837fc604a54/a3e66/running-jekyll-on-windows.jpg 480w,\n/static/66a88b2b0f4bf9c1703ee837fc604a54/238fe/running-jekyll-on-windows.jpg 941w\"\n        sizes=\"(max-width: 941px) 100vw, 941px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Jekyll로 페이지를 만드는 것은 간단하지만 설치하는 것은 <em>- 특히 Windows에서 -</em> 간단하지 않을 수 있습니다. Jekyll은 리눅스 지원 언어인 <a href=\"https://www.ruby-lang.org/ko/\">Ruby(루비)</a>를 기반으로 만들었기 때문에 MAC이 아닌 Windows 환경에서는 주의를 기울여야 합니다.</p>\n<h2 id=\"Ruby-Installer-for-Windows\" style=\"position:relative;\"><a href=\"https://rubyinstaller.org/downloads/\">Ruby Installer for Windows</a><a href=\"#Ruby-Installer-for-Windows\" aria-label=\"Ruby Installer for Windows permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1230px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b8042b9137ba744ac09ddc64867bcfbc/683da/ruby-installer-for-windows.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.25%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/b8042b9137ba744ac09ddc64867bcfbc/683da/ruby-installer-for-windows.jpg\"\n        srcset=\"/static/b8042b9137ba744ac09ddc64867bcfbc/a3e66/ruby-installer-for-windows.jpg 480w,\n/static/b8042b9137ba744ac09ddc64867bcfbc/fb816/ruby-installer-for-windows.jpg 960w,\n/static/b8042b9137ba744ac09ddc64867bcfbc/683da/ruby-installer-for-windows.jpg 1230w\"\n        sizes=\"(max-width: 1230px) 100vw, 1230px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>우측 빨간색 박스 안 내용에서 설치 시 Ruby 2.5.0 버전에 다소 문제가 있으니 <strong>2.4.X</strong> 버전을 추천하고 있습니다. 여러분의 Windows 환경을 확인한 후 맞는 버전(x32/x64)을 다운로드하여 설치합니다. (필자는 x64로 진행)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 503px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/629de531f3223eac3714f01053268204/5a5fa/install-ruby-1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.08333333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/629de531f3223eac3714f01053268204/5a5fa/install-ruby-1.jpg\"\n        srcset=\"/static/629de531f3223eac3714f01053268204/a3e66/install-ruby-1.jpg 480w,\n/static/629de531f3223eac3714f01053268204/5a5fa/install-ruby-1.jpg 503w\"\n        sizes=\"(max-width: 503px) 100vw, 503px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 503px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8ed3a1e5b597ab46ced25b1cf2390b26/5a5fa/install-ruby-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.08333333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/8ed3a1e5b597ab46ced25b1cf2390b26/5a5fa/install-ruby-2.jpg\"\n        srcset=\"/static/8ed3a1e5b597ab46ced25b1cf2390b26/a3e66/install-ruby-2.jpg 480w,\n/static/8ed3a1e5b597ab46ced25b1cf2390b26/5a5fa/install-ruby-2.jpg 503w\"\n        sizes=\"(max-width: 503px) 100vw, 503px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 503px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7430f6cc1f65cf2038310163902da619/5a5fa/install-ruby-3.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.08333333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/7430f6cc1f65cf2038310163902da619/5a5fa/install-ruby-3.jpg\"\n        srcset=\"/static/7430f6cc1f65cf2038310163902da619/a3e66/install-ruby-3.jpg 480w,\n/static/7430f6cc1f65cf2038310163902da619/5a5fa/install-ruby-3.jpg 503w\"\n        sizes=\"(max-width: 503px) 100vw, 503px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 597px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/14c84a7b59d43fd73a8d76314521d9ae/935fc/install-msys-1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.95833333333334%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1 - Enter - MSYS2 기본 설치\"\n        title=\"1 - Enter - MSYS2 기본 설치\"\n        src=\"/static/14c84a7b59d43fd73a8d76314521d9ae/935fc/install-msys-1.jpg\"\n        srcset=\"/static/14c84a7b59d43fd73a8d76314521d9ae/a3e66/install-msys-1.jpg 480w,\n/static/14c84a7b59d43fd73a8d76314521d9ae/935fc/install-msys-1.jpg 597w\"\n        sizes=\"(max-width: 597px) 100vw, 597px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>1 - Enter - MSYS2 기본 설치</p></figcaption>\n  </figure></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 516px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4d61b922bad96d3fb4b4edaec3d3e2a6/9bf5b/install-msys-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.08333333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/4d61b922bad96d3fb4b4edaec3d3e2a6/9bf5b/install-msys-2.jpg\"\n        srcset=\"/static/4d61b922bad96d3fb4b4edaec3d3e2a6/a3e66/install-msys-2.jpg 480w,\n/static/4d61b922bad96d3fb4b4edaec3d3e2a6/9bf5b/install-msys-2.jpg 516w\"\n        sizes=\"(max-width: 516px) 100vw, 516px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 516px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a3273264eba8ded4f3286eb1c223d4f5/9bf5b/install-msys-3.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.08333333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/a3273264eba8ded4f3286eb1c223d4f5/9bf5b/install-msys-3.jpg\"\n        srcset=\"/static/a3273264eba8ded4f3286eb1c223d4f5/a3e66/install-msys-3.jpg 480w,\n/static/a3273264eba8ded4f3286eb1c223d4f5/9bf5b/install-msys-3.jpg 516w\"\n        sizes=\"(max-width: 516px) 100vw, 516px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 516px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fed0ebc468a631ceb1ecfd4b6ed439c2/9bf5b/install-msys-4.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.08333333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/fed0ebc468a631ceb1ecfd4b6ed439c2/9bf5b/install-msys-4.jpg\"\n        srcset=\"/static/fed0ebc468a631ceb1ecfd4b6ed439c2/a3e66/install-msys-4.jpg 480w,\n/static/fed0ebc468a631ceb1ecfd4b6ed439c2/9bf5b/install-msys-4.jpg 516w\"\n        sizes=\"(max-width: 516px) 100vw, 516px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 675px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5456f01897f88a70f711a35989f6fa8e/a7480/install-msys-5.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.083333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"MSYS2 창 확인 후 닫기\"\n        title=\"MSYS2 창 확인 후 닫기\"\n        src=\"/static/5456f01897f88a70f711a35989f6fa8e/a7480/install-msys-5.jpg\"\n        srcset=\"/static/5456f01897f88a70f711a35989f6fa8e/a3e66/install-msys-5.jpg 480w,\n/static/5456f01897f88a70f711a35989f6fa8e/a7480/install-msys-5.jpg 675w\"\n        sizes=\"(max-width: 675px) 100vw, 675px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>MSYS2 창 확인 후 닫기</p></figcaption>\n  </figure></p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 597px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cefddbf9b2ea5d68f67476b121cb5be4/935fc/install-msys-6.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.95833333333334%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2 - Enter - 꾸러미 업데이트\"\n        title=\"2 - Enter - 꾸러미 업데이트\"\n        src=\"/static/cefddbf9b2ea5d68f67476b121cb5be4/935fc/install-msys-6.jpg\"\n        srcset=\"/static/cefddbf9b2ea5d68f67476b121cb5be4/a3e66/install-msys-6.jpg 480w,\n/static/cefddbf9b2ea5d68f67476b121cb5be4/935fc/install-msys-6.jpg 597w\"\n        sizes=\"(max-width: 597px) 100vw, 597px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>2 - Enter - 꾸러미 업데이트</p></figcaption>\n  </figure></p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 597px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b2c6ae6fb9a59b56902d58ad235ac1ce/935fc/install-msys-7.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.95833333333334%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"3 - Enter - toolchain 설치\"\n        title=\"3 - Enter - toolchain 설치\"\n        src=\"/static/b2c6ae6fb9a59b56902d58ad235ac1ce/935fc/install-msys-7.jpg\"\n        srcset=\"/static/b2c6ae6fb9a59b56902d58ad235ac1ce/a3e66/install-msys-7.jpg 480w,\n/static/b2c6ae6fb9a59b56902d58ad235ac1ce/935fc/install-msys-7.jpg 597w\"\n        sizes=\"(max-width: 597px) 100vw, 597px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>3 - Enter - toolchain 설치</p></figcaption>\n  </figure></p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 597px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6c2e93bdc7411bffc68ccdd31c570153/935fc/install-msys-8.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.95833333333334%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"오류가 발생한 경우 재설치\"\n        title=\"오류가 발생한 경우 재설치\"\n        src=\"/static/6c2e93bdc7411bffc68ccdd31c570153/935fc/install-msys-8.jpg\"\n        srcset=\"/static/6c2e93bdc7411bffc68ccdd31c570153/a3e66/install-msys-8.jpg 480w,\n/static/6c2e93bdc7411bffc68ccdd31c570153/935fc/install-msys-8.jpg 597w\"\n        sizes=\"(max-width: 597px) 100vw, 597px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>오류가 발생한 경우 재설치</p></figcaption>\n  </figure></p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 597px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c2bea85d56b0ff9bef6da66634094df0/935fc/install-msys-9.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.95833333333334%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"정상적으로 설치 완료 후 닫기\"\n        title=\"정상적으로 설치 완료 후 닫기\"\n        src=\"/static/c2bea85d56b0ff9bef6da66634094df0/935fc/install-msys-9.jpg\"\n        srcset=\"/static/c2bea85d56b0ff9bef6da66634094df0/a3e66/install-msys-9.jpg 480w,\n/static/c2bea85d56b0ff9bef6da66634094df0/935fc/install-msys-9.jpg 597w\"\n        sizes=\"(max-width: 597px) 100vw, 597px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>정상적으로 설치 완료 후 닫기</p></figcaption>\n  </figure></p>\n<h2 id=\"Gem\" style=\"position:relative;\">Gem<a href=\"#Gem\" aria-label=\"Gem permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>Gem</strong>(젬)은 루비 프로젝트에 필요한 기능을 제공하는 라이브러리입니다. <a href=\"https://rubygems.org/\">RubyGems(루비젬)</a>에서 원하는 gem을 검색하고 사용할 수 있습니다. 다음 명령어를 실행하세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>gem</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>다음과 같은 내용이 나온다면 Ruby가 성공적으로 설치된 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\">RubyGems is a sophisticated package manager <span class=\"token keyword\">for</span> Ruby.  This is a\nbasic <span class=\"token builtin class-name\">help</span> message containing pointers to <span class=\"token function\">more</span> information.\n\n    Usage:\n        gem -h/--help\n        gem -v/--version\n        gem <span class=\"token builtin class-name\">command</span> <span class=\"token punctuation\">[</span>arguments<span class=\"token punctuation\">..</span>.<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>options<span class=\"token punctuation\">..</span>.<span class=\"token punctuation\">]</span>\n\n    Examples:\n        gem <span class=\"token function\">install</span> rake\n        gem list --local\n        gem build package.gemspec\n        gem <span class=\"token builtin class-name\">help</span> <span class=\"token function\">install</span>\n\n    Further help:\n        gem <span class=\"token builtin class-name\">help</span> commands            list all <span class=\"token string\">'gem'</span> commands\n        gem <span class=\"token builtin class-name\">help</span> examples            show some examples of usage\n        gem <span class=\"token builtin class-name\">help</span> gem_dependencies    gem dependencies <span class=\"token function\">file</span> guide\n        gem <span class=\"token builtin class-name\">help</span> platforms           gem platforms guide\n        gem <span class=\"token builtin class-name\">help</span> <span class=\"token operator\">&lt;</span>COMMAND<span class=\"token operator\">></span>           show <span class=\"token builtin class-name\">help</span> on COMMAND\n                                                                     <span class=\"token punctuation\">(</span>e.g. <span class=\"token string\">'gem help install'</span><span class=\"token punctuation\">)</span>\n        gem server                   present a web page at\n                                                                 http://localhost:8808/\n                                                                 with info about installed gems\n    Further information:\n        http://guides.rubygems.org</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>gem 명령어를 사용하여 Jekyll을 설치하세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>gem <span class=\"token function\">install</span> jekyll</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 853px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d7afd14ba0e4ed9bd2f408752ea0a031/0eb87/install-jekyll.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.333333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/d7afd14ba0e4ed9bd2f408752ea0a031/0eb87/install-jekyll.jpg\"\n        srcset=\"/static/d7afd14ba0e4ed9bd2f408752ea0a031/a3e66/install-jekyll.jpg 480w,\n/static/d7afd14ba0e4ed9bd2f408752ea0a031/0eb87/install-jekyll.jpg 853w\"\n        sizes=\"(max-width: 853px) 100vw, 853px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Jekyll 설치를 마치면 다음 명령어를 실행하세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>jekyll</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>다음과 같은 내용이 나온다면 Jekyll이 성공적으로 설치된 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\">jekyll <span class=\"token number\">3.7</span>.2 -- Jekyll is a blog-aware, static site generator <span class=\"token keyword\">in</span> Ruby\n\nUsage:\n\n    jekyll <span class=\"token operator\">&lt;</span>subcommand<span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>options<span class=\"token punctuation\">]</span>\n\nOptions:\n                -s, --source <span class=\"token punctuation\">[</span>DIR<span class=\"token punctuation\">]</span>  Source directory <span class=\"token punctuation\">(</span>defaults to ./<span class=\"token punctuation\">)</span>\n                -d, --destination <span class=\"token punctuation\">[</span>DIR<span class=\"token punctuation\">]</span>  Destination directory <span class=\"token punctuation\">(</span>defaults to ./_site<span class=\"token punctuation\">)</span>\n                        --safe         Safe mode <span class=\"token punctuation\">(</span>defaults to <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n                -p, --plugins PLUGINS_DIR1<span class=\"token punctuation\">[</span>,PLUGINS_DIR2<span class=\"token punctuation\">[</span>,<span class=\"token punctuation\">..</span>.<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>  Plugins directory <span class=\"token punctuation\">(</span>defaults to ./_plugins<span class=\"token punctuation\">)</span>\n                        --layouts DIR  Layouts directory <span class=\"token punctuation\">(</span>defaults to ./_layouts<span class=\"token punctuation\">)</span>\n                        --profile      Generate a Liquid rendering profile\n                -h, --help         Show this message\n                -v, --version      Print the name and version\n                -t, --trace        Show the full backtrace when an error occurs\n\nSubcommands:\n    docs\n    <span class=\"token function\">import</span>\n    build, b              Build your site\n    clean                 Clean the site <span class=\"token punctuation\">(</span>removes site output and metadata <span class=\"token function\">file</span><span class=\"token punctuation\">)</span> without building.\n    doctor, hyde          Search site and print specific deprecation warnings\n    <span class=\"token builtin class-name\">help</span>                  Show the <span class=\"token builtin class-name\">help</span> message, optionally <span class=\"token keyword\">for</span> a given subcommand.\n    new                   Creates a new Jekyll site scaffold <span class=\"token keyword\">in</span> <span class=\"token environment constant\">PATH</span>\n    new-theme             Creates a new Jekyll theme scaffold\n    serve, server, s      Serve your site locally</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"Bundler\" style=\"position:relative;\">Bundler<a href=\"#Bundler\" aria-label=\"Bundler permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><a href=\"http://ruby-korea.github.io/bundler-site/\">Bundler(번들러)</a>는 정확한 gem 버전을 추적하고 설치하여 루비 프로젝트를 위한 일관된 환경을 제공합니다. 다음 명령어를 실행하세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>gem <span class=\"token function\">install</span> bundler</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 853px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4aa7b9eef61040e495bde2b1f2b26391/0eb87/install-bundler.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.750000000000004%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/4aa7b9eef61040e495bde2b1f2b26391/0eb87/install-bundler.jpg\"\n        srcset=\"/static/4aa7b9eef61040e495bde2b1f2b26391/a3e66/install-bundler.jpg 480w,\n/static/4aa7b9eef61040e495bde2b1f2b26391/0eb87/install-bundler.jpg 853w\"\n        sizes=\"(max-width: 853px) 100vw, 853px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"Jekyll-사이트-만들기\" style=\"position:relative;\">Jekyll 사이트 만들기<a href=\"#Jekyll-%EC%82%AC%EC%9D%B4%ED%8A%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"Jekyll 사이트 만들기 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>새 Jekyll 사이트를 생성해 봅시다. 다음 명령어를 실행하세요. (여러분은 test 대신 마음에 드는 이름으로 수정해도 무방합니다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>jekyll new <span class=\"token builtin class-name\">test</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 853px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/93162a6c85895ee156d64cddbbfadded/0eb87/create-new-jekyll-site.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 110.41666666666667%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/93162a6c85895ee156d64cddbbfadded/0eb87/create-new-jekyll-site.jpg\"\n        srcset=\"/static/93162a6c85895ee156d64cddbbfadded/a3e66/create-new-jekyll-site.jpg 480w,\n/static/93162a6c85895ee156d64cddbbfadded/0eb87/create-new-jekyll-site.jpg 853w\"\n        sizes=\"(max-width: 853px) 100vw, 853px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>필요한 bundle까지 모두 설치를 완료하였습니다. 이제 test 폴더로 이동합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span><span class=\"token builtin class-name\">cd</span> <span class=\"token builtin class-name\">test</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Jekyll은 개발 서버를 내장하고 있어 로컬에서 브라우저로 접속하여 사이트가 어떻게 생성될지 미리 살펴볼 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>jekyll serve</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 933px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5045cb924a9b1ab5c7c3b18ca3863f3a/e8114/serve-new-jekyll-site.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.45833333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/5045cb924a9b1ab5c7c3b18ca3863f3a/e8114/serve-new-jekyll-site.jpg\"\n        srcset=\"/static/5045cb924a9b1ab5c7c3b18ca3863f3a/a3e66/serve-new-jekyll-site.jpg 480w,\n/static/5045cb924a9b1ab5c7c3b18ca3863f3a/e8114/serve-new-jekyll-site.jpg 933w\"\n        sizes=\"(max-width: 933px) 100vw, 933px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>브라우저에서 <strong><a href=\"http://127.0.0.1:4000\">http://127.0.0.1:4000</a></strong> 접속 후 위와 같은 화면이 보인다면 샘플 블로그가 잘 구동된 것입니다. 포트 번호는 기본 4000이 주어지며 옵션을 추가하여 다른 포트 번호로 변경할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>jekyll serve --port <span class=\"token number\">5000</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>gem 버전이 다른 경우 번들이 적용된 환경을 로드하기 위하여 다음 명령어가 필요할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>bundle <span class=\"token builtin class-name\">exec</span> jekyll serve\nbundle <span class=\"token builtin class-name\">exec</span> jekyll serve --baseurl <span class=\"token string\">''</span> // 소스가 최상위<span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span>에 있지 않은 경우</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>","frontmatter":{"category":"jekyll","index":1,"title":"Jekyll 블로그 만들기","description":"콘텐츠는 있는데 블로그가 없어서 고민이라면 지금 바로 도전하세요. Jekyll은 데이터베이스가 필요하지 않아요.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/jekyll/cover.jpg?raw=true","date":"2018-02-03","draft":null}}]}}}