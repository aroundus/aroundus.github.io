{"data":{"allMarkdownRemark":{"nodes":[{"id":"b5be6402-2c4b-50e9-8f1a-aa4edc6bb89d","fields":{"slug":"/kubernetes/build-eks-infrastructure/"},"html":"<blockquote>\n<p>아마존 웹 서비스에서 제공하는 Amazon EKS(Elastic Kubernetes Service)로 인프라를 구성한 내용을 정리한 글입니다. 내용이 방대하여 사전 설치가 필요한 명령어 및 프로그램에 대한 설명이 생략될 수 있습니다. 🙏</p>\n</blockquote>\n<h2 id=\"목차\" style=\"position:relative;\">목차<a href=\"#%EB%AA%A9%EC%B0%A8\" aria-label=\"목차 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<ol>\n<li><a href=\"#IAM-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%B6%94%EA%B0%80\">IAM 사용자 추가</a></li>\n<li><a href=\"#EKS-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%83%9D%EC%84%B1\">EKS 클러스터 생성</a></li>\n<li><a href=\"#%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%ED%81%B4%EB%9E%98%EC%8A%A4-%EB%B0%B0%ED%8F%AC\">스토리지 클래스 배포</a></li>\n<li><a href=\"#EBS-CSI-%EB%93%9C%EB%9D%BC%EC%9D%B4%EB%B2%84-%EB%B0%B0%ED%8F%AC\">EBS CSI 드라이버 배포</a></li>\n<li><a href=\"#ALB-%EC%88%98%EC%8B%A0-%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC-%EB%B0%B0%ED%8F%AC\">ALB 수신 컨트롤러 배포</a></li>\n<li><a href=\"#RDS-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%83%9D%EC%84%B1\">RDS 데이터베이스 생성</a></li>\n<li><a href=\"#%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4-%EC%83%9D%EC%84%B1\">네임스페이스 생성</a></li>\n<li><a href=\"#ExternalName-%EC%84%A4%EC%A0%95\">ExternalName 설정</a></li>\n<li><a href=\"#MariaDB-CLI-%EB%B0%B0%ED%8F%AC\">MariaDB CLI 배포</a></li>\n<li><a href=\"#MaxScale-%EB%B0%B0%ED%8F%AC\">MaxScale 배포</a></li>\n<li><a href=\"#Docker-%EC%9E%90%EA%B2%A9-%EC%A6%9D%EB%AA%85-%EA%B8%B0%EB%B0%98-Secret-%EB%B0%B0%ED%8F%AC\">Docker 자격 증명 기반 Secret 배포</a></li>\n</ol>\n<h2 id=\"IAM-사용자-추가\" style=\"position:relative;\">IAM 사용자 추가<a href=\"#IAM-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%B6%94%EA%B0%80\" aria-label=\"IAM 사용자 추가 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>AWS 서비스를 사용하기 위해 루트 사용자 이메일 주소로 <strong>IAM</strong>(Identity and Access Management, 아이에이앰)에 사용자를 추가해야 합니다. 자세한 정보는 <a href=\"/aws/iam\">IAM</a> 내용을 참조하세요.</p>\n<h2 id=\"Kubernetes-API\" style=\"position:relative;\">Kubernetes API<a href=\"#Kubernetes-API\" aria-label=\"Kubernetes API permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>쿠버네티스 오브젝트는 <strong>쿠버네티스 API</strong>를 요청해서 생성합니다. 쿠버네티스 오브젝트를 생성할 때 오브젝트에 대한 기본적인 정보와 더불어 의도한 상태를 기술한 오브젝트 <code>spec</code>이 필요합니다. 요청한 내용은 JSON 형식으로 정보를 포함하는데 대부분 <code>.yaml</code> 파일로 <code>kubectl</code>에 제공합니다. <code>kubectl</code>은 API 요청이 이루어질 때 JSON 형식으로 정보를 변환합니다.</p>\n<p><strong>deployment.yaml</strong> (예시)</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">-</span>deployment\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> nginx\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> nginx\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">:</span>1.14.2\n          <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>생성하고자 하는 쿠버네티스 오브젝트에 대한 <code>.yaml</code> 파일 내, 다음 필드를 위한 값들을 설정합니다.</p>\n<ul>\n<li>apiVersion: 해당 오브젝트 생성에 사용하는 쿠버네티스 API 버전 (안정성: stable > beta > alpha)</li>\n<li>kind: 오브젝트의 종류</li>\n<li>metadata: 유일한 오브젝트로 구분하기 위한 데이터</li>\n<li>spec: 오브젝트에 대한 상태</li>\n</ul>\n<p>오브젝트 <code>spec</code>에 대한 정확한 포맷은 모든 쿠버네티스 오브젝트마다 다르고, 그 오브젝트 특유의 중첩된 필드를 포함합니다. 다음 명령어를 입력하여 오브젝트를 생성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>$ kubectl apply -f deployment.yaml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>자세한 정보는 쿠버네티스 공식 문서의 <a href=\"https://kubernetes.io/ko/docs/concepts/overview/working-with-objects/kubernetes-objects/\">쿠버네티스 오브젝트 이해하기</a> 내용을 참조하세요.</p>\n<h2 id=\"EKS-클러스터-생성\" style=\"position:relative;\">EKS 클러스터 생성<a href=\"#EKS-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%83%9D%EC%84%B1\" aria-label=\"EKS 클러스터 생성 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>쿠버네티스를 시작하기 위해 가장 먼저 해야 할 일은 <strong>클러스터</strong>를 생성하는 것입니다. 쿠버네티스 클러스터는 컨테이너화된 애플리케이션을 실행하는 노드의 집합입니다.</p>\n<p><strong>cluster.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> eksctl.io/v1alpha5\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ClusterConfig\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> &lt;insert<span class=\"token punctuation\">-</span>your<span class=\"token punctuation\">-</span>cluster<span class=\"token punctuation\">-</span>name<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">region</span><span class=\"token punctuation\">:</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">2</span>\n<span class=\"token key atrule\">vpc</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">cidr</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"&lt;insert-your-cidr>\"</span>\n  <span class=\"token key atrule\">nat</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">gateway</span><span class=\"token punctuation\">:</span> HighlyAvailable\n<span class=\"token key atrule\">nodeGroups</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> &lt;insert<span class=\"token punctuation\">-</span>your<span class=\"token punctuation\">-</span>worker<span class=\"token punctuation\">-</span>name<span class=\"token punctuation\">></span>\n    <span class=\"token key atrule\">instanceType</span><span class=\"token punctuation\">:</span> m5.large\n    <span class=\"token key atrule\">availabilityZones</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span>2a\n      <span class=\"token punctuation\">-</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span>2b\n    <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">role</span><span class=\"token punctuation\">:</span> worker\n    <span class=\"token key atrule\">desiredCapacity</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n    <span class=\"token key atrule\">privateNetworking</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token key atrule\">iam</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">withAddonPolicies</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">ebs</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n        <span class=\"token key atrule\">efs</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n        <span class=\"token key atrule\">autoScaler</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>$ eksctl create cluster -f cluster.yaml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3f0badf15a1f9448d90ac8f242125d50/396d0/create-cluster.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.375%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/3f0badf15a1f9448d90ac8f242125d50/396d0/create-cluster.jpg\"\n        srcset=\"/static/3f0badf15a1f9448d90ac8f242125d50/a3e66/create-cluster.jpg 480w,\n/static/3f0badf15a1f9448d90ac8f242125d50/396d0/create-cluster.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>도커에서 쿠버네티스를 활성화하면 기본적으로 <code>current-context</code> 필드를 <code>docker-desktop</code> 클러스터로 지정합니다. <code>~/.kube/config</code> 파일에서 현재 생성한 클러스터로 변경이 잘 이루어졌는지 확인하세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>$ kubectl config get-contexts</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e3b1a42aa68e7d212229c492b52e79fd/5ab81/context-config.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 124.58333333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/e3b1a42aa68e7d212229c492b52e79fd/5ab81/context-config.jpg\"\n        srcset=\"/static/e3b1a42aa68e7d212229c492b52e79fd/a3e66/context-config.jpg 480w,\n/static/e3b1a42aa68e7d212229c492b52e79fd/5ab81/context-config.jpg 660w\"\n        sizes=\"(max-width: 660px) 100vw, 660px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"VPC\" style=\"position:relative;\">VPC<a href=\"#VPC\" aria-label=\"VPC permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>VPC</strong>(Virtual Private Cloud)는 사용자의 AWS 계정 전용 가상 네트워크입니다.</p>\n<p>VPC는 AWS 클라우드에서 다른 가상 네트워크와 논리적으로 분리되어 있습니다. Amazon EC2 인스턴스와 같은 AWS 리소스를 VPC에서 실행할 수 있습니다.</p>\n<p>VPC를 만들 때 VPC의 IPv4 주소의 범위는 <strong>CIDR</strong>(Classless Inter-Domain Routing, 사이더) 블록 형태로 지정해야 합니다. (예: 172.31.0.0/16) 자세한 정보는 <a href=\"https://m.blog.naver.com/ncloud24/221208338209\">CIDR 표기법</a> 내용을 참조하세요.</p>\n<h3 id=\"NAT-Gateway\" style=\"position:relative;\">NAT Gateway<a href=\"#NAT-Gateway\" aria-label=\"NAT Gateway permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>NAT</strong>(Network Address Translation, 네트워크 주소 변환) 게이트웨이는 프라이빗 서브넷의 인스턴스를 인터넷 또는 기타 AWS 서비스에 연결합니다. 프라이빗 서브넷을 사용하면 NAT 게이트웨이를 사용한다고 보시면 됩니다.</small></p>\n<h3 id=\"CloudFormation\" style=\"position:relative;\">CloudFormation<a href=\"#CloudFormation\" aria-label=\"CloudFormation permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>CloudFormation</strong>은 인프라 관리를 간소화하여 리소스 관리 시간을 줄이고 AWS에서 실행되는 애플리케이션에 더 많은 시간을 사용하도록 해 주는 서비스입니다. 템플릿을 사용하여 스택을 생성할 경우 Auto Scaling 그룹, 로드 밸런서 및 데이터베이스를 자동으로 프로비저닝합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a516015670db5758a6dd50a5750319ce/06dbb/create-cloudformation-stack-completed.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.125%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/a516015670db5758a6dd50a5750319ce/06dbb/create-cloudformation-stack-completed.jpg\"\n        srcset=\"/static/a516015670db5758a6dd50a5750319ce/a3e66/create-cloudformation-stack-completed.jpg 480w,\n/static/a516015670db5758a6dd50a5750319ce/fb816/create-cloudformation-stack-completed.jpg 960w,\n/static/a516015670db5758a6dd50a5750319ce/06dbb/create-cloudformation-stack-completed.jpg 1140w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>클러스터 생성을 성공적으로 완료하였습니다. 생성 도중에 문제가 발생한 경우에도 해당 서비스를 통해 확인할 수 있습니다.</p>\n<h2 id=\"스토리지-클래스-배포\" style=\"position:relative;\">스토리지 클래스 배포<a href=\"#%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%ED%81%B4%EB%9E%98%EC%8A%A4-%EB%B0%B0%ED%8F%AC\" aria-label=\"스토리지 클래스 배포 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>볼륨은 쿠버네티스의 디스크 서비스입니다. 쿠버네티스는 많은 유형의 볼륨을 지원하고, 파드는 여러 볼륨을 동시에 사용할 수 있습니다. 볼륨 유형에 대한 전체 목록은 쿠버네티스 공식 문서의 <a href=\"https://kubernetes.io/ko/docs/concepts/storage/volumes/#%EB%B3%BC%EB%A5%A8-%EC%9C%A0%ED%98%95%EB%93%A4\">볼륨 유형들</a> 내용을 참조하세요.</p>\n<p><strong>storage-classes.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> storage.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> StorageClass\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ebs<span class=\"token punctuation\">-</span>default\n<span class=\"token key atrule\">provisioner</span><span class=\"token punctuation\">:</span> ebs.csi.aws.com\n<span class=\"token key atrule\">volumeBindingMode</span><span class=\"token punctuation\">:</span> WaitForFirstConsumer\n<span class=\"token key atrule\">parameters</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> gp2\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> storage.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> StorageClass\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ebs<span class=\"token punctuation\">-</span>default<span class=\"token punctuation\">-</span>a\n<span class=\"token key atrule\">provisioner</span><span class=\"token punctuation\">:</span> ebs.csi.aws.com\n<span class=\"token key atrule\">volumeBindingMode</span><span class=\"token punctuation\">:</span> WaitForFirstConsumer\n<span class=\"token key atrule\">parameters</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> gp2\n<span class=\"token key atrule\">allowedTopologies</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">matchLabelExpressions</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> topology.ebs.csi.aws.com/zone\n        <span class=\"token key atrule\">values</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span>2a\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> storage.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> StorageClass\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ebs<span class=\"token punctuation\">-</span>default<span class=\"token punctuation\">-</span>encrypted\n<span class=\"token key atrule\">provisioner</span><span class=\"token punctuation\">:</span> ebs.csi.aws.com\n<span class=\"token key atrule\">volumeBindingMode</span><span class=\"token punctuation\">:</span> WaitForFirstConsumer\n<span class=\"token key atrule\">parameters</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> gp2\n  <span class=\"token key atrule\">encrypted</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span>\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> storage.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> StorageClass\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ebs<span class=\"token punctuation\">-</span>fast\n<span class=\"token key atrule\">provisioner</span><span class=\"token punctuation\">:</span> ebs.csi.aws.com\n<span class=\"token key atrule\">volumeBindingMode</span><span class=\"token punctuation\">:</span> WaitForFirstConsumer\n<span class=\"token key atrule\">parameters</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> io1\n  <span class=\"token key atrule\">iopsPerGB</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"10\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>볼륨 타입은 애플리케이션의 입출력 특성에 따라 선택합니다.</p>\n<ul>\n<li><code>gp2</code>: 범용 SSD 볼륨</li>\n<li><code>io1</code>: 프로비저닝된 IOPS* SSD 볼륨</li>\n</ul>\n<p><small>※ IOPS(Input/Output Operations Per Second, 아이옵스): 초당 입/출력 처리 횟수</small></p>\n<p><code>volumeBindingMode</code> 필드는 볼륨 바인딩과 동적 프로비저닝의 시작 시기를 제어합니다. <code>WaitForFirstConsumer</code> 모드로 지정하면 볼륨을 사용하는 파드가 생성될 때까지 볼륨의 바인딩과 프로비저닝을 지연시킵니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>$ kubectl apply -f storage-classes.yaml\n$ kubectl get storageclasses</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1c3d00e74e9620c2b01a713063b93312/396d0/apply-storageclasses.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.708333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/1c3d00e74e9620c2b01a713063b93312/396d0/apply-storageclasses.jpg\"\n        srcset=\"/static/1c3d00e74e9620c2b01a713063b93312/a3e66/apply-storageclasses.jpg 480w,\n/static/1c3d00e74e9620c2b01a713063b93312/396d0/apply-storageclasses.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>필자는 스토리지 클래스 8개를 생성하였습니다. 예제에는 내용이 길어서 4개만 작성하였습니다.</p>\n</blockquote>\n<p>스토리지 클래스 생성을 완료하였습니다. 클러스터 관리자는 앞으로 생성할 오브젝트에 <code>storageClassName</code> 필드가 있다면 해당 스토리지 클래스의 <code>name</code> 값을 입력해야 합니다. 쿠버네티스는 동적 볼륨 프로비저닝을 통해 On-Demand(온디맨드, 주문형 서비스) 방식으로 스토리지 볼륨을 생성합니다.</p>\n<blockquote>\n<p>온디맨드 방식은 볼륨을 원하는 옵션으로 상품화하여 등록한 후 앞으로 사용할 오브젝트에서 해당 볼륨을 선택해 주문하는 방식을 의미합니다.</p>\n</blockquote>\n<h2 id=\"EBS-CSI-드라이버-배포\" style=\"position:relative;\">EBS CSI 드라이버 배포<a href=\"#EBS-CSI-%EB%93%9C%EB%9D%BC%EC%9D%B4%EB%B2%84-%EB%B0%B0%ED%8F%AC\" aria-label=\"EBS CSI 드라이버 배포 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>EBS(Elastic Block Store, 고성능 블록 스토리지 서비스) <strong>CSI</strong>(Container Storage Interface)는 쿠버네티스를 위한 임의의 스토리지 시스템을 컨테이너 워크로드에 노출시키는 인터페이스입니다. EBS CSI 드라이버는 EKS 클러스터가 EBS 볼륨의 수명 주기를 관리할 수 있게 해 주는 CSI 인터페이스를 제공합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>$ kubectl apply -k <span class=\"token string\">\"github.com/kubernetes-sigs/aws-ebs-csi-driver/deploy/kubernetes/overlays/stable/?ref=master\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li><code>-k</code>: kustomization directory</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/65924c89293b7a813e095ba3ebe42e34/396d0/apply-aws-ebs-csi-driver.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.708333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/65924c89293b7a813e095ba3ebe42e34/396d0/apply-aws-ebs-csi-driver.jpg\"\n        srcset=\"/static/65924c89293b7a813e095ba3ebe42e34/a3e66/apply-aws-ebs-csi-driver.jpg 480w,\n/static/65924c89293b7a813e095ba3ebe42e34/396d0/apply-aws-ebs-csi-driver.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>EBS CSI 드라이버를 사용하기 위하여 노드 그룹에 정책을 연결해 봅시다. IAM - 정책 - 정책 생성 버튼 클릭 후 다음과 같이 정책을 하나 생성하세요. 이름은 마음대로 하셔도 됩니다. (필자는 <code>Amazon_EBS_CSI_Driver</code> 이름으로 생성)</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"Version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2012-10-17\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Statement\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"Effect\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Allow\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Action\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string\">\"ec2:AttachVolume\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:CreateSnapshot\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:CreateTags\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:CreateVolume\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:DeleteSnapshot\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:DeleteTags\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:DeleteVolume\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:DescribeInstances\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:DescribeSnapshots\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:DescribeTags\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:DescribeVolumes\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ec2:DetachVolume\"</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Resource\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"*\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/66b102998812991329202d3b481a0232/83ca0/add-iam-ebs-csi-policy.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 94.79166666666666%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/66b102998812991329202d3b481a0232/aaf92/add-iam-ebs-csi-policy.jpg\"\n        srcset=\"/static/66b102998812991329202d3b481a0232/a3e66/add-iam-ebs-csi-policy.jpg 480w,\n/static/66b102998812991329202d3b481a0232/fb816/add-iam-ebs-csi-policy.jpg 960w,\n/static/66b102998812991329202d3b481a0232/aaf92/add-iam-ebs-csi-policy.jpg 1920w,\n/static/66b102998812991329202d3b481a0232/83ca0/add-iam-ebs-csi-policy.jpg 2001w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>IAM - 역할 - <code>&#x3C;your-cluster-name></code> 항목을 검색하여 <code>NodeInstanceRole</code> 단어를 포함하는 역할에 정책을 연결하세요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cc93f051f414f39f66f80f85c6b165f5/83ca0/add-iam-ebs-csi-policy-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.79166666666667%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/cc93f051f414f39f66f80f85c6b165f5/aaf92/add-iam-ebs-csi-policy-2.jpg\"\n        srcset=\"/static/cc93f051f414f39f66f80f85c6b165f5/a3e66/add-iam-ebs-csi-policy-2.jpg 480w,\n/static/cc93f051f414f39f66f80f85c6b165f5/fb816/add-iam-ebs-csi-policy-2.jpg 960w,\n/static/cc93f051f414f39f66f80f85c6b165f5/aaf92/add-iam-ebs-csi-policy-2.jpg 1920w,\n/static/cc93f051f414f39f66f80f85c6b165f5/83ca0/add-iam-ebs-csi-policy-2.jpg 2001w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>$ kubectl get pods --namespace<span class=\"token operator\">=</span>kube-system</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8653fd392a901e0c7303a6dde2ffdb42/396d0/ebs-csi-driver-pods.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.458333333333332%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/8653fd392a901e0c7303a6dde2ffdb42/396d0/ebs-csi-driver-pods.jpg\"\n        srcset=\"/static/8653fd392a901e0c7303a6dde2ffdb42/a3e66/ebs-csi-driver-pods.jpg 480w,\n/static/8653fd392a901e0c7303a6dde2ffdb42/396d0/ebs-csi-driver-pods.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>정책 연결을 완료하였습니다. 이제 쿠버네티스로 EBS CSI 드라이버의 기능을 사용할 수 있습니다.</p>\n<h2 id=\"ALB-수신-컨트롤러-배포\" style=\"position:relative;\">ALB 수신 컨트롤러 배포<a href=\"#ALB-%EC%88%98%EC%8B%A0-%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC-%EB%B0%B0%ED%8F%AC\" aria-label=\"ALB 수신 컨트롤러 배포 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>LB</strong>(Load Balancer, 로드 밸런서)는 애플리케이션이 2개 이상 있을 때 서버에 가해지는 부하(load)를 분산(balancer)시켜 작업을 나누는 장치 또는 기술을 의미합니다.</p>\n<p><strong>ALB</strong>(Application Load Balancer)는 AWS에서 서비스 중인 로드 밸런서 중의 하나로 애플리케이션(HTTP, FTP, SMTP) 계층에서 로드를 분산하는 L7(Layer 7, 7계층) 로드 밸런서입니다. HTTP 헤더, 쿠키 등과 같은 사용자의 요청을 기준으로 특정 서버에 트래픽을 분산하는 것이 가능합니다. 클라이언트의 요청을 보다 세분화하여 서버에 전달할 수 있습니다.</p>\n<p><strong>aws-alb-ingress-controller.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ServiceAccount\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n    <span class=\"token key atrule\">helm.sh/chart</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller<span class=\"token punctuation\">-</span>0.1.11\n    <span class=\"token key atrule\">app.kubernetes.io/managed-by</span><span class=\"token punctuation\">:</span> Helm\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ClusterRole\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n    <span class=\"token key atrule\">helm.sh/chart</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller<span class=\"token punctuation\">-</span>0.1.11\n    <span class=\"token key atrule\">app.kubernetes.io/managed-by</span><span class=\"token punctuation\">:</span> Helm\n<span class=\"token key atrule\">rules</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"\"</span>\n      <span class=\"token punctuation\">-</span> extensions\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> configmaps\n      <span class=\"token punctuation\">-</span> endpoints\n      <span class=\"token punctuation\">-</span> events\n      <span class=\"token punctuation\">-</span> ingresses\n      <span class=\"token punctuation\">-</span> ingresses/status\n      <span class=\"token punctuation\">-</span> services\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> create\n      <span class=\"token punctuation\">-</span> get\n      <span class=\"token punctuation\">-</span> list\n      <span class=\"token punctuation\">-</span> update\n      <span class=\"token punctuation\">-</span> watch\n      <span class=\"token punctuation\">-</span> patch\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">apiGroups</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"\"</span>\n      <span class=\"token punctuation\">-</span> extensions\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> nodes\n      <span class=\"token punctuation\">-</span> pods\n      <span class=\"token punctuation\">-</span> secrets\n      <span class=\"token punctuation\">-</span> services\n      <span class=\"token punctuation\">-</span> namespaces\n    <span class=\"token key atrule\">verbs</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> get\n      <span class=\"token punctuation\">-</span> list\n      <span class=\"token punctuation\">-</span> watch\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ClusterRoleBinding\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n    <span class=\"token key atrule\">helm.sh/chart</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller<span class=\"token punctuation\">-</span>0.1.11\n    <span class=\"token key atrule\">app.kubernetes.io/managed-by</span><span class=\"token punctuation\">:</span> Helm\n<span class=\"token key atrule\">roleRef</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">apiGroup</span><span class=\"token punctuation\">:</span> rbac.authorization.k8s.io\n  <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ClusterRole\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n<span class=\"token key atrule\">subjects</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ServiceAccount\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n    <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> default\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n    <span class=\"token key atrule\">helm.sh/chart</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller<span class=\"token punctuation\">-</span>0.1.11\n    <span class=\"token key atrule\">app.kubernetes.io/managed-by</span><span class=\"token punctuation\">:</span> Helm\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"docker.io/amazon/aws-alb-ingress-controller:v1.1.3\"</span>\n          <span class=\"token key atrule\">imagePullPolicy</span><span class=\"token punctuation\">:</span> IfNotPresent\n          <span class=\"token key atrule\">args</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>cluster<span class=\"token punctuation\">-</span>name=&lt;your<span class=\"token punctuation\">-</span>cluster<span class=\"token punctuation\">-</span>name<span class=\"token punctuation\">></span>\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>class=alb\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>aws<span class=\"token punctuation\">-</span>region=ap<span class=\"token punctuation\">-</span>northeast<span class=\"token punctuation\">-</span><span class=\"token number\">2</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>aws<span class=\"token punctuation\">-</span>vpc<span class=\"token punctuation\">-</span>id=&lt;your<span class=\"token punctuation\">-</span>vpc<span class=\"token punctuation\">-</span>id<span class=\"token punctuation\">></span>\n          <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> health\n              <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10254</span>\n              <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n          <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n      <span class=\"token key atrule\">serviceAccountName</span><span class=\"token punctuation\">:</span> aws<span class=\"token punctuation\">-</span>alb<span class=\"token punctuation\">-</span>ingress<span class=\"token punctuation\">-</span>controller\n      <span class=\"token key atrule\">terminationGracePeriodSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">60</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code>--aws-vpc-id</code> 필드에 대한 정보는 <em>- AWS > VPC 메뉴 또는 -</em> 다음 명령어를 입력해 확인할 수 있습니다. 자세한 정보는 AWS 공식 문서의 <a href=\"https://docs.aws.amazon.com/cli/latest/reference/eks/describe-cluster.html\">describe-cluster</a> 내용을 참조하세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>$ aws eks describe-cluster --name<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-cluster-name<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cd2563630027625a61f67ca30cede3d5/396d0/describe-cluster.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 125.83333333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/cd2563630027625a61f67ca30cede3d5/396d0/describe-cluster.jpg\"\n        srcset=\"/static/cd2563630027625a61f67ca30cede3d5/a3e66/describe-cluster.jpg 480w,\n/static/cd2563630027625a61f67ca30cede3d5/396d0/describe-cluster.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>필자는 <strong>Helm</strong>(헬름)에서 제공하는 차트를 사용하였습니다. 하단의 <code>--cluster-name</code>, <code>--aws-region</code>, <code>--aws-vpc-id</code> 필드는 여러분이 설정한 값으로 입력하세요. 헬름 차트에 대한 자세한 정보는 <a href=\"https://github.com/helm/charts/tree/master/incubator/aws-alb-ingress-controller\">aws-alb-ingress-controller</a> 내용을 참조하세요.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>$ kubectl apply -f aws-alb-ingress-controller.yaml\n$ kubectl get all</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/63c1d66dc15b4f23d3dcd181cdaf6fbf/396d0/apply-aws-alb-ingress-controller.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.166666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/63c1d66dc15b4f23d3dcd181cdaf6fbf/396d0/apply-aws-alb-ingress-controller.jpg\"\n        srcset=\"/static/63c1d66dc15b4f23d3dcd181cdaf6fbf/a3e66/apply-aws-alb-ingress-controller.jpg 480w,\n/static/63c1d66dc15b4f23d3dcd181cdaf6fbf/396d0/apply-aws-alb-ingress-controller.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>ALB 수신 컨트롤러 생성을 완료하였습니다.</p>\n<h2 id=\"RDS-데이터베이스-생성\" style=\"position:relative;\">RDS 데이터베이스 생성<a href=\"#RDS-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%83%9D%EC%84%B1\" aria-label=\"RDS 데이터베이스 생성 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>RDS</strong>(Relational Database Service)는 AWS 클라우드에서 관계형 데이터베이스를 더 쉽게 설치, 운영 및 확장할 수 있는 웹 서비스입니다. RDS는 어렵거나 지루한 관계형 데이터베이스 관리 작업을 대다수 대신합니다.</p>\n<p>RDS - 데이터베이스 - 데이터베이스 생성 버튼을 클릭하여 새 데이터베이스 정보를 입력하세요. 데이터베이스 인스턴스 생성에 대한 자세한 정보는 AWS 공식 문서의 <a href=\"https://docs.aws.amazon.com/ko_kr/AmazonRDS/latest/UserGuide/CHAP_Tutorials.WebServerDB.CreateDBInstance.html\">RDS DB 인스턴스 만들기</a> 내용을 참조하세요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 890px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/32a937b06f326c2c9be51855a94abbc8/4e63b/create-rds-database.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 629.5833333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/32a937b06f326c2c9be51855a94abbc8/4e63b/create-rds-database.jpg\"\n        srcset=\"/static/32a937b06f326c2c9be51855a94abbc8/a3e66/create-rds-database.jpg 480w,\n/static/32a937b06f326c2c9be51855a94abbc8/4e63b/create-rds-database.jpg 890w\"\n        sizes=\"(max-width: 890px) 100vw, 890px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>필자의 경우 최소 사양으로 구성하였습니다. 사양이 높을수록 월 청구 요금도 높아지기 때문에 하단의 월별 추정 요금을 확인하면서 설정하세요.</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c3d539e3fbe40704b03bb3cff94cc3d5/06dbb/create-rds-database-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.125%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/c3d539e3fbe40704b03bb3cff94cc3d5/06dbb/create-rds-database-2.jpg\"\n        srcset=\"/static/c3d539e3fbe40704b03bb3cff94cc3d5/a3e66/create-rds-database-2.jpg 480w,\n/static/c3d539e3fbe40704b03bb3cff94cc3d5/fb816/create-rds-database-2.jpg 960w,\n/static/c3d539e3fbe40704b03bb3cff94cc3d5/06dbb/create-rds-database-2.jpg 1140w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>데이터베이스 생성을 완료하였습니다.</p>\n<h2 id=\"네임스페이스-생성\" style=\"position:relative;\">네임스페이스 생성<a href=\"#%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4-%EC%83%9D%EC%84%B1\" aria-label=\"네임스페이스 생성 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>Namespace</strong>(네임스페이스)는 클러스터 내 논리적인 분리를 통한 가상 클러스터를 의미합니다. 같은 네임스페이스 내 오브젝트는 기본적으로 동일한 접근 제어 정책을 갖습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>$ kubectl get namespace</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>쿠버네티스는 처음에 3개의 네임스페이스를 갖습니다.</p>\n<ul>\n<li><code>default</code>: 다른 네임스페이스가 없는 오브젝트를 위한 기본 네임스페이스</li>\n<li><code>kube-system</code>: 쿠버네티스 시스템에서 생성한 오브젝트를 위한 네임스페이스</li>\n<li><code>kube-public</code>: 모든 사용자(인증되지 않은 사용자 포함)가 읽기 권한으로 접근할 수 있는 네임스페이스</li>\n</ul>\n<p>다음 명령어를 입력하여 네임스페이스를 생성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>$ kubectl create namespace <span class=\"token operator\">&lt;</span>insert-your-namespace-name<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/89821c2bffd652bbc7b3b3fa75f97634/396d0/create-namespace.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 11.249999999999998%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/89821c2bffd652bbc7b3b3fa75f97634/396d0/create-namespace.jpg\"\n        srcset=\"/static/89821c2bffd652bbc7b3b3fa75f97634/a3e66/create-namespace.jpg 480w,\n/static/89821c2bffd652bbc7b3b3fa75f97634/396d0/create-namespace.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>필자는 <code>fms</code> 네임스페이스를 생성하였습니다. 여러분이 원하는 네임스페이스를 생성하세요. 네임스페이스를 삭제하고 싶다면 다음 명령어를 입력하세요.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>$ kubectl delete namespace <span class=\"token operator\">&lt;</span>insert-your-namespace-name<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>모든 오브젝트가 네임스페이스에 속하지는 않습니다. 파드, 서비스 등의 쿠버네티스 리소스는 네임스페이스에 속하지만 네임스페이스 리소스 자체는 네임스페이스에 속하지 않습니다. 노드나 퍼시스턴트 볼륨 등의 저수준 리소스는 어느 네임스페이스에도 속하지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>$ kubectl api-resources --namespaced<span class=\"token operator\">=</span>true  // 네임스페이스에 속하는 리소스 조회\n$ kubectl api-resources --namespaced<span class=\"token operator\">=</span>false // 네임스페이스에 속하지 않는 리소스 조회</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3 id=\"네임스페이스에-속하는-리소스\" style=\"position:relative;\">네임스페이스에 속하는 리소스<a href=\"#%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4%EC%97%90-%EC%86%8D%ED%95%98%EB%8A%94-%EB%A6%AC%EC%86%8C%EC%8A%A4\" aria-label=\"네임스페이스에 속하는 리소스 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>$ kubectl get <span class=\"token operator\">&lt;</span>NAME<span class=\"token operator\">|</span>SHORTNAMES<span class=\"token operator\">></span> --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<table>\n<thead>\n<tr>\n<th>NAME</th>\n<th>SHORTNAMES</th>\n<th>KIND</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>bindings</code></td>\n<td></td>\n<td>Binding</td>\n</tr>\n<tr>\n<td><code>configmaps</code></td>\n<td><code>cm</code></td>\n<td>ConfigMap</td>\n</tr>\n<tr>\n<td><code>endpoints</code></td>\n<td><code>ep</code></td>\n<td>Endpoints</td>\n</tr>\n<tr>\n<td><code>events</code></td>\n<td><code>ev</code></td>\n<td>Event</td>\n</tr>\n<tr>\n<td><code>limitranges</code></td>\n<td><code>limits</code></td>\n<td>LimitRange</td>\n</tr>\n<tr>\n<td><code>persistentvolumeclaims</code></td>\n<td><code>pvc</code></td>\n<td>PersistentVolumeClaim</td>\n</tr>\n<tr>\n<td><code>pods</code></td>\n<td><code>pod</code></td>\n<td>Pod</td>\n</tr>\n<tr>\n<td><code>podtemplates</code></td>\n<td></td>\n<td>PodTemplate</td>\n</tr>\n<tr>\n<td><code>replicationcontrollers</code></td>\n<td><code>rc</code></td>\n<td>ReplicationController</td>\n</tr>\n<tr>\n<td><code>resourcequotas</code></td>\n<td><code>quota</code></td>\n<td>ResourceQuota</td>\n</tr>\n<tr>\n<td><code>secrets</code></td>\n<td></td>\n<td>Secret</td>\n</tr>\n<tr>\n<td><code>serviceaccounts</code></td>\n<td><code>sa</code></td>\n<td>ServiceAccount</td>\n</tr>\n<tr>\n<td><code>services</code></td>\n<td><code>svc</code></td>\n<td>Service</td>\n</tr>\n<tr>\n<td><code>controllerrevisions</code></td>\n<td></td>\n<td>ControllerRevision</td>\n</tr>\n<tr>\n<td><code>daemonsets</code></td>\n<td><code>ds</code></td>\n<td>DaemonSet</td>\n</tr>\n<tr>\n<td><code>deployments</code></td>\n<td><code>deploy</code></td>\n<td>Deployment</td>\n</tr>\n<tr>\n<td><code>replicasets</code></td>\n<td><code>rs</code></td>\n<td>ReplicaSet</td>\n</tr>\n<tr>\n<td><code>statefulsets</code></td>\n<td><code>sts</code></td>\n<td>StatefulSet</td>\n</tr>\n<tr>\n<td><code>localsubjectaccessreviews</code></td>\n<td></td>\n<td>LocalSubjectAccessReview</td>\n</tr>\n<tr>\n<td><code>horizontalpodautoscalers</code></td>\n<td><code>hpa</code></td>\n<td>HorizontalPodAutoscaler</td>\n</tr>\n<tr>\n<td><code>cronjobs</code></td>\n<td><code>cj</code></td>\n<td>CronJob</td>\n</tr>\n<tr>\n<td><code>jobs</code></td>\n<td></td>\n<td>Job</td>\n</tr>\n<tr>\n<td><code>leases</code></td>\n<td></td>\n<td>Lease</td>\n</tr>\n<tr>\n<td><code>events</code></td>\n<td><code>ev</code></td>\n<td>Event</td>\n</tr>\n<tr>\n<td><code>daemonsets</code></td>\n<td><code>ds</code></td>\n<td>DaemonSet</td>\n</tr>\n<tr>\n<td><code>deployments</code></td>\n<td><code>deploy</code></td>\n<td>Deployment</td>\n</tr>\n<tr>\n<td><code>ingresses</code></td>\n<td><code>ing</code></td>\n<td>Ingress</td>\n</tr>\n<tr>\n<td><code>networkpolicies</code></td>\n<td><code>netpol</code></td>\n<td>NetworkPolicy</td>\n</tr>\n<tr>\n<td><code>replicasets</code></td>\n<td><code>rs</code></td>\n<td>ReplicaSet</td>\n</tr>\n<tr>\n<td><code>ingresses</code></td>\n<td><code>ing</code></td>\n<td>Ingress</td>\n</tr>\n<tr>\n<td><code>networkpolicies</code></td>\n<td><code>netpo</code></td>\n<td>NetworkPolicy</td>\n</tr>\n<tr>\n<td><code>poddisruptionbudgets</code></td>\n<td><code>pdb</code></td>\n<td>PodDisruptionBudget</td>\n</tr>\n<tr>\n<td><code>rolebindings</code></td>\n<td></td>\n<td>RoleBinding</td>\n</tr>\n<tr>\n<td><code>roles</code></td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"네임스페이스에-속하지-않는-리소스\" style=\"position:relative;\">네임스페이스에 속하지 않는 리소스<a href=\"#%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4%EC%97%90-%EC%86%8D%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94-%EB%A6%AC%EC%86%8C%EC%8A%A4\" aria-label=\"네임스페이스에 속하지 않는 리소스 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>$ kubectl get <span class=\"token operator\">&lt;</span>NAME<span class=\"token operator\">|</span>SHORTNAMES<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<table>\n<thead>\n<tr>\n<th>NAME</th>\n<th>SHORTNAMES</th>\n<th>KIND</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>componentstatuses</code></td>\n<td><code>cs</code></td>\n<td>ComponentStatus</td>\n</tr>\n<tr>\n<td><code>namespaces</code></td>\n<td><code>ns</code></td>\n<td>Namespace</td>\n</tr>\n<tr>\n<td><code>nodes</code></td>\n<td><code>no</code></td>\n<td>Node</td>\n</tr>\n<tr>\n<td><code>persistentvolumes</code></td>\n<td><code>pv</code></td>\n<td>PersistentVolume</td>\n</tr>\n<tr>\n<td><code>mutatingwebhookconfigurations</code></td>\n<td></td>\n<td>MutatingWebhookConfiguration</td>\n</tr>\n<tr>\n<td><code>validatingwebhookconfigurations</code></td>\n<td></td>\n<td>ValidatingWebhookConfiguration</td>\n</tr>\n<tr>\n<td><code>customresourcedefinitions</code></td>\n<td><code>crd</code></td>\n<td>CustomResourceDefinition</td>\n</tr>\n<tr>\n<td><code>apiservices</code></td>\n<td></td>\n<td>APIService</td>\n</tr>\n<tr>\n<td><code>tokenreviews</code></td>\n<td></td>\n<td>TokenReview</td>\n</tr>\n<tr>\n<td><code>selfsubjectaccessreviews</code></td>\n<td></td>\n<td>SelfSubjectAccessReview</td>\n</tr>\n<tr>\n<td><code>selfsubjectrulesreviews</code></td>\n<td></td>\n<td>SelfSubjectRulesReview</td>\n</tr>\n<tr>\n<td><code>subjectaccessreviews</code></td>\n<td></td>\n<td>SubjectAccessReview</td>\n</tr>\n<tr>\n<td><code>certificatesigningrequests</code></td>\n<td><code>csr</code></td>\n<td>CertificateSigningRequest</td>\n</tr>\n<tr>\n<td><code>eniconfigs</code></td>\n<td></td>\n<td>ENIConfig</td>\n</tr>\n<tr>\n<td><code>podsecuritypolicies</code></td>\n<td><code>psp</code></td>\n<td>PodSecurityPolicy</td>\n</tr>\n<tr>\n<td><code>runtimeclasses</code></td>\n<td></td>\n<td>RuntimeClass</td>\n</tr>\n<tr>\n<td><code>podsecuritypolicies</code></td>\n<td><code>psp</code></td>\n<td>PodSecurityPolicy</td>\n</tr>\n<tr>\n<td><code>clusterrolebindings</code></td>\n<td></td>\n<td>ClusterRoleBinding</td>\n</tr>\n<tr>\n<td><code>clusterroles</code></td>\n<td></td>\n<td>ClusterRole</td>\n</tr>\n<tr>\n<td><code>priorityclasses</code></td>\n<td><code>pc</code></td>\n<td>PriorityClass</td>\n</tr>\n<tr>\n<td><code>csidrivers</code></td>\n<td></td>\n<td>CSIDriver</td>\n</tr>\n<tr>\n<td><code>csinodes</code></td>\n<td></td>\n<td>CSINode</td>\n</tr>\n<tr>\n<td><code>storageclasses</code></td>\n<td><code>sc</code></td>\n<td>StorageClass</td>\n</tr>\n<tr>\n<td><code>volumeattachments</code></td>\n<td></td>\n<td>VolumeAttachment</td>\n</tr>\n</tbody>\n</table>\n<p>네임스페이스 생성을 완료하였습니다.</p>\n<h2 id=\"ExternalName-설정\" style=\"position:relative;\">ExternalName 설정<a href=\"#ExternalName-%EC%84%A4%EC%A0%95\" aria-label=\"ExternalName 설정 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>자격 증명 세부 정보 보기</strong> 또는 RDS - 데이터베이스 - <code>&#x3C;your-database-identifier></code> 항목을 클릭하여 현재 생성한 데이터베이스의 엔드포인트를 복사합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2664a6fd77f5b750cf36f324221250cb/06dbb/create-rds-database-3.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.041666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/2664a6fd77f5b750cf36f324221250cb/06dbb/create-rds-database-3.jpg\"\n        srcset=\"/static/2664a6fd77f5b750cf36f324221250cb/a3e66/create-rds-database-3.jpg 480w,\n/static/2664a6fd77f5b750cf36f324221250cb/fb816/create-rds-database-3.jpg 960w,\n/static/2664a6fd77f5b750cf36f324221250cb/06dbb/create-rds-database-3.jpg 1140w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>데이터베이스의 경우 쿠버네티스에서 관리하지 않는 AWS 서비스로 쿠버네티스 명령어로는 조회할 수 없지만 필자와 동일한 VPC 보안 그룹에 속해 있어 서비스를 사용할 수 있습니다.</p>\n<p>다만, 서비스에서 사용할 때 <em>- 가독성이 낮은 -</em> 엔드포인트 주소 전체를 입력해야 하는데 <code>ExternalName</code> 유형을 지정해서 <code>spec.externalName</code> 파라미터를 사용하면 쿠버네티스 안에서 별칭 형태로 서비스에 적용할 수 있습니다. 자세한 정보는 쿠버네티스 공식 문서의 <a href=\"https://kubernetes.io/ko/docs/concepts/services-networking/service/#externalname\">ExternalName 유형</a> 내용을 참조하세요.</p>\n<p><strong>external-name.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mariadb\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> ExternalName\n  <span class=\"token key atrule\">externalName</span><span class=\"token punctuation\">:</span> &lt;database<span class=\"token punctuation\">-</span>endpoint<span class=\"token punctuation\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>$ kubectl apply -f external-name.yaml\n$ kubectl get services --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f468d70453a427f54152bf84f7854973/396d0/apply-external-name-for-mariadb.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.458333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/f468d70453a427f54152bf84f7854973/396d0/apply-external-name-for-mariadb.jpg\"\n        srcset=\"/static/f468d70453a427f54152bf84f7854973/a3e66/apply-external-name-for-mariadb.jpg 480w,\n/static/f468d70453a427f54152bf84f7854973/396d0/apply-external-name-for-mariadb.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이제 오브젝트에 <em>- 가독성이 높은 -</em> <code>mariadb</code> 별칭으로 서비스에 적용할 수 있습니다.</p>\n<h2 id=\"MariaDB-CLI-배포\" style=\"position:relative;\">MariaDB CLI 배포<a href=\"#MariaDB-CLI-%EB%B0%B0%ED%8F%AC\" aria-label=\"MariaDB CLI 배포 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>외부 서비스인 데이터베이스는 쿠버네티스 명령어로 조회할 수 없기 때문에 쿠버네티스 안에서 사용할 수 있도록 CLI 툴을 배포해 봅시다.</p>\n<p><strong>mariadb-cli.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mariadb<span class=\"token punctuation\">-</span>cli\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> mariadb<span class=\"token punctuation\">-</span>cli\n    <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> client\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> mariadb<span class=\"token punctuation\">-</span>cli\n      <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> client\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> mariadb<span class=\"token punctuation\">-</span>cli\n        <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> client\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">serviceAccountName</span><span class=\"token punctuation\">:</span> default\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mariadb\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> mariadb<span class=\"token punctuation\">:</span><span class=\"token number\">10.3</span>\n          <span class=\"token key atrule\">imagePullPolicy</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"IfNotPresent\"</span>\n          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"/bin/sh\"</span><span class=\"token punctuation\">]</span>\n          <span class=\"token key atrule\">args</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">[</span>\n              <span class=\"token string\">\"-c\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">\"while true; do echo $(date +%Y-%m-%d' '%H:%M:%S); sleep 60; done\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">]</span>\n          <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 50m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 64Mi\n            <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 100m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 64Mi</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>$ kubectl apply -f mariadb-cli.yaml\n$ kubectl get pods --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7093a85d691c54933805a23be9fb30e5/396d0/apply-mariadb-cli.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.708333333333332%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/7093a85d691c54933805a23be9fb30e5/396d0/apply-mariadb-cli.jpg\"\n        srcset=\"/static/7093a85d691c54933805a23be9fb30e5/a3e66/apply-mariadb-cli.jpg 480w,\n/static/7093a85d691c54933805a23be9fb30e5/396d0/apply-mariadb-cli.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>필자의 경우 <em>- 지속적 연결 상태 확인 목적으로 -</em> <code>args</code> 필드에 60초마다 현재 시각을 출력하는 스크립트를 정의해 놓았습니다. 여러분은 다른 스크립트로 정의하거나 정의하지 않아도 됩니다. <code>kubectl logs -f &#x3C;mariadb-cli-pod> --namespace=&#x3C;your-namespace></code> 명령어로 확인할 수 있습니다.</p>\n</blockquote>\n<p>다음 명령어를 입력하면 <em>- 다소 복잡하긴 하지만 -</em> 파드를 조회하는 과정을 생략할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>$ kubectl logs -f <span class=\"token variable\"><span class=\"token variable\">$(</span>kubectl get pods -o <span class=\"token assign-left variable\">jsonpath</span><span class=\"token operator\">=</span><span class=\"token string\">\"{.items[0].metadata.name}\"</span> --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span> -l <span class=\"token string\">\"app=mariadb-cli\"</span><span class=\"token variable\">)</span></span> --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span> --timestamps</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li><code>-l, --selector</code>: 레이블 셀렉터. 쿠버네티스 오브젝트를 식별합니다. 자세한 정보는 쿠버네티스 공식 문서의 <a href=\"https://kubernetes.io/ko/docs/concepts/overview/working-with-objects/labels/#%EB%A0%88%EC%9D%B4%EB%B8%94-%EC%85%80%EB%A0%89%ED%84%B0\">레이블과 셀렉터</a> 내용을 참조하세요.</li>\n<li><code>-o, --output</code>: 반환된 목록의 각 파드에서 이름을 가져오는 표현식을 지정합니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c9645d5f6ea82cf396f820cca54d1dba/396d0/apply-mariadb-cli-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.41666666666667%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/c9645d5f6ea82cf396f820cca54d1dba/396d0/apply-mariadb-cli-2.jpg\"\n        srcset=\"/static/c9645d5f6ea82cf396f820cca54d1dba/a3e66/apply-mariadb-cli-2.jpg 480w,\n/static/c9645d5f6ea82cf396f820cca54d1dba/396d0/apply-mariadb-cli-2.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>다음 명령어를 입력하여 <code>mariadb-cli</code> 내부로 접속합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>$ kubectl <span class=\"token builtin class-name\">exec</span> -it <span class=\"token operator\">&lt;</span>mariadb-cli-pod<span class=\"token operator\">></span> --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span> <span class=\"token function\">bash</span>\n$ mysql -h <span class=\"token operator\">&lt;</span>mariadb-external-name<span class=\"token operator\">></span> -u admin -p\n$ Enter Password: <span class=\"token operator\">&lt;</span>mariadb-password<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/754eb8ae5033cda0770b0af39c271bdc/396d0/connect-mariadb.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.874999999999996%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/754eb8ae5033cda0770b0af39c271bdc/396d0/connect-mariadb.jpg\"\n        srcset=\"/static/754eb8ae5033cda0770b0af39c271bdc/a3e66/connect-mariadb.jpg 480w,\n/static/754eb8ae5033cda0770b0af39c271bdc/396d0/connect-mariadb.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p><code>&#x3C;mariadb-external-name></code> 필드의 경우 엔드포인트 주소 그대로 입력해도 무방하지만 미리 정의해 놓은 별칭을 사용하는 것이 좋습니다.</p>\n</blockquote>\n<h3 id=\"ERROR-Connection-Failed\" style=\"position:relative;\">[ERROR] Connection Failed.<a href=\"#ERROR-Connection-Failed\" aria-label=\"ERROR Connection Failed permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>접속에 실패할 경우 로드 밸런서 및 보안 그룹 설정을 검토하세요.</p>\n<ol>\n<li><code>aws-alb-ingress-controller</code> 설정에서 <code>cluster-name</code> 또는 <code>aws-vpc-id</code> 필드 값 확인</li>\n<li>데이터베이스 보안 그룹 <code>ClusterSharedNodeSecurityGroup</code> 추가 확인 (<code>ControlPlaneSecurityGroup</code> 아님)</li>\n</ol>\n<h2 id=\"MaxScale-배포\" style=\"position:relative;\">MaxScale 배포<a href=\"#MaxScale-%EB%B0%B0%ED%8F%AC\" aria-label=\"MaxScale 배포 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>MariaDB <strong>MaxScale</strong>(맥스스케일)은 기본 데이터베이스 인프라에서 애플리케이션 개발을 분리하여 애플리케이션 개발을 단순화하는 데이터베이스 프록시입니다.</p>\n<p>MaxScale 서비스를 사용하기 위해 <code>maxscale</code> 계정을 생성하고 특정 테이블에 대한 권한을 부여해야 합니다. 자세한 정보는 MariaDB 공식 문서의 <a href=\"https://mariadb.com/kb/en/mariadb-maxscale-23-setting-up-mariadb-maxscale/#creating-a-user-account-for-maxscale\">Creating a user account for MaxScale</a> 내용을 참조하세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">USER</span> <span class=\"token string\">'maxscale'</span><span class=\"token variable\">@'%'</span> IDENTIFIED <span class=\"token keyword\">BY</span> <span class=\"token string\">'&lt;insert-your-maxscale-password>'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">ON</span> mysql<span class=\"token punctuation\">.</span><span class=\"token keyword\">user</span> <span class=\"token keyword\">TO</span> <span class=\"token string\">'maxscale'</span><span class=\"token variable\">@'%'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">ON</span> mysql<span class=\"token punctuation\">.</span>db <span class=\"token keyword\">TO</span> <span class=\"token string\">'maxscale'</span><span class=\"token variable\">@'%'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">ON</span> mysql<span class=\"token punctuation\">.</span>tables_priv <span class=\"token keyword\">TO</span> <span class=\"token string\">'maxscale'</span><span class=\"token variable\">@'%'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">ON</span> mysql<span class=\"token punctuation\">.</span>roles_mapping <span class=\"token keyword\">TO</span> <span class=\"token string\">'maxscale'</span><span class=\"token variable\">@'%'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">SHOW</span> <span class=\"token keyword\">DATABASES</span> <span class=\"token keyword\">ON</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span> <span class=\"token keyword\">TO</span> <span class=\"token string\">'maxscale'</span><span class=\"token variable\">@'%'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">SELECT</span> Host<span class=\"token punctuation\">,</span> <span class=\"token keyword\">User</span> <span class=\"token keyword\">FROM</span> mysql<span class=\"token punctuation\">.</span><span class=\"token keyword\">user</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/927a82867c75b30a0bc5cbea3916534c/396d0/create-user-account-for-maxscale.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.791666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/927a82867c75b30a0bc5cbea3916534c/396d0/create-user-account-for-maxscale.jpg\"\n        srcset=\"/static/927a82867c75b30a0bc5cbea3916534c/a3e66/create-user-account-for-maxscale.jpg 480w,\n/static/927a82867c75b30a0bc5cbea3916534c/396d0/create-user-account-for-maxscale.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>my-maxscale.cnf</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"properties\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-properties line-numbers\"><code class=\"language-properties\">[master]\n<span class=\"token attr-name\">type</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">server</span>\n<span class=\"token attr-name\">address</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">mariadb</span>\n<span class=\"token attr-name\">port</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">3306</span>\n<span class=\"token attr-name\">protocol</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">MariaDBBackend</span>\n\n[slave1]\n<span class=\"token attr-name\">type</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">server</span>\n<span class=\"token attr-name\">address</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">mariadb</span>\n<span class=\"token attr-name\">port</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">3306</span>\n<span class=\"token attr-name\">protocol</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">MariaDBBackend</span>\n\n[slave2]\n<span class=\"token attr-name\">type</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">server</span>\n<span class=\"token attr-name\">address</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">mariadb</span>\n<span class=\"token attr-name\">port</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">3306</span>\n<span class=\"token attr-name\">protocol</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">MariaDBBackend</span>\n\n<span class=\"token comment\"># Monitor for the servers</span>\n<span class=\"token comment\"># This will keep MaxScale aware of the state of the servers.</span>\n<span class=\"token comment\"># MySQL Monitor documentation:</span>\n<span class=\"token comment\"># https://github.com/mariadb-corporation/MaxScale/blob/2.3/Documentation/Monitors/MariaDB-Monitor.md</span>\n\n[MariaDB-Monitor]\n<span class=\"token attr-name\">type</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">monitor</span>\n<span class=\"token attr-name\">module</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">mariadbmon</span>\n<span class=\"token attr-name\">servers</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">master</span>\n<span class=\"token attr-name\">user</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">maxscale</span>\n<span class=\"token attr-name\">passwd</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">&lt;your-maxscale-password></span>\n<span class=\"token attr-name\">auto_failover</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">true</span>\n<span class=\"token attr-name\">auto_rejoin</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">true</span>\n<span class=\"token attr-name\">enforce_read_only_slaves</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">1</span>\n\n<span class=\"token comment\"># Service definitions</span>\n<span class=\"token comment\"># Service Definition for a read-only service and a read/write splitting service.</span>\n\n<span class=\"token comment\"># ReadConnRoute documentation:</span>\n<span class=\"token comment\"># https://github.com/mariadb-corporation/MaxScale/blob/2.3/Documentation/Routers/ReadConnRoute.md</span>\n\n[Read-Only-Service]\n<span class=\"token attr-name\">type</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">service</span>\n<span class=\"token attr-name\">router</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">readconnroute</span>\n<span class=\"token attr-name\">servers</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">master</span>\n<span class=\"token attr-name\">user</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">maxscale</span>\n<span class=\"token attr-name\">passwd</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">&lt;your-maxscale-password></span>\n<span class=\"token attr-name\">router_options</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">slave</span>\n\n<span class=\"token comment\"># ReadWriteSplit documentation:</span>\n<span class=\"token comment\"># https://github.com/mariadb-corporation/MaxScale/blob/2.3/Documentation/Routers/ReadWriteSplit.md</span>\n\n[Read-Write-Service]\n<span class=\"token attr-name\">type</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">service</span>\n<span class=\"token attr-name\">router</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">readwritesplit</span>\n<span class=\"token attr-name\">servers</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">master</span>\n<span class=\"token attr-name\">user</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">maxscale</span>\n<span class=\"token attr-name\">passwd</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">&lt;your-maxscale-password></span>\n<span class=\"token attr-name\">master_failure_mode</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">fail_on_write</span>\n\n<span class=\"token comment\"># Listener definitions for the services</span>\n<span class=\"token comment\"># Listeners represent the ports the services will listen on.</span>\n\n[Read-Only-Listener]\n<span class=\"token attr-name\">type</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">listener</span>\n<span class=\"token attr-name\">service</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">Read-Only-Service</span>\n<span class=\"token attr-name\">protocol</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">MySQLClient</span>\n<span class=\"token attr-name\">port</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">4008</span>\n<span class=\"token attr-name\">address</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">0.0.0.0</span>\n\n[Read-Write-Listener]\n<span class=\"token attr-name\">type</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">listener</span>\n<span class=\"token attr-name\">service</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">Read-Write-Service</span>\n<span class=\"token attr-name\">protocol</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">MySQLClient</span>\n<span class=\"token attr-name\">port</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">4006</span>\n<span class=\"token attr-name\">address</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">0.0.0.0</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Maxscale 구성으로 시크릿을 생성해 봅시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>$ kubectl create secret generic maxscale-config --from-file<span class=\"token operator\">=</span>my-maxscale.cnf<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>repository-absolute-path<span class=\"token operator\">></span>/my-maxscale.cnf --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span>\n$ kubectl get secrets --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<blockquote>\n<p><code>&#x3C;repository-absolute-path></code> 필드의 경우 <code>${PWD}</code> 변수를 사용하면 편리합니다.</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/43fdf533680246215d21ca298f86c484/396d0/create-secret-for-maxscale-config.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.958333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/43fdf533680246215d21ca298f86c484/396d0/create-secret-for-maxscale-config.jpg\"\n        srcset=\"/static/43fdf533680246215d21ca298f86c484/a3e66/create-secret-for-maxscale-config.jpg 480w,\n/static/43fdf533680246215d21ca298f86c484/396d0/create-secret-for-maxscale-config.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>maxscale.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> maxscale\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> maxscale\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4006</span>\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4006</span>\n      <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> maxscale\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> ClusterIP\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> extensions/v1beta1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> maxscale\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> maxscale\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">initContainers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> init<span class=\"token punctuation\">-</span>myservice\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> mariadb/maxscale<span class=\"token punctuation\">:</span><span class=\"token number\">2.3</span>\n          <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> conf<span class=\"token punctuation\">-</span>d\n              <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /tmp/maxscale.cnf.d\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> secret<span class=\"token punctuation\">-</span>conf<span class=\"token punctuation\">-</span>d\n              <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /tmp/source.maxscale.cnf.d\n          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token string\">\"sh\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token string\">\"-c\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token string\">\"cat /tmp/source.maxscale.cnf.d/my-maxscale.cnf >> /tmp/maxscale.cnf.d/my-maxscale.cnf\"</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> maxscale\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> mariadb/maxscale<span class=\"token punctuation\">:</span><span class=\"token number\">2.3</span>\n          <span class=\"token key atrule\">imagePullPolicy</span><span class=\"token punctuation\">:</span> IfNotPresent\n          <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 50m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 200Mi\n            <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 300m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 300Mi\n          <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4006</span>\n              <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> readwrite<span class=\"token punctuation\">-</span>port\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4008</span>\n              <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> readonly<span class=\"token punctuation\">-</span>port\n          <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> conf<span class=\"token punctuation\">-</span>d\n              <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/etc/maxscale.cnf.d\"</span>\n              <span class=\"token key atrule\">readOnly</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n      <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> secret<span class=\"token punctuation\">-</span>conf<span class=\"token punctuation\">-</span>d\n          <span class=\"token key atrule\">secret</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">secretName</span><span class=\"token punctuation\">:</span> maxscale<span class=\"token punctuation\">-</span>config\n            <span class=\"token key atrule\">items</span><span class=\"token punctuation\">:</span>\n              <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>maxscale.cnf\n                <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>maxscale.cnf\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> conf<span class=\"token punctuation\">-</span>d\n          <span class=\"token key atrule\">emptyDir</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>$ kubectl apply -f maxscale.yaml\n$ kubectl get services --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/78668b181cea9bcd99cdfb777f4e9eec/396d0/apply-maxscale.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.708333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/78668b181cea9bcd99cdfb777f4e9eec/396d0/apply-maxscale.jpg\"\n        srcset=\"/static/78668b181cea9bcd99cdfb777f4e9eec/a3e66/apply-maxscale.jpg 480w,\n/static/78668b181cea9bcd99cdfb777f4e9eec/396d0/apply-maxscale.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>MaxScale 배포를 완료하였습니다. 이제 <code>kubectl port-forward</code> 명령어로 리소스 이름과 파드 이름과 사용하여 일치하는 파드를 선택해 포트 포워딩을 할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>$ kubectl port-forward service/maxscale <span class=\"token number\">4006</span>:4006 --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/855b62701aedcab4abc408403846af4a/396d0/port-forward-maxscale.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 13.750000000000002%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/855b62701aedcab4abc408403846af4a/396d0/port-forward-maxscale.jpg\"\n        srcset=\"/static/855b62701aedcab4abc408403846af4a/a3e66/port-forward-maxscale.jpg 480w,\n/static/855b62701aedcab4abc408403846af4a/396d0/port-forward-maxscale.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>파드의 포트를 로컬 포트로 포워딩한 상태입니다. 데이터베이스 툴을 사용하여 직접 데이터베이스에 접속해 봅시다. (필자는 <a href=\"https://dbeaver.io/download/\"><code>DBeaver</code></a> 툴을 사용하였습니다.)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1120px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b94cd59dd01340ae6adae6007da3f48b/811cd/mariadb-connection-settings.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 91.66666666666667%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/b94cd59dd01340ae6adae6007da3f48b/811cd/mariadb-connection-settings.jpg\"\n        srcset=\"/static/b94cd59dd01340ae6adae6007da3f48b/a3e66/mariadb-connection-settings.jpg 480w,\n/static/b94cd59dd01340ae6adae6007da3f48b/fb816/mariadb-connection-settings.jpg 960w,\n/static/b94cd59dd01340ae6adae6007da3f48b/811cd/mariadb-connection-settings.jpg 1120w\"\n        sizes=\"(max-width: 1120px) 100vw, 1120px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>데이터베이스 접속을 완료하였습니다. 이제 데이터베이스에 마이그레이션 및 다양한 작업을 수행할 수 있습니다.</p>\n<h2 id=\"Docker-자격-증명-기반-Secret-배포\" style=\"position:relative;\">Docker 자격 증명 기반 Secret 배포<a href=\"#Docker-%EC%9E%90%EA%B2%A9-%EC%A6%9D%EB%AA%85-%EA%B8%B0%EB%B0%98-Secret-%EB%B0%B0%ED%8F%AC\" aria-label=\"Docker 자격 증명 기반 Secret 배포 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>애플리케이션을 오브젝트로 배포할 때 도커 이미지를 가져오기 위한 자격 증명이 필요합니다. 그렇다면 배포하는 <code>.yaml</code> 파일마다 도커 계정과 비밀번호를 설정해야 할까요? <em>- 보안을 중요시하는 개발자라면 -</em> 절대로 그렇게 설정하고 싶지 않을 겁니다. 쿠버네티스는 중요한 정보를 별도로 저장할 수 있도록 <strong>Secret</strong>(시크릿) 기능을 지원합니다. 지금부터 도커 계정 정보를 시크릿으로 만들어 배포해 봅시다.</p>\n<p>도커 사용자 이름과 비밀번호를 <code>base64</code> 형태로 변환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>$ <span class=\"token builtin class-name\">echo</span> -n <span class=\"token string\">'&lt;username>:&lt;password>'</span> <span class=\"token operator\">|</span> base64</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong>docker/config.json</strong></p>\n<p>변환한 정보를 <code>auth</code> 필드에 삽입합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"auths\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"https://index.docker.io/v1/\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"auth\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;base64-encoded-string>\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>해당 파일을 <code>base64</code> 형태로 변환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>$ <span class=\"token function\">cat</span> config.json <span class=\"token operator\">|</span> base64</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><strong>docker/dockerhub.yaml</strong></p>\n<p>변환한 정보를 <code>.dockerconfigjson</code> 필드에 삽입합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Secret\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> dockerhub\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n<span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> kubernetes.io/dockerconfigjson\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">.dockerconfigjson</span><span class=\"token punctuation\">:</span> &lt;base64<span class=\"token punctuation\">-</span>encoded<span class=\"token punctuation\">-</span>string<span class=\"token punctuation\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>$ kubectl apply -f dockerhub.yaml\n$ kubectl get secrets --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span>\n$ kubectl describe secrets/dockerhub --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5e1cafbe1e517907086323378f08b9b1/396d0/apply-secret-for-dockerhub.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.458333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/5e1cafbe1e517907086323378f08b9b1/396d0/apply-secret-for-dockerhub.jpg\"\n        srcset=\"/static/5e1cafbe1e517907086323378f08b9b1/a3e66/apply-secret-for-dockerhub.jpg 480w,\n/static/5e1cafbe1e517907086323378f08b9b1/396d0/apply-secret-for-dockerhub.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>시크릿 배포를 완료하였습니다. 이제 애플리케이션 오브젝트 내 <code>imagePullSecrets</code> 필드에 다음과 같이 도커 자격 증명을 지정할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token punctuation\">...</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">imagePullSecrets</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> dockerhub</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>설마 다 보셨나요? 🙀</h1>\n<p>이 엄청난 스크롤을 극복한 당신은 최소 쿠버네티스 사랑꾼! 👍 아직 서비스를 구성하는 파드를 쿠버네티스 오브젝트로 만들고 배포하는 20%(?) 작업이 남았지만 간단하니까 걱정하지 마세요.</p>","frontmatter":{"category":"kubernetes","index":5,"title":"Amazon EKS 인프라 구성하기 😻","description":"모빌리티 스타트업에서 EKS 인프라를 구성하는 데브옵스 업무를 맡았습니다. 실전에서 인프라를 어떻게 구성했는지 살펴보세요.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/kubernetes/build-eks-infrastructure/cover.jpg?raw=true","date":"2021-12-29"}},{"id":"ddad2133-4517-5324-8bdf-fe971e979719","fields":{"slug":"/kubernetes/pod/"},"html":"<blockquote>\n<p>쿠버네티스 공식 문서의 <a href=\"https://kubernetes.io/ko/docs/concepts/workloads/pods/\">파드</a> 내용을 참조해서 작성한 글입니다. 자세한 내용은 해당 문서를 참조하세요. 😉</p>\n</blockquote>\n<p><strong>Pod</strong>(파드)는 쿠버네티스에서 생성하고 관리할 수 있는 <strong>배포 가능한 가장 작은 컴퓨팅 단위</strong>의 단순한 쿠버네티스 오브젝트입니다. 파드의 어원은 고래 떼(pod of whales), 콩 꼬투리(pea pod) 의미에서 유래하였습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 362px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8e898c043a9c46c2c2ab0784223ea4e6/e1e3d/pod.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 108.28729281767957%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/8e898c043a9c46c2c2ab0784223ea4e6/e1e3d/pod.jpg\"\n        srcset=\"/static/8e898c043a9c46c2c2ab0784223ea4e6/e1e3d/pod.jpg 362w\"\n        sizes=\"(max-width: 362px) 100vw, 362px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"Container\" style=\"position:relative;\">Container<a href=\"#Container\" aria-label=\"Container permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>파드 당 하나의 컨테이너</strong> 모델은 가장 일반적은 쿠버네티스 배포 방식입니다. 그래서 파드를 컨테이너로 퉁쳐서 생각하는 분들이 있는데 정확하게 파드는 단일 컨테이너를 둘러싼 래퍼(wrapper) 개념으로 생각하면 좋습니다.</p>\n<p><strong>파드 당 여러 개의 컨테이너</strong> 모델을 사용할 수도 있습니다. 여러 컨테이너가 밀접하게 결합되어 있고 리소스를 공유해야 하는 경우 다중 컨테이너로 파드를 구성하는 것이 좋습니다. 다중 컨테이너로 구성한 파드는 하나의 결합된 서비스 단위를 형성합니다.</p>\n<blockquote>\n<p>단일 파드에서 여러 컨테이너를 그룹화하는 것은 컨테이너가 밀접하게 결합된 특정 인스턴스에서만 사용해 주세요.</p>\n</blockquote>\n<h3 id=\"Network\" style=\"position:relative;\">Network<a href=\"#Network\" aria-label=\"Network permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>각 파드에는 고유한 IP 주소가 할당됩니다. 파드 내부의 모든 컨테이너는 IP 주소와 네트워크 포트를 포함하여 네트워크 네임스페이스를 공유합니다. 파드 내부에서 파드에 속한 컨테이너는 <code>localhost</code>를 사용하여 서로를 찾을 수 있습니다. 네트워킹에 대한 자세한 정보는 쿠버네티스 공식 문서의 <a href=\"https://kubernetes.io/ko/docs/concepts/cluster-administration/networking/\">클러스터 네트워킹</a> 내용을 참조하세요.</p>\n<h3 id=\"Storage\" style=\"position:relative;\">Storage<a href=\"#Storage\" aria-label=\"Storage permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>파드는 공유 스토리지 볼륨의 집합을 지정할 수 있습니다. 파드의 모든 컨테이너는 공유 볼륨에 접근하여 데이터를 공유할 수 있습니다. 스토리지에 대한 자세한 정보는 쿠버네티스 공식 문서의 <a href=\"https://kubernetes.io/ko/docs/concepts/storage/\">스토리지</a> 내용을 참조하세요.</p>","frontmatter":{"category":"kubernetes","index":4,"title":"Pod","description":"도커는 컨테이너를 배포해서 서비스를 구성하고, 쿠버네티스는 파드를 배포해서 서비스를 구성합니다. 컨테이너와 파드는 비슷하지만 미묘한 차이가 있어요.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/kubernetes/cover.jpg?raw=true","date":"2021-12-29"}},{"id":"57e89794-5c2c-5a1e-b3ba-4b67824db3f2","fields":{"slug":"/kubernetes/component/"},"html":"<blockquote>\n<p>쿠버네티스 공식 문서의 <a href=\"https://kubernetes.io/ko/docs/concepts/overview/components/\">컴포넌트</a>와 서비큐라의 <a href=\"https://subicura.com/2019/05/19/kubernetes-basic-1.html#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EA%B8%B0%EB%B3%B8-%EA%B0%9C%EB%85%90\">쿠버네티스 기본 개념</a> 내용을 참조해서 작성한 글입니다. 자세한 내용은 해당 문서를 참조하세요. 😉</p>\n</blockquote>\n<p><strong>Component</strong>(컴포넌트)는 독립적인 소프트웨어 단위 모듈입니다. 독립적인 모듈은 의존성이 없기 때문에 재사용을 가능하게 합니다. 파란색 7각형 모양의 도형이 컴포넌트를 의미합니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1441px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/de8dd2b080cc11fa24a2541f3e541a4d/2332f/kubernetes-components.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.958333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"쿠버네티스를 구성하는 컴포넌트들\"\n        title=\"쿠버네티스를 구성하는 컴포넌트들\"\n        src=\"/static/de8dd2b080cc11fa24a2541f3e541a4d/2332f/kubernetes-components.jpg\"\n        srcset=\"/static/de8dd2b080cc11fa24a2541f3e541a4d/a3e66/kubernetes-components.jpg 480w,\n/static/de8dd2b080cc11fa24a2541f3e541a4d/fb816/kubernetes-components.jpg 960w,\n/static/de8dd2b080cc11fa24a2541f3e541a4d/2332f/kubernetes-components.jpg 1441w\"\n        sizes=\"(max-width: 1441px) 100vw, 1441px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>쿠버네티스를 구성하는 컴포넌트들</p></figcaption>\n  </figure></p>\n<h2 id=\"Master-Node---Control-Plane-Component\" style=\"position:relative;\">Master Node - Control Plane Component<a href=\"#Master-Node---Control-Plane-Component\" aria-label=\"Master Node   Control Plane Component permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>Master Node</strong>(마스터 노드)는 다양한 모듈의 확장성을 고려한 <strong>MSA</strong>* 방식으로 구성하였습니다. <strong>Control Plane</strong>(컨트롤 플레인) 컴포넌트는 클러스터에 관한 전반적인 결정을 수행하고 클러스터 이벤트를 감지합니다.</p>\n<ul>\n<li>MSA(Microservices Architecture, 마이크로서비스 아키텍처): 하나의 큰 애플리케이션을 여러 개의 작은 애플리케이션으로 쪼개어 변경과 조합이 가능하도록 만든 소프트웨어 개발 기법</li>\n</ul>\n<h3 id=\"kube-apiserver\" style=\"position:relative;\">kube-apiserver<a href=\"#kube-apiserver\" aria-label=\"kube apiserver permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>kube-apiserver</strong>(큐브 API 서버)는 쿠버네티스의 모든 요청을 처리하는 마스터의 핵심 컴포넌트입니다. <code>kubectl</code> <em>- 및 내부 컴포넌트 -</em> 요청을 처리합니다.  <strong>Desired State</strong>(원하는 상태)를 etcd에 저장하고 저장한 상태를 조회합니다. 요청에 대한 권한을 체크한 후 요청을 거부할 수도 있습니다. 노드에서 실행 중인 컨테이너의 로그를 보여주고 명령을 보내는 등 디버거 역할도 수행합니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1152px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f6a8ddb17eac98dc2f79d770d79a3476/4472f/kube-apiserver.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.833333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"© KT Cloud\"\n        title=\"© KT Cloud\"\n        src=\"/static/f6a8ddb17eac98dc2f79d770d79a3476/4472f/kube-apiserver.jpg\"\n        srcset=\"/static/f6a8ddb17eac98dc2f79d770d79a3476/a3e66/kube-apiserver.jpg 480w,\n/static/f6a8ddb17eac98dc2f79d770d79a3476/fb816/kube-apiserver.jpg 960w,\n/static/f6a8ddb17eac98dc2f79d770d79a3476/4472f/kube-apiserver.jpg 1152w\"\n        sizes=\"(max-width: 1152px) 100vw, 1152px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>© KT Cloud</p></figcaption>\n  </figure></p>\n<h3 id=\"etcd\" style=\"position:relative;\">etcd<a href=\"#etcd\" aria-label=\"etcd permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>etcd</strong>(/etc distributed, 엣시디)는 키-값 데이터베이스 저장소입니다. 쿠버네티스 클러스터의 구성, 서비스 검색 및 스케줄러 조정, 시스템의 실제 상태(current state)와 원하는 상태(desired state)를 저장합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f31cf2cd5ad0e8b5b2162957a4c2572b/d0f75/etcd.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.33333333333333%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/f31cf2cd5ad0e8b5b2162957a4c2572b/d0f75/etcd.jpg\"\n        srcset=\"/static/f31cf2cd5ad0e8b5b2162957a4c2572b/a3e66/etcd.jpg 480w,\n/static/f31cf2cd5ad0e8b5b2162957a4c2572b/d0f75/etcd.jpg 750w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>쿠버네티스 클러스터는 <strong>모든 데이터를 etcd에 저장</strong>합니다. <code>kubectl get &#x3C;xyz></code> 명령어 실행 시 읽을 수 있는 모든 데이터를 저장합니다. <code>kubectl create &#x3C;xyz></code> 명령어 실행 시 변경된 항목을 업데이트하고 서로에게 변경 사항을 알립니다.</p>\n<h3 id=\"kube-scheduler\" style=\"position:relative;\">kube-scheduler<a href=\"#kube-scheduler\" aria-label=\"kube scheduler permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>kube-scheduler</strong>(큐브 스케줄러)는 새로운 파드를 배포할 때 자원 할당이 가능한 노드를 선택합니다. <code>cpu</code>, <code>memory</code>, <code>affinity</code> 등의 조건을 만족하는 노드를 찾아 배포합니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1180px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/763b8d0c25c042991d39b4ddf11a0e4c/096b1/kube-scheduler.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.29166666666667%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"© KT Cloud\"\n        title=\"© KT Cloud\"\n        src=\"/static/763b8d0c25c042991d39b4ddf11a0e4c/096b1/kube-scheduler.jpg\"\n        srcset=\"/static/763b8d0c25c042991d39b4ddf11a0e4c/a3e66/kube-scheduler.jpg 480w,\n/static/763b8d0c25c042991d39b4ddf11a0e4c/fb816/kube-scheduler.jpg 960w,\n/static/763b8d0c25c042991d39b4ddf11a0e4c/096b1/kube-scheduler.jpg 1180w\"\n        sizes=\"(max-width: 1180px) 100vw, 1180px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>© KT Cloud</p></figcaption>\n  </figure></p>\n<h3 id=\"kube-controller-manager\" style=\"position:relative;\">kube-controller-manager<a href=\"#kube-controller-manager\" aria-label=\"kube controller manager permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>kube-controller-manager</strong>(큐브 컨트롤러 매니저)는 쿠버네티스 오브젝트의 상태를 관리합니다.</p>\n<h3 id=\"cloud-controller-manager\" style=\"position:relative;\">cloud-controller-manager<a href=\"#cloud-controller-manager\" aria-label=\"cloud controller manager permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>cloud-controller-manager</strong>(클라우드 컨트롤러 매니저)는 AWS, GCE, Azure 등 클라우드에 특화된 컴포넌트입니다. 노드를 추가/삭제하고 로드 밸런서를 연결하거나 볼륨을 붙일 수 있습니다.</p>\n<h2 id=\"Worker-Node---Node-Component\" style=\"position:relative;\">Worker Node - Node Component<a href=\"#Worker-Node---Node-Component\" aria-label=\"Worker Node   Node Component permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>Worker Node</strong>(워커 노드)는 마스터 노드와 통신하면서 필요한 파드를 생성합니다. 모든 노드 상에서 동작합니다.</p>\n<h3 id=\"kubelet\" style=\"position:relative;\">kubelet<a href=\"#kubelet\" aria-label=\"kubelet permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>kubelet</strong>(큐블릿)은 각 노드에서 실행하는 기본 <strong>노드 에이전트</strong>로 마스터 노드와 통신합니다. 각 노드에 할당된 파드의 생명 주기를 관리합니다. 파드 배포 시 <strong>PodSpec</strong>* 정보를 토대로 컨테이너에 이상이 없는지 확인합니다.</p>\n<ul>\n<li>PodSpec: 파드를 설명하는 YAML 또는 JSON 객체</li>\n</ul>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/64fb249616e50827644f4c195d5f68f1/ee99d/kubelet.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.87500000000001%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"© Aswin&#39;s Site\"\n        title=\"© Aswin&#39;s Site\"\n        src=\"/static/64fb249616e50827644f4c195d5f68f1/aaf92/kubelet.jpg\"\n        srcset=\"/static/64fb249616e50827644f4c195d5f68f1/a3e66/kubelet.jpg 480w,\n/static/64fb249616e50827644f4c195d5f68f1/fb816/kubelet.jpg 960w,\n/static/64fb249616e50827644f4c195d5f68f1/aaf92/kubelet.jpg 1920w,\n/static/64fb249616e50827644f4c195d5f68f1/ee99d/kubelet.jpg 2286w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>© Aswin’s Site</p></figcaption>\n  </figure></p>\n<h3 id=\"kube-proxy\" style=\"position:relative;\">kube-proxy<a href=\"#kube-proxy\" aria-label=\"kube proxy permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>kube-proxy</strong>(큐브 프록시)는 각 노드에서 실행하는 프록시로 컨테이너 서비스 포트로 접근할 수 있도록 합니다. 쿠버네티스는 클러스터 내부에 별도의 가상 네트워크를 설정하고 관리합니다.</p>\n<p>kube-proxy는 클러스터 내부 IP로 연결 요청이 들어오면 적절한 파드에 전달합니다. 네트워크를 관리하는 방법은 userspace, <strong>iptables</strong>(기본 모드), IPVS(IP Virtual Server) 3가지가 있습니다.</p>\n<h4>userspace 모드</h4>\n<p>클라이언트에서 서비스 IP를 통한 요청이 들어오면 iptables 프로그램을 거쳐 <strong>kube-proxy에 전달</strong>합니다. kube-proxy는 <strong>Round Robin</strong>* 방식에 따라 요청을 파드에 분배합니다.</p>\n<ul>\n<li>Round Robin(라운드 로빈): 프로세스들 사이에 순서대로 일정 시간 CPU를 할당하고 할당된 시간이 지나면 그 프로세스는 잠시 보류한 뒤 다른 프로세스에게 기회를 부여하는 운영 방식</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 804px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f710410b42aeaa5d3816d1737699e56c/56b8b/kube-proxy-userspace.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.875%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/f710410b42aeaa5d3816d1737699e56c/56b8b/kube-proxy-userspace.jpg\"\n        srcset=\"/static/f710410b42aeaa5d3816d1737699e56c/a3e66/kube-proxy-userspace.jpg 480w,\n/static/f710410b42aeaa5d3816d1737699e56c/56b8b/kube-proxy-userspace.jpg 804w\"\n        sizes=\"(max-width: 804px) 100vw, 804px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>kube-proxy를 거치기 때문에 파드에 요청이 실패하면 자동으로 다른 파드에 요청을 재시도합니다.</p>\n<h4>iptables 모드</h4>\n<p>클라이언트에서 서비스 IP를 통한 요청이 들어오면 iptables 프로그램을 거쳐 <strong>직접 파드에 전달</strong>합니다. kube-proxy는 API 서버 요청만 받고 클라이언트 트래픽은 받지 않기 때문에 userspace 모드보다 성능이 빠릅니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 815px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/da64f68630b76ef6ba498ecb2d0d8afa/9bf9d/kube-proxy-iptables.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/da64f68630b76ef6ba498ecb2d0d8afa/9bf9d/kube-proxy-iptables.jpg\"\n        srcset=\"/static/da64f68630b76ef6ba498ecb2d0d8afa/a3e66/kube-proxy-iptables.jpg 480w,\n/static/da64f68630b76ef6ba498ecb2d0d8afa/9bf9d/kube-proxy-iptables.jpg 815w\"\n        sizes=\"(max-width: 815px) 100vw, 815px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>kube-proxy를 거치지 않아 파드에 요청이 실패하면 재시도를 하지 않기 때문에 배포 오브젝트 설정 시 <code>readinessProbe</code> 값을 알맞게 설정해야 합니다.</p>","frontmatter":{"category":"kubernetes","index":3,"title":"Component","description":"인체를 세포로 구성한다면, 쿠버네티스는 컴포넌트로 구성합니다. 쿠버네티스를 구성하는 컴포넌트의 종류는 매우 다양하게 있어요.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/kubernetes/cover.jpg?raw=true","date":"2021-12-29"}},{"id":"20e16e74-75ec-5284-a146-ba2050e2c06a","fields":{"slug":"/kubernetes/cluster/"},"html":"<h1>🧐<br />클러스터?</h1>\n<p>쿠버네티스를 시작하기 위해 가장 먼저 해야 할 일은 <strong>Cluster</strong>(클러스터)를 생성하는 것입니다. 쿠버네티스 클러스터는 컨테이너화된 애플리케이션을 실행하는 노드의 집합입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1655px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4c1ad2ed7aa9159bccf6cab608205153/76ee5/cluster-structure.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.833333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/4c1ad2ed7aa9159bccf6cab608205153/76ee5/cluster-structure.jpg\"\n        srcset=\"/static/4c1ad2ed7aa9159bccf6cab608205153/a3e66/cluster-structure.jpg 480w,\n/static/4c1ad2ed7aa9159bccf6cab608205153/fb816/cluster-structure.jpg 960w,\n/static/4c1ad2ed7aa9159bccf6cab608205153/76ee5/cluster-structure.jpg 1655w\"\n        sizes=\"(max-width: 1655px) 100vw, 1655px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"Node\" style=\"position:relative;\">Node<a href=\"#Node\" aria-label=\"Node permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>Node</strong>(노드)는 쿠버네티스 클러스터를 구성하는 머신입니다. 머신은 클러스터 유형에 따라 가상 머신(Virtual Machine, VM) 또는 물리 머신(Physical Computer)일 수 있습니다.</p>\n<blockquote>\n<p>쿠버네티스는 클라우드, 온프레미스 환경을 모두 지원합니다. AWS, GCP, Azure 서비스에 구성하면 가상 머신, 서버 컴퓨터에 구성하면 물리 머신이 됩니다.</p>\n</blockquote>\n<p>노드에는 두 가지 종류가 있습니다.</p>\n<ul>\n<li>Master Node</li>\n<li>Worker Node</li>\n</ul>\n<h3 id=\"Master-Node\" style=\"position:relative;\">Master Node<a href=\"#Master-Node\" aria-label=\"Master Node permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>Master Node</strong>(마스터 노드)는 클러스터를 관리하는 노드입니다. 두뇌 역할을 하는 <strong>Control Plane</strong>(컨트롤 플레인)을 형성합니다. 컨트롤 플레인은 전체 쿠버네티스 시스템을 관리하고 통제합니다. 컨테이너의 라이프사이클을 정의, 배포, 관리하기 위한 API와 인터페이스를 노출하는 컨테이너를 관리합니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/862bed7d51b8a8a39ab5de426c43b63a/20801/master-node.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.333333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"마스터 노드 구조\"\n        title=\"마스터 노드 구조\"\n        src=\"/static/862bed7d51b8a8a39ab5de426c43b63a/20801/master-node.jpg\"\n        srcset=\"/static/862bed7d51b8a8a39ab5de426c43b63a/a3e66/master-node.jpg 480w,\n/static/862bed7d51b8a8a39ab5de426c43b63a/20801/master-node.jpg 720w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>마스터 노드 구조</p></figcaption>\n  </figure></p>\n<p>노란색 영역이 컨트롤 플레인입니다. 중심 컴포넌트는 RESTful 인터페이스로 쿠버네티스 기능을 제공하는 <strong>API 서버</strong>입니다. 컨트롤 플레인에 대한 자세한 정보는 Amazon EKS 워크샵의 <a href=\"https://awskrug.github.io/eks-workshop/introduction/architecture/architecture_control/\">쿠버네티스 아키텍처 - 컨트롤 플레인</a> 내용을 참조하세요.</p>\n<p>클러스터를 구성할 때 어려움을 겪는 부분이 바로 마스터 노드를 구성하는 일입니다. AWS의 경우 이와 같은 문제를 인지하고 쿠버네티스를 쉽게 사용할 수 있도록 <strong>Amazon EKS</strong> 관리형 서비스를 만들어 자체 쿠버네티스 컨트롤 플레인을 제공하고 있습니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 760px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/923a16a2fcebb4a47a34d1cd95539339/a6335/aws-eks-introduction.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.916666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AWS 공식 사이트에서 소개한 EKS 정의\"\n        title=\"AWS 공식 사이트에서 소개한 EKS 정의\"\n        src=\"/static/923a16a2fcebb4a47a34d1cd95539339/a6335/aws-eks-introduction.jpg\"\n        srcset=\"/static/923a16a2fcebb4a47a34d1cd95539339/a3e66/aws-eks-introduction.jpg 480w,\n/static/923a16a2fcebb4a47a34d1cd95539339/a6335/aws-eks-introduction.jpg 760w\"\n        sizes=\"(max-width: 760px) 100vw, 760px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>AWS 공식 사이트에서 소개한 EKS 정의</p></figcaption>\n  </figure></p>\n<p>AWS 공식 사이트에서 소개한 정의입니다. <strong>완전 관리형</strong>(fully managed)은 <strong>우리가 마스터 노드를 구성할 필요가 없다</strong>는 의미입니다. 실제로 필자도 EKS 서비스를 사용하면서 별도의 마스터 노드를 구성하지 않았습니다.</p>\n<h3 id=\"Worker-Node\" style=\"position:relative;\">Worker Node<a href=\"#Worker-Node\" aria-label=\"Worker Node permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>Worker Node</strong>(워커 노드, 작업자 노드)는 파드를 통해 실제 컨테이너 이미지를 실행하는 노드입니다. 컨테이너에 CPU, 메모리, 네트워크, 스토리지와 같은 능력을 제공하는 <strong>Data Plane</strong>(데이터 플레인)을 형성합니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6a9e7015918bae1bd3ca15dcaa6e0739/a22ce/worker-node.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.625%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"워커 노드 구조\"\n        title=\"워커 노드 구조\"\n        src=\"/static/6a9e7015918bae1bd3ca15dcaa6e0739/a22ce/worker-node.jpg\"\n        srcset=\"/static/6a9e7015918bae1bd3ca15dcaa6e0739/a3e66/worker-node.jpg 480w,\n/static/6a9e7015918bae1bd3ca15dcaa6e0739/a22ce/worker-node.jpg 680w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>워커 노드 구조</p></figcaption>\n  </figure></p>\n<p>EKS 서비스로 구성한 쿠버네티스의 워커 노드는 <strong>EC2 인스턴스</strong>로 실행합니다. 워커 노드는 줄여서 <strong>노드</strong>로 부르기도 합니다. Amazon EKS 서비스에서 <strong>노드와 인스턴스는 같은 의미</strong>입니다. 다음 명령어는 클러스터 노드를 조회합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>$ kubectl get nodes</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/55e7e4511cd23fa646765a5a00a16687/396d0/terminal-kubectl-get-nodes.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.333333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/55e7e4511cd23fa646765a5a00a16687/396d0/terminal-kubectl-get-nodes.jpg\"\n        srcset=\"/static/55e7e4511cd23fa646765a5a00a16687/a3e66/terminal-kubectl-get-nodes.jpg 480w,\n/static/55e7e4511cd23fa646765a5a00a16687/396d0/terminal-kubectl-get-nodes.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>클러스터에 2개의 EC2 인스턴스 노드를 실행하고 있습니다. 노드의 이름은 <code>&#x3C;private-IPv4-address>.&#x3C;region>.compute.internal</code> 형식으로 구성합니다.</p>\n<p>데이터 플레인에 대한 자세한 정보는 Amazon EKS 워크샵의 <a href=\"https://awskrug.github.io/eks-workshop/introduction/architecture/architecture_worker/\">쿠버네티스 아키텍처 - 데이터 플레인</a> 내용을 참조하세요.</p>","frontmatter":{"category":"kubernetes","index":2,"title":"Cluster","description":"회사 쿠버네티스를 설립하고 직원들을 수용할 사무실 클러스터를 매입하였습니다. 사무실은 임원진 구역인 마스터 노드와 직원 구역인 워커 노드로 나누어 관리하려고 합니다. 임원진은 컨설팅 업체 EKS에 자문을 구하면 1시간 안에 구성할 수 있어요.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/kubernetes/cover.jpg?raw=true","date":"2021-12-27"}},{"id":"6a5d51f5-1934-5277-a08c-452362b09e93","fields":{"slug":"/docker/introduction/"},"html":"<h1>시작하기</h1>\n<blockquote>\n<p>노마드 코더의 <a href=\"https://youtu.be/chnCcGCTyBg\">도커가 좋은 이유</a> 영상의 내용을 재구성한 글입니다. 영어지만 자막을 제공하는 Red Hat의 <a href=\"https://youtu.be/n-JwAM6XF88\">왜 컨테이너인가?</a> 영상도 있습니다.</p>\n</blockquote>\n<p><strong>Docker</strong>(도커)는 <strong>컨테이너 기반의 오픈 소스 가상화 플랫폼</strong>입니다. 컨테이너 기반이라는 말이 무엇일까요? 우리는 보통 컨테이너를 어떤 물체를 격리하는 공간으로 생각합니다. IT에서 의미하는 <strong>Container</strong>(컨테이너)는 <strong>격리된 공간에서 프로세스가 동작하는 가상화 기술</strong>입니다. 또는 소프트웨어와 그것에 종속된 모든 것을 포함하는 가볍고 휴대성이 높은 실행 가능한 이미지를 의미합니다.</p>\n<p>컨테이너는 <strong>Environment Disparity</strong>(환경 차이)를 해결합니다. 다음 몇 가지 <strong>예시</strong>를 살펴보면 이해할 수 있습니다.</p>\n<h3 id=\"예시-1\" style=\"position:relative;\">예시 1<a href=\"#%EC%98%88%EC%8B%9C-1\" aria-label=\"예시 1 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>당신은 불금 저녁에 개발을 하고 있습니다. 그리고 코드를 서버에 올리기만 하면 되는 상황에 있습니다. 일은 거의 다 끝났고 저녁에 친구들이랑 삼겹살만 먹으면 되는데, 이상하게 코드가 서버에만 올리면 작동을 하지 않는 겁니다. 이유인즉 로컬은 윈도우, 서버는 리눅스였습니다. 운영 체제가 다르기 때문에 서버에 올리기 전까지는 알 수도 없고 해결할 수도 없는 오류입니다. 안타깝지만 당신은 <em>- 오류를 해결할 때까지 -</em> 집에 있어야 합니다.</p>\n<blockquote>\n<p>필자도 위와 같은 문제를 경험한 적이 있습니다. 그래서 환경 차이로 인한 오류를 방지하려면 최대한 서버 환경과 동일하게 로컬 환경을 구성할 수밖에 없었습니다.</p>\n</blockquote>\n<h3 id=\"예시-2\" style=\"position:relative;\">예시 2<a href=\"#%EC%98%88%EC%8B%9C-2\" aria-label=\"예시 2 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>당신은 최신 <code>Node.js</code> 버전으로 개발을 하고 있고, 서버는 한참이나 이전 버전입니다. 개발을 마치고 서버에 올리는 순간! 역시나 서버에만 올리면 모듈 설치에 실패하는 겁니다. 노드 버전 차이의 문제를 직감하고 허겁지겁 로컬에 있는 노드 버전을 낮췄습니다. 서버가 하나 더 있네요. 맙소사! 여기는 노드를 설치하지 않았습니다. 허겁지겁 최신 버전으로 설치하고 올리는 순간! 이번에는 최신 버전이라서 오류가 발생합니다.</p>\n<blockquote>\n<p>개발자는 코드만 열심히 작성하면 된다고 생각한 필자는 버전의 늪에 빠지는 순간 하루 종일 괴로운 숫자 맞추기 놀이를 하고 있었습니다. 💀</p>\n</blockquote>\n<p>도커가 환경 차이를 해결하는 방법은 간단합니다. ① 도커를 로컬과 서버에 설치합니다. ② <code>Dockerfile</code> 이름으로 파일을 생성하고 그 안에 구현하고 싶은 환경을 정의합니다. (<code>Node.js</code>, <code>Java</code>, <code>Go</code>, <code>Python</code>, <code>Git</code> 등) ③ 도커는 파일의 내용을 읽고 필요한 모듈을 다운로드합니다. ④ 도커는 당신이 설정한 환경과 비슷한 <strong>가상 컨테이너</strong>를 만들어 냅니다. ⑤ 로컬과 서버는 <strong>동일한 환경</strong>이 됩니다.</p>\n<p>도커 컨테이너들은 <strong>독립적</strong>이기 때문에 서버 하나에 컨테이너 여러 개를 가질 수 있습니다. (<code>Node.js</code> 컨테이너, <code>Java</code> 컨테이너, <code>Go</code> 컨테이너 등) 서버에 환경을 설정하는 것이 아닌 컨테이너에 설정하는 것이죠.</p>\n<h3 id=\"예시-3\" style=\"position:relative;\">예시 3<a href=\"#%EC%98%88%EC%8B%9C-3\" aria-label=\"예시 3 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>당신이 만든 앱이 입소문을 타기 시작합니다. 트래픽을 감당할 수 없을 정도로 접속자가 많아져서 서버를 몇 개 더 만들었습니다. 트래픽에 의한 오류를 발견해서 수정하고 서버에 올려야 하는데, 여러 개라서 시간이 걸리네요. 잠깐, 방금 몇 번 서버에 반영했는지 정신줄을 놓치고 말았습니다.</p>\n<p>도커를 사용하면 간단합니다. 하나의 서버에 원하는 수만큼 컨테이너를 복제하면 됩니다. 트래픽이 줄어들면? 컨테이너 수를 줄이면 됩니다. 매번 새로운 서비스를 만들 때마다 새로운 서버를 생성할 필요가 없습니다. 당신이 원할 때마다 도커로 새로운 환경을 생성할 수 있습니다.</p>\n<h2 id=\"정리\" style=\"position:relative;\">정리<a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>도커는 <strong>격리된 가상화 공간</strong>을 만듭니다. ① 원하는 개발 환경을 <code>Dockerfile</code>에 저장하면 도커는 당신이 원하는 환경을 만듭니다. ② 컨테이너는 독립적으로 작용하기 때문에 모듈식으로 관리할 수 있습니다.</p>","frontmatter":{"category":"docker","index":1,"title":"Docker 소개","description":"Docker(도커)는 컨테이너 기반의 가상화 플랫폼으로 Environment Disparity(환경 차이)를 해결합니다. 다음 몇 가지 예시를 살펴보면 이해할 수 있습니다.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/docker/cover.jpg?raw=true","date":"2021-12-26"}},{"id":"375e2b29-1b27-5ed0-afab-d2b66d983863","fields":{"slug":"/kubernetes/introduction/"},"html":"<h1>시작하기</h1>\n<blockquote>\n<p>노마드 코더의 <a href=\"https://youtu.be/S3FVcdZcZnA\">쿠버네티스가 대세가 된 이유 3가지</a> 영상의 내용을 재구성한 글입니다. 자세한 정보는 <a href=\"https://kubernetes.io/ko/docs/concepts/overview/what-is-kubernetes/\">쿠버네티스 공식 문서</a> 내용을 참조하세요.</p>\n</blockquote>\n<p><strong>Kubernetes</strong>(쿠버네티스)는 구글이 만든 컨테이너화된 애플리케이션을 자동으로 배포, 스케일링 및 관리하는 <strong>오픈 소스 컨테이너 관리 플랫폼</strong>입니다. 줄여서 K8s(케이츠, 케이에이츠) 또는 Kube(큐브)로 부릅니다. 구글이 설립한 <a href=\"https://www.cncf.io/\">CNCF</a><small>(Cloud Native Computing Foundation, 클라우드 네이티브 컴퓨팅 재단)</small>의 졸업 단계 프로젝트에 속한다고 하네요.</p>\n<p>시작하기 전 <strong>Docker</strong>(도커)와 <strong>Container</strong>(컨테이너)에 대한 사전 학습이 필요합니다. 도커와 컨테이너를 잘 모른다면 <a href=\"/docker/introduction\">여기</a>부터 시작하세요.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1320px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0806c967113912fe828a7fcd4ce39b75/9ef87/kubernetes-introduction.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.625%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"쿠버네티스 공식 사이트에서 소개한 정의\"\n        title=\"쿠버네티스 공식 사이트에서 소개한 정의\"\n        src=\"/static/0806c967113912fe828a7fcd4ce39b75/9ef87/kubernetes-introduction.jpg\"\n        srcset=\"/static/0806c967113912fe828a7fcd4ce39b75/a3e66/kubernetes-introduction.jpg 480w,\n/static/0806c967113912fe828a7fcd4ce39b75/fb816/kubernetes-introduction.jpg 960w,\n/static/0806c967113912fe828a7fcd4ce39b75/9ef87/kubernetes-introduction.jpg 1320w\"\n        sizes=\"(max-width: 1320px) 100vw, 1320px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>쿠버네티스 공식 사이트에서 소개한 정의</p></figcaption>\n  </figure></p>\n<p><strong>운영 수준의 컨테이너 오케스트레이션</strong> 제목부터 진입 장벽이 느껴지는 건 기분 탓이겠죠? 마치 쿠버네티스가 입구에서부터 ‘이 정의를 이해하는 분만 들어오세요.’ 경고하는 것처럼 보입니다. 하지만 당황하지 마세요! 쿠버네티스는 결국 <strong>컨테이너를 관리하기 위한 툴</strong>입니다. 다음 몇 가지 <strong>예시</strong>를 살펴보면 이해할 수 있습니다.</p>\n<h3 id=\"예시-1\" style=\"position:relative;\">예시 1<a href=\"#%EC%98%88%EC%8B%9C-1\" aria-label=\"예시 1 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<blockquote>\n<p>만약 당신이 개발한 웹 사이트를 도커 컨테이너 안에 넣고 AWS(아마존 웹 서비스)에 배포하는 작업만 수행한다면 쿠버네티스를 알아야 할 이유가 없습니다. 도커를 업로드하고 배포하는 일이 전부이기 때문입니다.</p>\n</blockquote>\n<p>쿠버네티스는 여러 개의 컨테이너를 다룰 때 쓰입니다. <strong>MSA</strong>* 서비스를 개발한다고 가정해 봅시다. 어떤 컨테이너는 이용자 등록만 다루고, 어떤 컨테이너는 인증만 다루고, 어떤 컨테이너는 결제만 다룬다면 이 모든 컨테이너들은 동시에 업로드가 이루어져야 합니다.</p>\n<ul>\n<li>MSA(Microservices Architecture, 마이크로서비스 아키텍처): 하나의 큰 애플리케이션을 여러 개의 작은 애플리케이션으로 쪼개어 변경과 조합이 가능하도록 만든 소프트웨어 개발 기법</li>\n</ul>\n<p>수동으로 배포하면 된다고 생각하겠지만 컨테이너 수가 많아지면 문제가 발생할 수 있습니다. 만약 서비스의 핵심 파트인 컨테이너가 죽었다면? 우리는 재빠르게 해당 컨테이너를 재시작해야 합니다.</p>\n<p>바로 이때 쿠버네티스가 등장합니다! 쿠버네티스에게 해당 컨테이너를 작동할 수 있도록 권한을 부여하세요. 쿠버네티스는 그 중 하나라도 죽으면 낼름 재시작합니다. -> <strong>자동화된 복구</strong></p>\n<p>쿠버네티스는 실패한 컨테이너를 재시작하고, 컨테이너를 교체하며, ‘사용자 정의 상태 검사’에 응답하지 않는 컨테이너를 죽이고, 서비스 준비가 끝날 때까지 그러한 과정을 클라이언트에 보여주지 않습니다.</p>\n<p>바로 <strong>컨테이너 모니터링</strong>을 실시하는 것입니다. 자동으로 재시작하기 때문에 걱정을 한시름 놓을 수 있습니다. 컨테이너가 많으면 많을수록 쿠버네티스는 더 유용하게 쓰일 것입니다.</p>\n<h3 id=\"예시-2\" style=\"position:relative;\">예시 2<a href=\"#%EC%98%88%EC%8B%9C-2\" aria-label=\"예시 2 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>1만 명의 이용자가 접속을 시도합니다. 하지만 당신은 이러한 경우에 대한 대비를 하지 않았습니다. 이때 쿠버네티스는 해당 웹 사이트의 니즈를 수용할 수 있도록 자동으로 새로운 컨테이너를 만들 수 있습니다. -> <strong>서비스 디스커버리와 로드 밸런싱</strong></p>\n<p>쿠버네티스는 DNS 이름을 사용하거나 자체 IP 주소를 사용하여 컨테이너를 노출합니다. 컨테이너에 대한 트래픽이 많아지면 쿠버네티스는 네트워크 트래픽을 로드밸런싱하여 배포가 안정적으로 이루어질 수 있도록 합니다.</p>\n<p>쿠버네티스는 자동으로 해당 웹 니즈에 맞춰서 컨테이너들을 준비하고 사람들이 떠나고 니즈가 줄어들면 컨테이너를 지정한 최소 숫자로 자동 조정합니다.</p>\n<h3 id=\"예시-3\" style=\"position:relative;\">예시 3<a href=\"#%EC%98%88%EC%8B%9C-3\" aria-label=\"예시 3 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>클라우드에 5개의 컨테이너가 있습니다. 코드를 수정하여 새로운 버전이 나왔습니다. 이때 당신은 어떻게 작업하나요? <em>- 아마도 -</em>  컨테이너들을 종료하고 새로운 버전을 올리고 컨테이너들을 재시작할 것입니다. 작업을 실행하는 동안 웹 사이트가 잠시 다운된다는 의미이기도 합니다.</p>\n<p>쿠버네티스는 컨테이너의 신규 버전을 차례대로 업데이트 처리합니다. 쿠버네티스를 자동화해서 배포용 새 컨테이너를 만들고, 기존 컨테이너를 제거하고, 모든 리소스를 새 컨테이너에 적용합니다. 물론 그러한 과정을 클라이언트에 보여주지 않습니다. -> <strong>자동화된 롤아웃</strong></p>\n<h2 id=\"정리\" style=\"position:relative;\">정리<a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>컨테이너로 작업하면 자동화해야 할 것들이 은근히 많습니다. (새로운 버전을 배포한다거나, 컨테이너 사이즈를 조정한다거나, 컨테이너가 죽었을 때 재시작해야 한다거나 등) 쿠버네티스는 많은 컨테이너가 필요한 웹/앱 서비스를 운영하는 데 있어 훌륭한 솔루션입니다.</p>","frontmatter":{"category":"kubernetes","index":1,"title":"Kubernetes 소개","description":"Kubernetes(쿠버네티스)는 컨테이너를 관리하기 위한 툴입니다. 다음 몇 가지 예시를 살펴보면 이해할 수 있습니다.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/kubernetes/cover.jpg?raw=true","date":"2021-12-26"}},{"id":"cf389a5a-6187-5fa9-a410-b0d81b95f2b4","fields":{"slug":"/developer/wakatime-vs-codetime/"},"html":"<h1>🙋🏻🗓<br />한 주 동안 무엇을 개발했어요?</h1>\n<p>정신없이 개발하느라 시간은 쏜살같이 지나간 것 같은데 갑자기 <mark>‘한 주 동안 무엇을 개발했지?’</mark> 궁금해질 때가 있습니다. 프로젝트는 몇 개 작업했는지, 각 프로젝트마다 투자한 시간은 몇 분인지, 주로 작업한 파일은 무엇인지 등등…</p>\n<p>커밋 이력으로는 부족합니다. 커밋하기 전 로컬 환경에서 이루어진 수많은 삽질의 시간까지는 알 수가 없으니까요. 여러분도 오롯이 개발에 투자한 시간 동안 무엇을 개발했는지 한 번쯤은 궁금하지 않을까요?</p>\n<h2 id=\"WakaTime\" style=\"position:relative;\">WakaTime<a href=\"#WakaTime\" aria-label=\"WakaTime permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>며칠 전, 팀 동료가 슬랙으로 재밌는 플러그인을 공유했습니다. 그 이름은 바로 <a href=\"https://github.com/wakatime/vscode-wakatime\">WakaTime(와카타임)</a>. 이 플러그인은 개발하는 동안 메트릭을 수집해서 대시보드로 통계를 내는 일을 합니다. (물론 그 대시보드는 여러분만 볼 수 있어요.) 너무나도 유명해서 대부분의 에디터에 플러그인을 지원한다고 하네요. 저는 VS Code에서 냉큼 검색해 봤습니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8f95c0df8caa980e4acd1a2bd509351c/8102f/search-wakatime-extension-in-vscode.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.375%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"VS Code에서 WakaTime 익스텐션 검색하기\"\n        title=\"VS Code에서 WakaTime 익스텐션 검색하기\"\n        src=\"/static/8f95c0df8caa980e4acd1a2bd509351c/8102f/search-wakatime-extension-in-vscode.jpg\"\n        srcset=\"/static/8f95c0df8caa980e4acd1a2bd509351c/a3e66/search-wakatime-extension-in-vscode.jpg 480w,\n/static/8f95c0df8caa980e4acd1a2bd509351c/8102f/search-wakatime-extension-in-vscode.jpg 512w\"\n        sizes=\"(max-width: 512px) 100vw, 512px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>VS Code에서 WakaTime 익스텐션 검색하기</p></figcaption>\n  </figure></p>\n<p>시간을 다루는 플러그인이라 아이콘이 🕙 시계 모양입니다. 아이콘 디자인에는 큰 에너지를 쏟지 않은 듯 합니다. 와카! 내 시간을 관리해 줘! 주문을 외우고 설치를 시작했습니다. <small>(wa로 시작해서 그런지 와디즈스러워서 정들었..)</small></p>\n<h3 id=\"API-Key\" style=\"position:relative;\">API Key<a href=\"#API-Key\" aria-label=\"API Key permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>설치를 마치면 <strong>API Key</strong>를 입력해야 하는데요, API Key는 <strong><a href=\"https://wakatime.com/api-key\">여기</a></strong>에서 만들면 됩니다. 보통 설치 직후 바로 API Key를 입력하라는 프롬프트가 뜨는데 그렇지 않을 경우 <code>⌘ + Shift + P</code> - WakaTime API Key 단어를 검색해 보세요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9dc4073a99d3c1a094025cbae250b702/fb816/wakatime-api-key.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 10%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/9dc4073a99d3c1a094025cbae250b702/fb816/wakatime-api-key.jpg\"\n        srcset=\"/static/9dc4073a99d3c1a094025cbae250b702/a3e66/wakatime-api-key.jpg 480w,\n/static/9dc4073a99d3c1a094025cbae250b702/fb816/wakatime-api-key.jpg 960w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7dc4ed68b025315a1545829d8421e99c/a73e1/wakatime-your-secret-api-key.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.83333333333334%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/7dc4ed68b025315a1545829d8421e99c/aaf92/wakatime-your-secret-api-key.jpg\"\n        srcset=\"/static/7dc4ed68b025315a1545829d8421e99c/a3e66/wakatime-your-secret-api-key.jpg 480w,\n/static/7dc4ed68b025315a1545829d8421e99c/fb816/wakatime-your-secret-api-key.jpg 960w,\n/static/7dc4ed68b025315a1545829d8421e99c/aaf92/wakatime-your-secret-api-key.jpg 1920w,\n/static/7dc4ed68b025315a1545829d8421e99c/a73e1/wakatime-your-secret-api-key.jpg 2458w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"Dashboard\" style=\"position:relative;\">Dashboard<a href=\"#Dashboard\" aria-label=\"Dashboard permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>짝짝짝 👏👏👏 !!! 설정을 완료하였습니다. 이제 개발을 시작하세요. 대략 반나절 정도 지나면 대시보드에서 수집된 메트릭을 확인할 수 있습니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4cc515a84de7b587d712a889d6ddcd2c/998db/wakatime-dashboard.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.83333333333334%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"5시간 10분 5초 동안 개발한 나의 대시보드\"\n        title=\"5시간 10분 5초 동안 개발한 나의 대시보드\"\n        src=\"/static/4cc515a84de7b587d712a889d6ddcd2c/aaf92/wakatime-dashboard.jpg\"\n        srcset=\"/static/4cc515a84de7b587d712a889d6ddcd2c/a3e66/wakatime-dashboard.jpg 480w,\n/static/4cc515a84de7b587d712a889d6ddcd2c/fb816/wakatime-dashboard.jpg 960w,\n/static/4cc515a84de7b587d712a889d6ddcd2c/aaf92/wakatime-dashboard.jpg 1920w,\n/static/4cc515a84de7b587d712a889d6ddcd2c/1d134/wakatime-dashboard.jpg 2880w,\n/static/4cc515a84de7b587d712a889d6ddcd2c/998db/wakatime-dashboard.jpg 3072w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>5시간 10분 5초 동안 개발한 나의 대시보드</p></figcaption>\n  </figure></p>\n<h3 id=\"Goals\" style=\"position:relative;\">Goals<a href=\"#Goals\" aria-label=\"Goals permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>대시보드만 확인하면 재미가 없겠죠? WakaTime의 치트 키! <strong>목표</strong>를 설정해 보세요. ① 총 개발 시간, ② 특정 프로젝트 개발 시간, ③ 특정 언어 개발 시간, ④ 특정 에디터 개발 시간 이렇게 4가지 기준으로 세분화해서 설정 가능합니다.</p>\n<div style=\"position: relative; padding-bottom: 57.23370429252782%; height: 0;\"><iframe src=\"https://www.loom.com/embed/5850d8deddfd4d9ab730592a77191fe8\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%;\"></iframe></div>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b2d3182dab6c6bca7e8c0a4c90a34edc/998db/wakatime-goal.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.83333333333334%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"목표는 찬란하게, 실행은 초라하게\"\n        title=\"목표는 찬란하게, 실행은 초라하게\"\n        src=\"/static/b2d3182dab6c6bca7e8c0a4c90a34edc/aaf92/wakatime-goal.jpg\"\n        srcset=\"/static/b2d3182dab6c6bca7e8c0a4c90a34edc/a3e66/wakatime-goal.jpg 480w,\n/static/b2d3182dab6c6bca7e8c0a4c90a34edc/fb816/wakatime-goal.jpg 960w,\n/static/b2d3182dab6c6bca7e8c0a4c90a34edc/aaf92/wakatime-goal.jpg 1920w,\n/static/b2d3182dab6c6bca7e8c0a4c90a34edc/1d134/wakatime-goal.jpg 2880w,\n/static/b2d3182dab6c6bca7e8c0a4c90a34edc/998db/wakatime-goal.jpg 3072w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>목표는 찬란하게, 실행은 초라하게</p></figcaption>\n  </figure></p>\n<h3 id=\"Upgrade\" style=\"position:relative;\">Upgrade<a href=\"#Upgrade\" aria-label=\"Upgrade permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>Premium 버전으로 업그레이드하면 다음과 같이 확장된 서비스와 Teams 메뉴까지 사용할 수 있지만 개인적으로 사용할 때는 무료 버전만 사용해도 충분합니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/04df06a65963850088517288fddabd85/998db/wakatime-upgrade.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.83333333333334%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"팀에서 사용하면 뭔가 감시할 것 같은 👀\"\n        title=\"팀에서 사용하면 뭔가 감시할 것 같은 👀\"\n        src=\"/static/04df06a65963850088517288fddabd85/aaf92/wakatime-upgrade.jpg\"\n        srcset=\"/static/04df06a65963850088517288fddabd85/a3e66/wakatime-upgrade.jpg 480w,\n/static/04df06a65963850088517288fddabd85/fb816/wakatime-upgrade.jpg 960w,\n/static/04df06a65963850088517288fddabd85/aaf92/wakatime-upgrade.jpg 1920w,\n/static/04df06a65963850088517288fddabd85/1d134/wakatime-upgrade.jpg 2880w,\n/static/04df06a65963850088517288fddabd85/998db/wakatime-upgrade.jpg 3072w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>팀에서 사용하면 뭔가 감시할 것 같은 👀</p></figcaption>\n  </figure></p>\n<h2 id=\"CodeTime\" style=\"position:relative;\">CodeTime<a href=\"#CodeTime\" aria-label=\"CodeTime permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>VS Code에서 검색하면 같이 나오는 후발 주자 플러그인으로 사용 방법은 WakaTime과 비슷합니다. CodeTime은 API Key 대신 <strong>Token</strong>이라는 용어를 사용합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ab525751da0de73d3848e977dd9571c1/998db/codetime-account.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/ab525751da0de73d3848e977dd9571c1/aaf92/codetime-account.jpg\"\n        srcset=\"/static/ab525751da0de73d3848e977dd9571c1/a3e66/codetime-account.jpg 480w,\n/static/ab525751da0de73d3848e977dd9571c1/fb816/codetime-account.jpg 960w,\n/static/ab525751da0de73d3848e977dd9571c1/aaf92/codetime-account.jpg 1920w,\n/static/ab525751da0de73d3848e977dd9571c1/1d134/codetime-account.jpg 2880w,\n/static/ab525751da0de73d3848e977dd9571c1/998db/codetime-account.jpg 3072w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>근데 보시다시피 지원하는 에디터가 많지 않습니다. 지원하는 에디터가 늘어나더라도 WakaTime이 지원하는 에디터가 압도적으로 많아서 이 부분은 WakaTime을 넘어설 수 없을 것 같아요.</p>\n<h3 id=\"Overview\" style=\"position:relative;\">Overview<a href=\"#Overview\" aria-label=\"Overview permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>CodeTime은 총 개발 시간, 가장 많이 사용한 언어, 에디터, 플랫폼 등을 각 그래프 상단에 정리해서 보여주는 Overview 화면을 제공합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d886ec5b94341c9a720f4a8134e415c0/998db/codetime-overview.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/d886ec5b94341c9a720f4a8134e415c0/aaf92/codetime-overview.jpg\"\n        srcset=\"/static/d886ec5b94341c9a720f4a8134e415c0/a3e66/codetime-overview.jpg 480w,\n/static/d886ec5b94341c9a720f4a8134e415c0/fb816/codetime-overview.jpg 960w,\n/static/d886ec5b94341c9a720f4a8134e415c0/aaf92/codetime-overview.jpg 1920w,\n/static/d886ec5b94341c9a720f4a8134e415c0/1d134/codetime-overview.jpg 2880w,\n/static/d886ec5b94341c9a720f4a8134e415c0/998db/codetime-overview.jpg 3072w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"Dashboard-1\" style=\"position:relative;\">Dashboard<a href=\"#Dashboard-1\" aria-label=\"Dashboard 1 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p>중간에 재밌는 그래프가 하나 있습니다. <strong>Programming time per hour</strong>, 1시간에 몇 분 집중하고 몇 분 쉬는지 알 수 있는 그래프입니다. 여러분의 개발 패턴을 고스란히 알 수 있으니 한번 살펴보세요.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8e59986a47d8a478e417078b13151126/998db/codetime-dashboard.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 117.08333333333334%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/8e59986a47d8a478e417078b13151126/aaf92/codetime-dashboard.jpg\"\n        srcset=\"/static/8e59986a47d8a478e417078b13151126/a3e66/codetime-dashboard.jpg 480w,\n/static/8e59986a47d8a478e417078b13151126/fb816/codetime-dashboard.jpg 960w,\n/static/8e59986a47d8a478e417078b13151126/aaf92/codetime-dashboard.jpg 1920w,\n/static/8e59986a47d8a478e417078b13151126/1d134/codetime-dashboard.jpg 2880w,\n/static/8e59986a47d8a478e417078b13151126/998db/codetime-dashboard.jpg 3072w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"결론\" style=\"position:relative;\">결론<a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>지원하는 에디터도 다양하고 목표도 설정할 수 있는 WakaTime을 사용해 보세요. CodeTime에 비해 업데이트 주기도 짧아서 안정성도 높고 새로운 기능 또한 빠르게 접할 수 있을 거예요.</p>","frontmatter":{"category":"developer","index":1,"title":"WakaTime vs CodeTime 🕖","description":"이 플러그인은 애플 워치처럼 내 개발 활동을 스마트하게 측정합니다. 대시보드 형태로 한눈에 확인할 수 있어요.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/developer/wakatime-vs-codetime/cover.jpg?raw=true","date":"2021-12-23"}},{"id":"cb9a65c4-672b-52e9-98b2-441daf7049b0","fields":{"slug":"/monologue/concerns-and-insights/"},"html":"","frontmatter":{"category":"monologue","index":1,"title":"프론트엔드를 개발하며 마주했던 치열한 고민과 인사이트 🙋🏻‍♀️","description":"새로운 기술을 매번 익혀야 하는지, 잘한다는 개발자의 블로그, 깃허브를 자주 보면 되는지, 무엇을 해야 좋은 프론트엔드 개발자가 될 수 있을지 늘 고민이 됩니다.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/monologue/concerns-and-insights/cover.jpg?raw=true","date":"2021-12-20"}}]}}}