{
    "componentChunkName": "component---src-components-template-post-template-tsx",
    "path": "/post/kubernetes/cluster/",
    "result": {"data":{"site":{"siteMetadata":{"title":"AROUNDUS"}},"markdownRemark":{"id":"20e16e74-75ec-5284-a146-ba2050e2c06a","fields":{"slug":"/post/kubernetes/cluster/"},"html":"<h1>🧐<br />클러스터?</h1>\n<p>쿠버네티스를 시작하기 위해 가장 먼저 해야 할 일은 <strong>Cluster</strong>(클러스터)를 생성하는 것입니다. 쿠버네티스 클러스터는 컨테이너화된 애플리케이션을 실행하는 노드의 집합입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1655px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4c1ad2ed7aa9159bccf6cab608205153/76ee5/cluster-structure.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.833333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/4c1ad2ed7aa9159bccf6cab608205153/76ee5/cluster-structure.jpg\"\n        srcset=\"/static/4c1ad2ed7aa9159bccf6cab608205153/a3e66/cluster-structure.jpg 480w,\n/static/4c1ad2ed7aa9159bccf6cab608205153/fb816/cluster-structure.jpg 960w,\n/static/4c1ad2ed7aa9159bccf6cab608205153/76ee5/cluster-structure.jpg 1655w\"\n        sizes=\"(max-width: 1655px) 100vw, 1655px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"Node\" style=\"position:relative;\">Node<a href=\"#Node\" aria-label=\"Node permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>Node</strong>(노드)는 쿠버네티스 클러스터를 구성하는 머신입니다. 머신은 클러스터 유형에 따라 가상 머신(Virtual Machine, VM) 또는 물리 머신(Physical Computer)일 수 있습니다.</p>\n<blockquote>\n<p>쿠버네티스는 클라우드, 온프레미스 환경을 모두 지원합니다. AWS, GCP, Azure 서비스에 구성하면 가상 머신, 서버 컴퓨터에 구성하면 물리 머신이 됩니다.</p>\n</blockquote>\n<p>노드에는 두 가지 종류가 있습니다.</p>\n<ul>\n<li>Master Node</li>\n<li>Worker Node</li>\n</ul>\n<h3 id=\"Master-Node\" style=\"position:relative;\">Master Node<a href=\"#Master-Node\" aria-label=\"Master Node permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>Master Node</strong>(마스터 노드)는 클러스터를 관리하는 노드입니다. 두뇌 역할을 하는 <strong>Control Plane</strong>(컨트롤 플레인)을 형성합니다. 컨트롤 플레인은 전체 쿠버네티스 시스템을 관리하고 통제합니다. 컨테이너의 라이프사이클을 정의, 배포, 관리하기 위한 API와 인터페이스를 노출하는 컨테이너를 관리합니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/862bed7d51b8a8a39ab5de426c43b63a/20801/master-node.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.333333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"마스터 노드 구조\"\n        title=\"마스터 노드 구조\"\n        src=\"/static/862bed7d51b8a8a39ab5de426c43b63a/20801/master-node.jpg\"\n        srcset=\"/static/862bed7d51b8a8a39ab5de426c43b63a/a3e66/master-node.jpg 480w,\n/static/862bed7d51b8a8a39ab5de426c43b63a/20801/master-node.jpg 720w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>마스터 노드 구조</p></figcaption>\n  </figure></p>\n<p>노란색 영역이 컨트롤 플레인입니다. 중심 컴포넌트는 RESTful 인터페이스로 쿠버네티스 기능을 제공하는 <strong>API 서버</strong>입니다. 컨트롤 플레인에 대한 자세한 정보는 Amazon EKS 워크샵의 <a href=\"https://awskrug.github.io/eks-workshop/introduction/architecture/architecture_control/\">쿠버네티스 아키텍처 - 컨트롤 플레인</a> 내용을 참조하세요.</p>\n<p>클러스터를 구성할 때 어려움을 겪는 부분이 바로 마스터 노드를 구성하는 일입니다. AWS의 경우 이와 같은 문제를 인지하고 쿠버네티스를 쉽게 사용할 수 있도록 <strong>Amazon EKS</strong> 관리형 서비스를 만들어 자체 쿠버네티스 컨트롤 플레인을 제공하고 있습니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 760px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/923a16a2fcebb4a47a34d1cd95539339/a6335/aws-eks-introduction.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.916666666666664%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AWS 공식 사이트에서 소개한 EKS 정의\"\n        title=\"AWS 공식 사이트에서 소개한 EKS 정의\"\n        src=\"/static/923a16a2fcebb4a47a34d1cd95539339/a6335/aws-eks-introduction.jpg\"\n        srcset=\"/static/923a16a2fcebb4a47a34d1cd95539339/a3e66/aws-eks-introduction.jpg 480w,\n/static/923a16a2fcebb4a47a34d1cd95539339/a6335/aws-eks-introduction.jpg 760w\"\n        sizes=\"(max-width: 760px) 100vw, 760px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>AWS 공식 사이트에서 소개한 EKS 정의</p></figcaption>\n  </figure></p>\n<p>AWS 공식 사이트에서 소개한 정의입니다. <strong>완전 관리형</strong>(fully managed)은 <strong>우리가 마스터 노드를 구성할 필요가 없다</strong>는 의미입니다. 실제로 필자도 EKS 서비스를 사용하면서 별도의 마스터 노드를 구성하지 않았습니다.</p>\n<h3 id=\"Worker-Node\" style=\"position:relative;\">Worker Node<a href=\"#Worker-Node\" aria-label=\"Worker Node permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>Worker Node</strong>(워커 노드, 작업자 노드)는 파드를 통해 실제 컨테이너 이미지를 실행하는 노드입니다. 컨테이너에 CPU, 메모리, 네트워크, 스토리지와 같은 능력을 제공하는 <strong>Data Plane</strong>(데이터 플레인)을 형성합니다.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6a9e7015918bae1bd3ca15dcaa6e0739/a22ce/worker-node.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.625%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"워커 노드 구조\"\n        title=\"워커 노드 구조\"\n        src=\"/static/6a9e7015918bae1bd3ca15dcaa6e0739/a22ce/worker-node.jpg\"\n        srcset=\"/static/6a9e7015918bae1bd3ca15dcaa6e0739/a3e66/worker-node.jpg 480w,\n/static/6a9e7015918bae1bd3ca15dcaa6e0739/a22ce/worker-node.jpg 680w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>워커 노드 구조</p></figcaption>\n  </figure></p>\n<p>EKS 서비스로 구성한 쿠버네티스의 워커 노드는 <strong>EC2 인스턴스</strong>로 실행합니다. 워커 노드는 줄여서 <strong>노드</strong>로 부르기도 합니다. Amazon EKS 서비스에서 <strong>노드와 인스턴스는 같은 의미</strong>입니다. 다음 명령어는 클러스터 노드를 조회합니다.</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"62917757771989980000\"\n              data-toaster-class=\"gatsby-code-button-toaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text\"\n              data-toaster-text=\"코드 내용을 복사하였습니다.\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`kubectl get nodes`, `62917757771989980000`)\"\n            >\n              <div\n                class=\"gatsby-code-button\"\n                data-tooltip=\"\"\n              >\n                <svg viewBox=\"0 0 24 24\"><path d=\"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z\"></path></svg>\n              </div>\n            </div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=user data-host=localhost></span></span>kubectl get nodes</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/55e7e4511cd23fa646765a5a00a16687/396d0/terminal-kubectl-get-nodes.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.333333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/55e7e4511cd23fa646765a5a00a16687/396d0/terminal-kubectl-get-nodes.jpg\"\n        srcset=\"/static/55e7e4511cd23fa646765a5a00a16687/a3e66/terminal-kubectl-get-nodes.jpg 480w,\n/static/55e7e4511cd23fa646765a5a00a16687/396d0/terminal-kubectl-get-nodes.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>클러스터에 2개의 EC2 인스턴스 노드를 실행하고 있습니다. 노드의 이름은 <code>&#x3C;private-IPv4-address>.&#x3C;region>.compute.internal</code> 형식으로 구성합니다.</p>\n<p>데이터 플레인에 대한 자세한 정보는 Amazon EKS 워크샵의 <a href=\"https://awskrug.github.io/eks-workshop/introduction/architecture/architecture_worker/\">쿠버네티스 아키텍처 - 데이터 플레인</a> 내용을 참조하세요.</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#br-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0\">🧐<br />클러스터?</a></p>\n<ul>\n<li><a href=\"#node\">Node</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"category":"kubernetes","index":2,"title":"Cluster","description":"회사 쿠버네티스를 설립하고 직원들을 수용할 사무실 클러스터를 매입하였습니다. 사무실은 임원진 구역인 마스터 노드와 직원 구역인 워커 노드로 나누어 관리하려고 합니다. 임원진은 컨설팅 업체 EKS에 자문을 구하면 1시간 안에 구성할 수 있어요.","image":null,"date":"2020-05-25"}},"prevPost":{"fields":{"slug":"/post/docker/introduction/"},"frontmatter":{"category":"docker","title":"Docker 소개"}},"nextPost":{"fields":{"slug":"/post/kubernetes/component/"},"frontmatter":{"category":"kubernetes","title":"Component"}}},"pageContext":{"id":"20e16e74-75ec-5284-a146-ba2050e2c06a","prevPostID":"6a5d51f5-1934-5277-a08c-452362b09e93","nextPostID":"57e89794-5c2c-5a1e-b3ba-4b67824db3f2"}},
    "staticQueryHashes": ["1955143157","2731891648"]}