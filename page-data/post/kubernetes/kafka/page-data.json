{
    "componentChunkName": "component---src-components-template-post-template-tsx",
    "path": "/post/kubernetes/kafka/",
    "result": {"data":{"site":{"siteMetadata":{"title":"AROUND US"}},"markdownRemark":{"id":"ab9ade26-27a9-56bb-b934-e9f48bdc0237","excerpt":"ëŒ€ê·œëª¨ ë©”ì‹œì§€ í”Œë«í¼ Apache Kafka(ì¹´í”„ì¹´)ë¥¼ Amazon EKS ì„œë¹„ìŠ¤ì— ë°°í¬í•´ ë´…ì‹œë‹¤. ë³¸ ë¬¸ì„œëŠ” ì¹´í”„ì¹´ì— ëŒ€í•œ ê¸°ë³¸ì ì¸ ë‚´ìš©ì€ ë‹¤ë£¨ì§€ ì•ŠìŠµë‹ˆë‹¤. ğŸ™ ëª©ì°¨ ZooKeeper Kafka Kafka Manager Topic ZooKeeper Apache ZooKeeperâ€¦","html":"<blockquote>\n<p>ëŒ€ê·œëª¨ ë©”ì‹œì§€ í”Œë«í¼ Apache Kafka(ì¹´í”„ì¹´)ë¥¼ Amazon EKS ì„œë¹„ìŠ¤ì— ë°°í¬í•´ ë´…ì‹œë‹¤. ë³¸ ë¬¸ì„œëŠ” ì¹´í”„ì¹´ì— ëŒ€í•œ ê¸°ë³¸ì ì¸ ë‚´ìš©ì€ ë‹¤ë£¨ì§€ ì•ŠìŠµë‹ˆë‹¤. ğŸ™</p>\n</blockquote>\n<h2 id=\"ëª©ì°¨\" style=\"position:relative;\">ëª©ì°¨<a href=\"#%EB%AA%A9%EC%B0%A8\" aria-label=\"ëª©ì°¨ permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<ol>\n<li><a href=\"#ZooKeeper\">ZooKeeper</a></li>\n<li><a href=\"#Kafka\">Kafka</a></li>\n<li><a href=\"#Kafka-Manager\">Kafka Manager</a></li>\n<li><a href=\"#Topic\">Topic</a></li>\n</ol>\n<h2 id=\"ZooKeeper\" style=\"position:relative;\">ZooKeeper<a href=\"#ZooKeeper\" aria-label=\"ZooKeeper permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>Apache <strong>ZooKeeper</strong>(ì£¼í‚¤í¼)ëŠ” ë¶„ì‚° ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ ë¶„ì‚° ì˜¤í”ˆ ì†ŒìŠ¤ ì½”ë””ë„¤ì´ì…˜ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ë¶„ì‚° ì‹œìŠ¤í…œì„ ë‹¤ë£¨ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì¤‘ìš”í•œ ì„œë¹„ìŠ¤ ì¤‘ í•˜ë‚˜ë¡œ ë¶„ì‚° ì‹œìŠ¤í…œì´ ì•ˆì „í•˜ê²Œ ì‘ë™í•  ìˆ˜ ìˆëŠ” APIë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>\n<blockquote>\n<p>ì£¼í‚¤í¼ë¥¼ ê°œë°œí•  ë•Œ ì•„íŒŒì¹˜ ê°œë°œìë“¤ì€ ë§ˆì¹˜ ìì‹ ë“¤ì´ ë™ë¬¼ì›ì— ì‚¬ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì¸ë‹¤ê³  ë§í–ˆìŠµë‹ˆë‹¤. ë‹¹ì‹œ Apache Pig(í”¼ê·¸)ë¥¼ ë¹„ë¡¯í•˜ì—¬ ë™ë¬¼ì˜ ì´ë¦„ì„ í”„ë¡œì íŠ¸ì— ì‚¬ìš©í•˜ê³  ìˆì—ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì´ ë°œì–¸ì— ì°©ì•ˆí•˜ì—¬ ë¶„ì‚° ì‹œìŠ¤í…œ(Kafka)ì€ ë‹¤ì–‘í•œ ë™ë¬¼ë“¤ì´ ì‚´ê³  ìˆëŠ” ë™ë¬¼ì›ìœ¼ë¡œ, ë™ë¬¼ì›ì„ ì œëŒ€ë¡œ ìš´ì˜í•˜ë ¤ë©´ ì´ë¥¼ í†µì œí•˜ëŠ” ì‚¬ìœ¡ì‚¬(ZooKeeper)ê°€ í•„ìš”í•˜ë‹¤ëŠ” ìƒê°ì„ í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>\n</blockquote>\n<p>ì£¼í‚¤í¼ëŠ” ë©”íƒ€ ì •ë³´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. <em>- ì‹¤ì œ ë©”ì‹œì§€ëŠ” ì¹´í”„ì¹´ê°€ ì €ì¥í•©ë‹ˆë‹¤. -</em> í˜„ì¬ ì¹´í”„ì¹´ ì„œë²„ê°€ ëª‡ ëŒ€ ì‘ë™ ì¤‘ì¸ì§€, ì¹´í”„ì¹´ ì»¨ìŠˆë¨¸ê°€ ì–´ë””ê¹Œì§€ ë©”ì‹œì§€ë¥¼ ì½ì—ˆëŠ”ì§€ ë“±ì˜ ìŠ¤ëƒ…ìƒ· ì •ë³´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.</p>\n<p>í•„ìëŠ” <strong>Helm</strong>(í—¬ë¦„)ì—ì„œ ì œê³µí•˜ëŠ” ì°¨íŠ¸ë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. í—¬ë¦„ ì°¨íŠ¸ì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ëŠ” í—¬ë¦„ ê³µì‹ ë¬¸ì„œì˜ <a href=\"https://github.com/helm/charts/tree/master/incubator/zookeeper\">zookeeper</a> ë‚´ìš©ì„ ì°¸ì¡°í•˜ì„¸ìš”.</p>\n<blockquote>\n<p>í—¬ë¦„ì€ ì¹´í”„ì¹´ë¥¼ ì„¤ì¹˜í•  ë•Œ ì£¼í‚¤í¼ë¥¼ ìë™ìœ¼ë¡œ ì„¤ì¹˜í•˜ë©´ì„œ ì´ë¦„ì„ <code>zookeeper</code>ê°€ ì•„ë‹Œ <code>kafka-zookeeper</code>ë¡œ ì •ì˜í•©ë‹ˆë‹¤. í•„ìëŠ” í—¬ë¦„ ì°¨íŠ¸ë¥¼ ì¸ìš©í•˜ê¸° ë•Œë¬¸ì— í—¬ë¦„ì—ì„œ ì •ì˜í•œ ì´ë¦„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n</blockquote>\n<h3 id=\"PodDisruptionBudget\" style=\"position:relative;\">PodDisruptionBudget<a href=\"#PodDisruptionBudget\" aria-label=\"PodDisruptionBudget permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><code>PodDisruptionBudget</code>(íŒŒë“œ ë””ìŠ¤ëŸ½ì…˜ ë²„ì§“) ì˜¤ë¸Œì íŠ¸ëŠ” íŒŒë“œì˜ ì¬ì‹œì‘ ë“±ì— ì˜í•œ ìë°œì  ì¤‘ë‹¨ìœ¼ë¡œ ì¼ì‹œì— ì¤‘ì§€ë˜ëŠ” <em>- ë³µì œëœ -</em> ì£¼í‚¤í¼ íŒŒë“œì˜ ìˆ˜ë¥¼ ì œí•œí•©ë‹ˆë‹¤.</p>\n<p><strong>poddisruptionbudget.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> policy/v1beta1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> PodDisruptionBudget\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>zookeeper\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> zookeeper\n    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span> zookeeper<span class=\"token punctuation\">-</span>2.1.0\n    <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">heritage</span><span class=\"token punctuation\">:</span> Helm\n    <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> server\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> zookeeper\n      <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> kafka\n      <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> server\n  <span class=\"token key atrule\">maxUnavailable</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><code>selector</code>: ì ìš©í•  íŒŒë“œì˜ ë§¤ì¹­ ì •ë³´</li>\n<li><code>maxUnavailable</code>: ë¹„ì •ìƒ ìƒíƒœë¥¼ í—ˆìš©í•˜ëŠ” íŒŒë“œì˜ ìˆ˜</li>\n</ul>\n<h3 id=\"ConfigMap\" style=\"position:relative;\">ConfigMap<a href=\"#ConfigMap\" aria-label=\"ConfigMap permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><code>ConfigMap</code>(ì»¨í”¼ê·¸ë§µ) ì˜¤ë¸Œì íŠ¸ëŠ” ì£¼í‚¤í¼ ì‹¤í–‰ì— í•„ìš”í•œ ì„¤ì • ì •ë³´ë¥¼ ë¯¸ë¦¬ ì •ì˜í•´ ì¿ ë²„ë„¤í‹°ìŠ¤ì— ì €ì¥ì†Œ í˜•íƒœë¡œ ì €ì¥í•©ë‹ˆë‹¤.</p>\n<p><strong>config-script.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ConfigMap\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>zookeeper\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> zookeeper\n    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span> zookeeper<span class=\"token punctuation\">-</span>2.1.0\n    <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">heritage</span><span class=\"token punctuation\">:</span> Helm\n    <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> server\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">ok</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n    #!/bin/sh\n    echo ruok | nc 127.0.0.1 ${1:-2181}</span>\n\n  <span class=\"token key atrule\">ready</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n    #!/bin/sh\n    echo ruok | nc 127.0.0.1 ${1:-2181}</span>\n\n  <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n    #!/bin/bash</span>\n\n    set <span class=\"token punctuation\">-</span>a\n    ROOT=$(echo /apache<span class=\"token punctuation\">-</span>zookeeper<span class=\"token punctuation\">-</span><span class=\"token important\">*)</span>\n\n    ZK_USER=$<span class=\"token punctuation\">{</span>ZK_USER<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span><span class=\"token string\">\"zookeeper\"</span><span class=\"token punctuation\">}</span>\n    ZK_LOG_LEVEL=$<span class=\"token punctuation\">{</span>ZK_LOG_LEVEL<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span><span class=\"token string\">\"INFO\"</span><span class=\"token punctuation\">}</span>\n    ZK_DATA_DIR=$<span class=\"token punctuation\">{</span>ZK_DATA_DIR<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span><span class=\"token string\">\"/data\"</span><span class=\"token punctuation\">}</span>\n    ZK_DATA_LOG_DIR=$<span class=\"token punctuation\">{</span>ZK_DATA_LOG_DIR<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span><span class=\"token string\">\"/data/log\"</span><span class=\"token punctuation\">}</span>\n    ZK_CONF_DIR=$<span class=\"token punctuation\">{</span>ZK_CONF_DIR<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span><span class=\"token string\">\"/conf\"</span><span class=\"token punctuation\">}</span>\n    ZK_CLIENT_PORT=$<span class=\"token punctuation\">{</span>ZK_CLIENT_PORT<span class=\"token punctuation\">:</span><span class=\"token number\">-2181</span><span class=\"token punctuation\">}</span>\n    ZK_SERVER_PORT=$<span class=\"token punctuation\">{</span>ZK_SERVER_PORT<span class=\"token punctuation\">:</span><span class=\"token number\">-2888</span><span class=\"token punctuation\">}</span>\n    ZK_ELECTION_PORT=$<span class=\"token punctuation\">{</span>ZK_ELECTION_PORT<span class=\"token punctuation\">:</span><span class=\"token number\">-3888</span><span class=\"token punctuation\">}</span>\n    ZK_TICK_TIME=$<span class=\"token punctuation\">{</span>ZK_TICK_TIME<span class=\"token punctuation\">:</span><span class=\"token number\">-2000</span><span class=\"token punctuation\">}</span>\n    ZK_INIT_LIMIT=$<span class=\"token punctuation\">{</span>ZK_INIT_LIMIT<span class=\"token punctuation\">:</span><span class=\"token number\">-10</span><span class=\"token punctuation\">}</span>\n    ZK_SYNC_LIMIT=$<span class=\"token punctuation\">{</span>ZK_SYNC_LIMIT<span class=\"token punctuation\">:</span><span class=\"token number\">-5</span><span class=\"token punctuation\">}</span>\n    ZK_HEAP_SIZE=$<span class=\"token punctuation\">{</span>ZK_HEAP_SIZE<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span>2G<span class=\"token punctuation\">}</span>\n    ZK_MAX_CLIENT_CNXNS=$<span class=\"token punctuation\">{</span>ZK_MAX_CLIENT_CNXNS<span class=\"token punctuation\">:</span><span class=\"token number\">-60</span><span class=\"token punctuation\">}</span>\n    ZK_MIN_SESSION_TIMEOUT=$<span class=\"token punctuation\">{</span>ZK_MIN_SESSION_TIMEOUT<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span> $((ZK_TICK_TIME<span class=\"token important\">*2))</span><span class=\"token punctuation\">}</span>\n    ZK_MAX_SESSION_TIMEOUT=$<span class=\"token punctuation\">{</span>ZK_MAX_SESSION_TIMEOUT<span class=\"token punctuation\">:</span><span class=\"token punctuation\">-</span> $((ZK_TICK_TIME<span class=\"token important\">*20))</span><span class=\"token punctuation\">}</span>\n    ZK_SNAP_RETAIN_COUNT=$<span class=\"token punctuation\">{</span>ZK_SNAP_RETAIN_COUNT<span class=\"token punctuation\">:</span><span class=\"token number\">-3</span><span class=\"token punctuation\">}</span>\n    ZK_PURGE_INTERVAL=$<span class=\"token punctuation\">{</span>ZK_PURGE_INTERVAL<span class=\"token punctuation\">:</span><span class=\"token number\">-0</span><span class=\"token punctuation\">}</span>\n    ID_FILE=\"$ZK_DATA_DIR/myid\"\n    ZK_CONFIG_FILE=\"$ZK_CONF_DIR/zoo.cfg\"\n    LOG4J_PROPERTIES=\"$ZK_CONF_DIR/log4j.properties\"\n    HOST=$(hostname)\n    DOMAIN=`hostname <span class=\"token punctuation\">-</span>d`\n    ZOOCFG=zoo.cfg\n    ZOOCFGDIR=$ZK_CONF_DIR\n    JVMFLAGS=\"<span class=\"token punctuation\">-</span>Xmx$ZK_HEAP_SIZE <span class=\"token punctuation\">-</span>Xms$ZK_HEAP_SIZE\"\n\n    APPJAR=$(echo $ROOT/<span class=\"token important\">*jar)</span>\n    CLASSPATH=\"$<span class=\"token punctuation\">{</span>ROOT<span class=\"token punctuation\">}</span>/lib/<span class=\"token important\">*:$</span><span class=\"token punctuation\">{</span>APPJAR<span class=\"token punctuation\">}</span><span class=\"token punctuation\">:</span>$<span class=\"token punctuation\">{</span>ZK_CONF_DIR<span class=\"token punctuation\">}</span><span class=\"token punctuation\">:</span>\"\n\n    if <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> $HOST =~ (.<span class=\"token important\">*)-(</span><span class=\"token punctuation\">[</span>0<span class=\"token punctuation\">-</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span>+)<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>; then\n        NAME=$<span class=\"token punctuation\">{</span>BASH_REMATCH<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n        ORD=$<span class=\"token punctuation\">{</span>BASH_REMATCH<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n        MY_ID=$((ORD+1))\n    else\n        echo \"Failed to extract ordinal from hostname $HOST\"\n        exit 1\n    fi\n\n    mkdir <span class=\"token punctuation\">-</span>p $ZK_DATA_DIR\n    mkdir <span class=\"token punctuation\">-</span>p $ZK_DATA_LOG_DIR\n    echo $MY_ID <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ID_FILE\n\n    echo \"clientPort=$ZK_CLIENT_PORT\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"dataDir=$ZK_DATA_DIR\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"dataLogDir=$ZK_DATA_LOG_DIR\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"tickTime=$ZK_TICK_TIME\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"initLimit=$ZK_INIT_LIMIT\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"syncLimit=$ZK_SYNC_LIMIT\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"maxClientCnxns=$ZK_MAX_CLIENT_CNXNS\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"minSessionTimeout=$ZK_MIN_SESSION_TIMEOUT\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"maxSessionTimeout=$ZK_MAX_SESSION_TIMEOUT\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"autopurge.snapRetainCount=$ZK_SNAP_RETAIN_COUNT\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"autopurge.purgeInterval=$ZK_PURGE_INTERVAL\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    echo \"4lw.commands.whitelist=<span class=\"token important\">*\"</span> <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n\n    for (( i=1; i&lt;=$ZK_REPLICAS; i++ ))\n    do\n        echo \"server.$i=$NAME<span class=\"token punctuation\">-</span>$((i<span class=\"token punctuation\">-</span>1)).$DOMAIN<span class=\"token punctuation\">:</span>$ZK_SERVER_PORT<span class=\"token punctuation\">:</span>$ZK_ELECTION_PORT\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $ZK_CONFIG_FILE\n    done\n\n    rm <span class=\"token punctuation\">-</span>f $LOG4J_PROPERTIES\n\n    echo \"zookeeper.root.logger=$ZK_LOG_LEVEL<span class=\"token punctuation\">,</span> CONSOLE\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"zookeeper.console.threshold=$ZK_LOG_LEVEL\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"zookeeper.log.threshold=$ZK_LOG_LEVEL\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"zookeeper.log.dir=$ZK_DATA_LOG_DIR\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"zookeeper.log.file=zookeeper.log\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"zookeeper.log.maxfilesize=256MB\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"zookeeper.log.maxbackupindex=10\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"zookeeper.tracelog.dir=$ZK_DATA_LOG_DIR\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"zookeeper.tracelog.file=zookeeper_trace.log\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"log4j.rootLogger=\\$<span class=\"token punctuation\">{</span>zookeeper.root.logger<span class=\"token punctuation\">}</span>\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"log4j.appender.CONSOLE.Threshold=\\$<span class=\"token punctuation\">{</span>zookeeper.console.threshold<span class=\"token punctuation\">}</span>\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n    echo \"log4j.appender.CONSOLE.layout.ConversionPattern=%d<span class=\"token punctuation\">{</span>ISO8601<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">[</span>myid<span class=\"token punctuation\">:</span>%X<span class=\"token punctuation\">{</span>myid<span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">-</span> %<span class=\"token punctuation\">-</span>5p <span class=\"token punctuation\">[</span>%t<span class=\"token punctuation\">:</span>%C<span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span>@%L<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">-</span> %m%n\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $LOG4J_PROPERTIES\n\n    if <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">-</span>n \"$JMXDISABLE\" <span class=\"token punctuation\">]</span>\n    then\n        MAIN=org.apache.zookeeper.server.quorum.QuorumPeerMain\n    else\n        MAIN=\"<span class=\"token punctuation\">-</span>Dcom.sun.management.jmxremote <span class=\"token punctuation\">-</span>Dcom.sun.management.jmxremote.port=$JMXPORT <span class=\"token punctuation\">-</span>Dcom.sun.management.jmxremote.authenticate=$JMXAUTH <span class=\"token punctuation\">-</span>Dcom.sun.management.jmxremote.ssl=$JMXSSL <span class=\"token punctuation\">-</span>Dzookeeper.jmx.log4j.disable=$JMXLOG4J org.apache.zookeeper.server.quorum.QuorumPeerMain\"\n    fi\n\n    set <span class=\"token punctuation\">-</span>x\n    exec java <span class=\"token punctuation\">-</span>cp \"$CLASSPATH\" $JVMFLAGS $MAIN $ZK_CONFIG_FILE</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"Service\" style=\"position:relative;\">Service<a href=\"#Service\" aria-label=\"Service permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>service.yaml</strong></p>\n<p>í´ëŸ¬ìŠ¤í„° IPë¥¼ ì§€ì •í•˜ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•œ ë‚´ë¶€ IPë¥¼ í• ë‹¹í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>zookeeper\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> zookeeper\n    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span> zookeeper<span class=\"token punctuation\">-</span>2.1.0\n    <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">heritage</span><span class=\"token punctuation\">:</span> Helm\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> ClusterIP\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> client\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2181</span>\n      <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> client\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> zookeeper\n    <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> kafka</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>service-headless.yaml</strong></p>\n<p><code>headless</code> ì˜¤ë¸Œì íŠ¸ëŠ” ë‹¨ì¼ ì„œë¹„ìŠ¤ IPë¥¼ í•„ìš”ë¡œ í•˜ì§€ ì•Šì•„ <code>None</code> í´ëŸ¬ìŠ¤í„° IPë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>zookeeper<span class=\"token punctuation\">-</span>headless\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> zookeeper\n    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span> zookeeper<span class=\"token punctuation\">-</span>2.1.0\n    <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">heritage</span><span class=\"token punctuation\">:</span> Helm\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">clusterIP</span><span class=\"token punctuation\">:</span> None\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> client\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2181</span>\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> client\n      <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> election\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3888</span>\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> election\n      <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> server\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2888</span>\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> server\n      <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> zookeeper\n    <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> kafka</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"StatefulSet\" style=\"position:relative;\">StatefulSet<a href=\"#StatefulSet\" aria-label=\"StatefulSet permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>StatefulSet</strong>(ìŠ¤í…Œì´íŠ¸í’€ì…‹) ì˜¤ë¸Œì íŠ¸ëŠ” ìƒíƒœ ìœ ì§€ê°€ í•„ìš”í•œ(stateful) ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì‚¬ìš©í•©ë‹ˆë‹¤. íŒŒë“œë¥¼ ìˆ˜ì‹œë¡œ ì¬ì‹œì‘í•´ë„ ë³¼ë¥¨ì„ ì‚­ì œí•˜ì§€ ì•Šì•„ ë‚´ìš©ì´ ìœ ì‹¤ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>\n<p><strong>statefulset.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> StatefulSet\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>zookeeper\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> zookeeper\n    <span class=\"token key atrule\">chart</span><span class=\"token punctuation\">:</span> zookeeper<span class=\"token punctuation\">-</span>2.1.0\n    <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">heritage</span><span class=\"token punctuation\">:</span> Helm\n    <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> server\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">serviceName</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>zookeeper<span class=\"token punctuation\">-</span>headless\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> zookeeper\n      <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> kafka\n      <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> server\n  <span class=\"token key atrule\">updateStrategy</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> RollingUpdate\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> zookeeper\n        <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> kafka\n        <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> server\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">terminationGracePeriodSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1800</span>\n      <span class=\"token key atrule\">securityContext</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">fsGroup</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1000</span>\n        <span class=\"token key atrule\">runAsUser</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1000</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> zookeeper\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"zookeeper:3.5.5\"</span>\n          <span class=\"token key atrule\">imagePullPolicy</span><span class=\"token punctuation\">:</span> IfNotPresent\n          <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 50m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 128Mi\n            <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 200m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 128Mi\n          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token string\">\"/bin/bash\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token string\">\"-xec\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token string\">\"/config-scripts/run\"</span>\n          <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> client\n              <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2181</span>\n              <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> election\n              <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3888</span>\n              <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> server\n              <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2888</span>\n              <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n          <span class=\"token key atrule\">livenessProbe</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">exec</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n                <span class=\"token punctuation\">-</span> sh\n                <span class=\"token punctuation\">-</span> /config<span class=\"token punctuation\">-</span>scripts/ok\n            <span class=\"token key atrule\">initialDelaySeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">20</span>\n            <span class=\"token key atrule\">periodSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">30</span>\n            <span class=\"token key atrule\">timeoutSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span>\n            <span class=\"token key atrule\">failureThreshold</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n            <span class=\"token key atrule\">successThreshold</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n          <span class=\"token key atrule\">readinessProbe</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">exec</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n                <span class=\"token punctuation\">-</span> sh\n                <span class=\"token punctuation\">-</span> /config<span class=\"token punctuation\">-</span>scripts/ready\n            <span class=\"token key atrule\">initialDelaySeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">20</span>\n            <span class=\"token key atrule\">periodSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">30</span>\n            <span class=\"token key atrule\">timeoutSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span>\n            <span class=\"token key atrule\">failureThreshold</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n            <span class=\"token key atrule\">successThreshold</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n          <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZK_REPLICAS\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> JMXAUTH\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"false\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> JMXDISABLE\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"false\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> JMXPORT\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1099\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> JMXSSL\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"false\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZK_HEAP_SIZE\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"96M\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZK_SYNC_LIMIT\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"10\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZK_TICK_TIME\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2000\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZOO_AUTOPURGE_PURGEINTERVAL\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZOO_AUTOPURGE_SNAPRETAINCOUNT\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZOO_INIT_LIMIT\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"5\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZOO_MAX_CLIENT_CNXNS\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"60\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZOO_PORT\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2181\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZOO_STANDALONE_ENABLED\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"false\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZOO_TICK_TIME\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2000\"</span>\n          <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> data\n              <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /data\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> config\n              <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /config<span class=\"token punctuation\">-</span>scripts\n      <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> config\n          <span class=\"token key atrule\">configMap</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>zookeeper\n            <span class=\"token key atrule\">defaultMode</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0555</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> data\n          <span class=\"token key atrule\">emptyDir</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  <span class=\"token key atrule\">volumeClaimTemplates</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> data\n      <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">accessModes</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"ReadWriteOnce\"</span><span class=\"token punctuation\">]</span>\n        <span class=\"token key atrule\">storageClassName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ebs-default\"</span>\n        <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> 10Gi</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code>replicas</code> í•„ë“œ ê°’ì— ë”°ë¼ ë…¸ë“œ(ì„œë²„)ë¥¼ ì´ 3ê°œ ìƒì„±í•˜ëŠ”ë° ì´ë ‡ê²Œ ìƒì„±í•œ ê°ê°ì˜ ì£¼í‚¤í¼ ë…¸ë“œë¥¼ ZNode(ì§€ë…¸ë“œ)ë¼ê³  í•©ë‹ˆë‹¤. ZNode ì¤‘ 1ê°œëŠ” Leader(ë¦¬ë”) ë…¸ë“œ, ë‚˜ë¨¸ì§€ëŠ” ë¦¬ë”ì˜ ëª…ë ¹ì„ ë”°ë¥´ëŠ” Follower(íŒ”ë¡œì›Œ) ë…¸ë“œë¡œ ë‚˜ë‰©ë‹ˆë‹¤. ë¦¬ë”ëŠ” íŒ”ë¡œì›Œ ë…¸ë“œê°€ ì¤‘ë‹¨ëì„ ë•Œ ìë™ ë³µêµ¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ì¤‘ì‹¬ ë…¸ë“œë¡œ ì„œë²„ êµ¬ë™ê³¼ ë™ì‹œì— ì„ ì¶œë©ë‹ˆë‹¤.</p>\n<blockquote>\n<p>ì£¼í‚¤í¼ ë…¸ë“œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì•Œê³ ë¦¬ì¦˜ì— ì˜í•˜ì—¬ ë°˜ë“œì‹œ <strong>í™€ìˆ˜</strong>ë¡œ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.</p>\n<ul>\n<li>ê³¼ë°˜ìˆ˜ ì´ìƒì˜ ë…¸ë“œê°€ ë‹¤ìš´ëì„ ë•Œ ì„œë¹„ìŠ¤ë¥¼ ì¤‘ì§€í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, 3ëŒ€ ì¤‘ 2ëŒ€ê°€ ë‹¤ìš´ëì„ ë•Œ ê³¼ë°˜ìˆ˜ ì´ìƒì— ì„±ë¦½í•˜ì—¬ ì„œë¹„ìŠ¤ë¥¼ ì¤‘ì§€í•©ë‹ˆë‹¤.</li>\n<li>ë¦¬ë” ë…¸ë“œê°€ íŠ¸ëœì­ì…˜ ìƒì„± í›„ íŒ”ë¡œì›Œ ë…¸ë“œì— ì „íŒŒí•  ë•Œ ê³¼ë°˜ìˆ˜ ì´ìƒì´ íŠ¸ëœì­ì…˜ì— ì„±ê³µí•´ì•¼ í´ë¼ì´ì–¸íŠ¸ì— ì„±ê³µ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.</li>\n</ul>\n</blockquote>\n<p><code>PersistentVolumeClaim</code> ì˜¤ë¸Œì íŠ¸ë¡œ ì •ì˜í•˜ë©´ íŒŒë“œ ì´ë¦„ì„ ë¶ˆê·œì¹™ì ìœ¼ë¡œ ì§€ì •í•˜ì§€ë§Œ, <code>StatefulSet</code> ì˜¤ë¸Œì íŠ¸ëŠ” <code>PersistentVolume</code> ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•  ë•Œ íŒŒë“œ ì´ë¦„ì„ ê·œì¹™ì ìœ¼ë¡œ ì§€ì •í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">zookeeper-0\nzookeeper-1\nzookeeper-2</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>íŒŒë“œë¥¼ ìƒì„±í•  ë•Œ ë™ì‹œì— ëª¨ë“  íŒŒë“œë¥¼ ìƒì„±í•˜ì§€ ì•Šê³  0ë¶€í„° ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ í•˜ë‚˜ì”© ìƒì„±í•  ìˆ˜ ìˆëŠ” ìˆœì°¨ ê¸°ë™ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë°˜ëŒ€ë¡œ ì‚­ì œí•  ë•ŒëŠ” ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ í•˜ë‚˜ì”© ì‚­ì œí•©ë‹ˆë‹¤.</p>\n<blockquote>\n<p>ìˆœì°¨ ê¸°ë™ì— ì˜í•´ ë°ì´í„°ë¥¼ ìœ ì§€í•˜ëŠ” ìì„¸í•œ ì •ë³´ëŠ” ì¡°ëŒ€í˜‘ì˜ <a href=\"https://bcho.tistory.com/1306\">StatefulSet</a> ë‚´ìš©ì„ ì°¸ì¡°í•˜ì„¸ìš”. ë³¼ë¥¨ì€ í•œ ë²ˆ ìƒì„±í•˜ë©´ ì‚­ì œí•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— <code>replicas</code> í•„ë“œ ê°’ì„ ëŠ˜ë¦´ ìˆ˜ëŠ” ìˆì–´ë„ ì¤„ì¼ ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤. ìœ ì˜í•˜ì„¸ìš”.</p>\n</blockquote>\n<p><strong>kafka-zookeeper.yaml</strong></p>\n<p>ë°°í¬í•´ì•¼ í•  íŒŒì¼ì´ ë§ì€ ê²½ìš° ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•˜ê±°ë‚˜ ì¶”í›„ ì„œë¹„ìŠ¤ë¥¼ ì‚­ì œí•  ë•Œ ì‹¤ìˆ˜í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ íŒŒì¼ì— ëª¨ì•„ì„œ <code>---</code> êµ¬ë¶„ì„ ì„ ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ ì‘ì—…í•˜ì„¸ìš”.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\">&lt;insert poddisruptionbudget.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;insert config<span class=\"token punctuation\">-</span>script.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;insert service.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;insert service<span class=\"token punctuation\">-</span>headless.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;insert statefulset.yaml<span class=\"token punctuation\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl apply -f kafka-zookeeper.yaml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6736f173051e6f80cea2c1c0a65feafe/396d0/apply-kafka-zookeeper.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.583333333333332%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/6736f173051e6f80cea2c1c0a65feafe/396d0/apply-kafka-zookeeper.jpg\"\n        srcset=\"/static/6736f173051e6f80cea2c1c0a65feafe/a3e66/apply-kafka-zookeeper.jpg 480w,\n/static/6736f173051e6f80cea2c1c0a65feafe/396d0/apply-kafka-zookeeper.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"Kafka\" style=\"position:relative;\">Kafka<a href=\"#Kafka\" aria-label=\"Kafka permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>í•„ìëŠ” <strong>Helm</strong>(í—¬ë¦„)ì—ì„œ ì œê³µí•˜ëŠ” ì°¨íŠ¸ë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. í—¬ë¦„ ì°¨íŠ¸ì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ëŠ” í—¬ë¦„ ê³µì‹ ë¬¸ì„œì˜ <a href=\"https://github.com/helm/charts/tree/master/incubator/kafka\">Kafka</a> ë‚´ìš©ì„ ì°¸ì¡°í•˜ì„¸ìš”.</p>\n<h3 id=\"Service-1\" style=\"position:relative;\">Service<a href=\"#Service-1\" aria-label=\"Service 1 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>service-brokers.yaml</strong></p>\n<p><code>kafka-broker</code>(ì¹´í”„ì¹´ ë¸Œë¡œì»¤)ëŠ” ì¹´í”„ì¹´ ì„œë²„ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì¹´í”„ì¹´ ë¸Œë¡œì»¤ëŠ” ê¸°ë³¸ 9092 í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>\n<p>Kafka <strong>Cluster</strong>(í´ëŸ¬ìŠ¤í„°)ëŠ” ì¹´í”„ì¹´ë¥¼ ì‹¤í–‰í•˜ëŠ” í•˜ë‚˜ ì´ìƒì˜ ì„œë²„(ë¸Œë¡œì»¤)ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. í´ëŸ¬ìŠ¤í„°ì˜ ë¸Œë¡œì»¤ ê´€ë¦¬ëŠ” ì£¼í‚¤í¼ê°€ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/34a4caab6cfa342d39f29de18c804604/9bfa6/architecture-for-apache-kafka.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.958333333333336%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/34a4caab6cfa342d39f29de18c804604/aaf92/architecture-for-apache-kafka.jpg\"\n        srcset=\"/static/34a4caab6cfa342d39f29de18c804604/a3e66/architecture-for-apache-kafka.jpg 480w,\n/static/34a4caab6cfa342d39f29de18c804604/fb816/architecture-for-apache-kafka.jpg 960w,\n/static/34a4caab6cfa342d39f29de18c804604/aaf92/architecture-for-apache-kafka.jpg 1920w,\n/static/34a4caab6cfa342d39f29de18c804604/9bfa6/architecture-for-apache-kafka.jpg 1999w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">helm.sh/chart</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>0.20.5\n    <span class=\"token key atrule\">app.kubernetes.io/managed-by</span><span class=\"token punctuation\">:</span> Helm\n    <span class=\"token key atrule\">app.kubernetes.io/component</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>broker\n    <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">app.kubernetes.io/instance</span><span class=\"token punctuation\">:</span> kafka\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> broker\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">9092</span>\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> kafka\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app.kubernetes.io/component</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>broker\n    <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">app.kubernetes.io/instance</span><span class=\"token punctuation\">:</span> kafka</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>service-headless.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>headless\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">helm.sh/chart</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>0.20.5\n    <span class=\"token key atrule\">app.kubernetes.io/managed-by</span><span class=\"token punctuation\">:</span> Helm\n    <span class=\"token key atrule\">app.kubernetes.io/component</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>broker\n    <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">app.kubernetes.io/instance</span><span class=\"token punctuation\">:</span> kafka\n  <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">service.alpha.kubernetes.io/tolerate-unready-endpoints</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> broker\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">9092</span>\n  <span class=\"token key atrule\">clusterIP</span><span class=\"token punctuation\">:</span> None\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app.kubernetes.io/component</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>broker\n    <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">app.kubernetes.io/instance</span><span class=\"token punctuation\">:</span> kafka</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"StatefulSet-1\" style=\"position:relative;\">StatefulSet<a href=\"#StatefulSet-1\" aria-label=\"StatefulSet 1 permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h3>\n<p><strong>statefulset.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> StatefulSet\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">helm.sh/chart</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>0.20.5\n    <span class=\"token key atrule\">app.kubernetes.io/managed-by</span><span class=\"token punctuation\">:</span> Helm\n    <span class=\"token key atrule\">app.kubernetes.io/component</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>broker\n    <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">app.kubernetes.io/instance</span><span class=\"token punctuation\">:</span> kafka\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app.kubernetes.io/component</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>broker\n      <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> kafka\n      <span class=\"token key atrule\">app.kubernetes.io/instance</span><span class=\"token punctuation\">:</span> kafka\n  <span class=\"token key atrule\">serviceName</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>headless\n  <span class=\"token key atrule\">podManagementPolicy</span><span class=\"token punctuation\">:</span> OrderedReady\n  <span class=\"token key atrule\">updateStrategy</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> OnDelete\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">helm.sh/chart</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>0.20.5\n        <span class=\"token key atrule\">app.kubernetes.io/managed-by</span><span class=\"token punctuation\">:</span> Helm\n        <span class=\"token key atrule\">app.kubernetes.io/component</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>broker\n        <span class=\"token key atrule\">app.kubernetes.io/name</span><span class=\"token punctuation\">:</span> kafka\n        <span class=\"token key atrule\">app.kubernetes.io/instance</span><span class=\"token punctuation\">:</span> kafka\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>broker\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"confluentinc/cp-kafka:5.0.1\"</span>\n          <span class=\"token key atrule\">imagePullPolicy</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"IfNotPresent\"</span>\n          <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 200m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 1Gi\n            <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 1000m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 1Gi\n          <span class=\"token key atrule\">livenessProbe</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">exec</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n                <span class=\"token punctuation\">-</span> sh\n                <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span>ec\n                <span class=\"token punctuation\">-</span> /usr/bin/jps <span class=\"token punctuation\">|</span> /bin/grep <span class=\"token punctuation\">-</span>q SupportedKafka\n            <span class=\"token key atrule\">initialDelaySeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">30</span>\n            <span class=\"token key atrule\">timeoutSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span>\n          <span class=\"token key atrule\">readinessProbe</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">tcpaSocket</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> kafka\n            <span class=\"token key atrule\">initialDelaySeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">30</span>\n            <span class=\"token key atrule\">periodSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span>\n            <span class=\"token key atrule\">timeoutSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span>\n            <span class=\"token key atrule\">successThreshold</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n            <span class=\"token key atrule\">failureThreshold</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n          <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">9092</span>\n              <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka\n          <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> POD_IP\n              <span class=\"token key atrule\">valueFrom</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">fieldRef</span><span class=\"token punctuation\">:</span>\n                  <span class=\"token key atrule\">fieldPath</span><span class=\"token punctuation\">:</span> status.podIP\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> POD_NAME\n              <span class=\"token key atrule\">valueFrom</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">fieldRef</span><span class=\"token punctuation\">:</span>\n                  <span class=\"token key atrule\">fieldPath</span><span class=\"token punctuation\">:</span> metadata.name\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> POD_NAMESPACE\n              <span class=\"token key atrule\">valueFrom</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">fieldRef</span><span class=\"token punctuation\">:</span>\n                  <span class=\"token key atrule\">fieldPath</span><span class=\"token punctuation\">:</span> metadata.namespace\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> KAFKA_HEAP_OPTS\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">-</span>Xmx512m <span class=\"token punctuation\">-</span>Xms512m\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> KAFKA_ZOOKEEPER_CONNECT\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"kafka-zookeeper:2181\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> KAFKA_LOG_DIRS\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/opt/kafka/data/logs\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"KAFKA_CONFLUENT_SUPPORT_METRICS_ENABLE\"</span>\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"false\"</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> KAFKA_JMX_PORT\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"5555\"</span>\n          <span class=\"token comment\"># This is required because the Downward API does not yet support identification of</span>\n          <span class=\"token comment\"># pod numbering in statefulsets. Thus, we are required to specify a command which</span>\n          <span class=\"token comment\"># allows us to extract the pod ID for usage as the Kafka Broker ID.</span>\n          <span class=\"token comment\"># See: https://github.com/kubernetes/kubernetes/issues/31218</span>\n          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> sh\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span>exc\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n              unset KAFKA_PORT &amp;&amp; \\\n              export KAFKA_BROKER_ID=${POD_NAME##*-} &amp;&amp; \\\n              export KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://${POD_IP}:9092 &amp;&amp; \\\n              exec /etc/confluent/docker/run</span>\n          <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> datadir\n              <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/opt/kafka/data\"</span>\n      <span class=\"token key atrule\">terminationGracePeriodSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">60</span>\n  <span class=\"token key atrule\">volumeClaimTemplates</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> datadir\n      <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">accessModes</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"ReadWriteOnce\"</span><span class=\"token punctuation\">]</span>\n        <span class=\"token key atrule\">storageClassName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ebs-default\"</span>\n        <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> 20Gi</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>kafka.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\">&lt;insert service<span class=\"token punctuation\">-</span>brokers.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;insert service<span class=\"token punctuation\">-</span>headless.yaml<span class=\"token punctuation\">></span>\n<span class=\"token punctuation\">---</span>\n&lt;insert statefulset.yaml<span class=\"token punctuation\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl apply -f kafka.yaml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/be0bd095f8c9077362baadbe16f22c20/396d0/apply-kafka.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15.625%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/be0bd095f8c9077362baadbe16f22c20/396d0/apply-kafka.jpg\"\n        srcset=\"/static/be0bd095f8c9077362baadbe16f22c20/a3e66/apply-kafka.jpg 480w,\n/static/be0bd095f8c9077362baadbe16f22c20/396d0/apply-kafka.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"Kafka-Manager\" style=\"position:relative;\">Kafka Manager<a href=\"#Kafka-Manager\" aria-label=\"Kafka Manager permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p><strong>Kafka Manager</strong>(ì¹´í”„ì¹´ ë§¤ë‹ˆì €)ëŠ” GUI ê¸°ë°˜ ì¹´í”„ì¹´ ê´€ë¦¬ ë„êµ¬ì…ë‹ˆë‹¤. ëŒ€ë‹¤ìˆ˜ ì¹´í”„ì¹´ ì‘ì—…ì„ CLIë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì€ ê°€ë…ì„±ì´ ë‚®ì•„ ë¹„íš¨ìœ¨ì ì´ê¸° ë•Œë¬¸ì— í¸ì˜ì ì¸ ì¸¡ë©´ì—ì„œ í•„ìˆ˜ì ìœ¼ë¡œ ì„¤ì¹˜í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.</p>\n<p>ì£¼í‚¤í¼ íŒŒë“œì— ì ‘ì†í•˜ì—¬ <strong>zkCli</strong>(ì£¼í‚¤í¼ í´ë¼ì´ì–¸íŠ¸)ë¥¼ ì‹¤í–‰í•´ ë´…ì‹œë‹¤. íŒŒë“œ 3ê°œ ì¤‘ ì•„ë¬´ íŒŒë“œì— ì ‘ì†í•´ë„ ë¬´ë°©í•©ë‹ˆë‹¤. í•„ìëŠ” <code>kafka-zookeeper-0</code> íŒŒë“œì— ì ‘ì†í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl <span class=\"token builtin class-name\">exec</span> -it kafka-zookeeper-0 --namesapce<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span> <span class=\"token function\">bash</span>\nzkCli.sh</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p><code>kafka-manager</code> ë…¸ë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span><span class=\"token punctuation\">[</span>zk: localhost:2181<span class=\"token punctuation\">(</span>CONNECTED<span class=\"token punctuation\">)</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> create /kafka-manager</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/17a0544603256fb05ecae78958f083d1/396d0/create-node-for-kafka-manager.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 175.41666666666666%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/17a0544603256fb05ecae78958f083d1/396d0/create-node-for-kafka-manager.jpg\"\n        srcset=\"/static/17a0544603256fb05ecae78958f083d1/a3e66/create-node-for-kafka-manager.jpg 480w,\n/static/17a0544603256fb05ecae78958f083d1/396d0/create-node-for-kafka-manager.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>kafka-manager.yaml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>manager\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>manager\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>manager\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> &lt;your<span class=\"token punctuation\">-</span>namespace<span class=\"token punctuation\">></span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>manager\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>manager\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kafka<span class=\"token punctuation\">-</span>manager\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> solsson/kafka<span class=\"token punctuation\">-</span>manager@sha256<span class=\"token punctuation\">:</span>9da595ecbb733074a1d3c6091a1e0c384da4f4e1f19f4e16276062278da8e592\n          <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n          <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ZK_HOSTS\n              <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"kafka-zookeeper:2181/kafka-manager\"</span>\n          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> ./bin/kafka<span class=\"token punctuation\">-</span>manager\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span>Dhttp.port=80\n          <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 500m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 512Mi\n            <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 100m\n              <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 384Mi</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<p><code>image</code> í•„ë“œì˜ ê²½ìš° <a href=\"https://hub.docker.com/r/solsson/kafka-manager\">Kafka Docker Builds</a> ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. Docker Hub ì‚¬ì´íŠ¸ì—ì„œ <a href=\"https://hub.docker.com/search?q=kafka-manager&#x26;type=image\">Explore</a> ê²€ìƒ‰ì„ í†µí•´ ë‹¤ë¥¸ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•´ë„ ë¬´ë°©í•©ë‹ˆë‹¤.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl apply -f kafka-manager.yaml</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ca57d755d59417dfeaefa8ea57e96c6a/396d0/apply-kafka-manager.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 13.750000000000002%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/ca57d755d59417dfeaefa8ea57e96c6a/396d0/apply-kafka-manager.jpg\"\n        srcset=\"/static/ca57d755d59417dfeaefa8ea57e96c6a/a3e66/apply-kafka-manager.jpg 480w,\n/static/ca57d755d59417dfeaefa8ea57e96c6a/396d0/apply-kafka-manager.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ API ì„œë²„ë¡œ í”„ë¡ì‹œí•˜ëŠ” ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì„œ ì¹´í”„ì¹´ ë§¤ë‹ˆì € ì›¹ ì„œë¹„ìŠ¤ì— ì ‘ì†í•´ ë´…ì‹œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl proxy</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 795px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2ad9b563105a54c42e8aa06911dceaf2/396d0/proxy.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 11.249999999999998%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/2ad9b563105a54c42e8aa06911dceaf2/396d0/proxy.jpg\"\n        srcset=\"/static/2ad9b563105a54c42e8aa06911dceaf2/a3e66/proxy.jpg 480w,\n/static/2ad9b563105a54c42e8aa06911dceaf2/396d0/proxy.jpg 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>ë¸Œë¼ìš°ì €ì—ì„œ <a href=\"\">http://127.0.0.1:8001/api/v1/namespaces/<code>&#x3C;your-namespace></code>/services/http:kafka-manager:80/proxy/</a> ì ‘ì† í›„ ë‹¤ìŒê³¼ ê°™ì€ í™”ë©´ì´ ë³´ì¸ë‹¤ë©´ ì¹´í”„ì¹´ ë§¤ë‹ˆì €ê°€ ì˜ êµ¬ë™ëœ ê²ƒì…ë‹ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 645px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4fafa4781cc0ceafc2dae7b715cb7267/49419/kafka-manager.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.29166666666666%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/4fafa4781cc0ceafc2dae7b715cb7267/49419/kafka-manager.jpg\"\n        srcset=\"/static/4fafa4781cc0ceafc2dae7b715cb7267/a3e66/kafka-manager.jpg 480w,\n/static/4fafa4781cc0ceafc2dae7b715cb7267/49419/kafka-manager.jpg 645w\"\n        sizes=\"(max-width: 645px) 100vw, 645px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><code>kafka-manager</code> ë…¸ë“œë¥¼ ìƒì„±í•˜ì§€ ì•Šìœ¼ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì˜¤ë¥˜ ë¬¸êµ¬ë¥¼ í™”ë©´ì— í‘œì‹œí•©ë‹ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1920px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d6111e5fcd2c00266c11d0983b6b3dea/83ca0/kafka-manager-failed.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.75%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/d6111e5fcd2c00266c11d0983b6b3dea/aaf92/kafka-manager-failed.jpg\"\n        srcset=\"/static/d6111e5fcd2c00266c11d0983b6b3dea/a3e66/kafka-manager-failed.jpg 480w,\n/static/d6111e5fcd2c00266c11d0983b6b3dea/fb816/kafka-manager-failed.jpg 960w,\n/static/d6111e5fcd2c00266c11d0983b6b3dea/aaf92/kafka-manager-failed.jpg 1920w,\n/static/d6111e5fcd2c00266c11d0983b6b3dea/83ca0/kafka-manager-failed.jpg 2001w\"\n        sizes=\"(max-width: 1920px) 100vw, 1920px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>ì˜¤ë¥˜ ë¬¸êµ¬ì— ë‹¹í™©í•˜ì§€ ë§ˆì‹œê³  ì£¼í‚¤í¼ í´ë¼ì´ì–¸íŠ¸ì—ì„œ í•´ë‹¹ ë…¸ë“œë¥¼ ìƒì„±í•œ í›„ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ íŒŒë“œë¥¼ ì‚­ì œí•˜ì„¸ìš”. ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ <code>delete</code> ëª…ë ¹ì–´ë¡œ íŒŒë“œë¥¼ ì‚­ì œí•˜ë©´ ìƒˆë¡œìš´ íŒŒë“œë¥¼ ë‹¤ì‹œ ìƒì„±í•˜ê¸° ë•Œë¬¸ì— <code>restart</code> ê°œë…ê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl delete pod/<span class=\"token operator\">&lt;</span>kafka-manager-pod<span class=\"token operator\">></span> --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Kafka Manager - Cluster - Add Cluster ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ìƒˆ í´ëŸ¬ìŠ¤í„°ë¥¼ ì¶”ê°€í•´ ë´…ì‹œë‹¤. í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•˜ëŠ” ëª©ì ì€ ì¹´í”„ì¹´ ë§¤ë‹ˆì €ì—ì„œ í† í”½ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ê²ƒìœ¼ë¡œ ì¹´í”„ì¹´, ì£¼í‚¤í¼ í´ëŸ¬ìŠ¤í„°ì™€ëŠ” ë¬´ê´€í•©ë‹ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/22e9f4cdf96b211b7a3f87b34d3bba82/5ab81/create-kafka-manager-cluster.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 455.83333333333337%; position: relative; bottom: 0; left: 0; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"\"\n        title=\"\"\n        src=\"/static/22e9f4cdf96b211b7a3f87b34d3bba82/5ab81/create-kafka-manager-cluster.jpg\"\n        srcset=\"/static/22e9f4cdf96b211b7a3f87b34d3bba82/a3e66/create-kafka-manager-cluster.jpg 480w,\n/static/22e9f4cdf96b211b7a3f87b34d3bba82/5ab81/create-kafka-manager-cluster.jpg 660w\"\n        sizes=\"(max-width: 660px) 100vw, 660px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li><strong>JMX</strong>(Java Management eXtensions): ì‹¤í–‰ ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì •ìƒ ë™ì‘ ì—¬ë¶€ ë° ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” API</li>\n<li><strong>Polling</strong>(í´ë§): ë™ê¸°í™” ì²˜ë¦¬ ë“±ì„ ëª©ì ìœ¼ë¡œ ë‹¤ë¥¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ê²€ì‚¬í•˜ì—¬ ì¼ì •í•œ ì¡°ê±´ì„ ë§Œì¡±í•  ë•Œ ì†¡ìˆ˜ì‹  ë“±ì˜ ìë£Œ ì²˜ë¦¬ë¥¼ í•˜ëŠ” ë°©ì‹</li>\n</ul>\n<p>ì¹´í”„ì¹´ ë§¤ë‹ˆì € í´ëŸ¬ìŠ¤í„° ìƒì„±ì„ ì™„ë£Œí•˜ì˜€ìŠµë‹ˆë‹¤. ì´ì œ ì¹´í”„ì¹´ ë§¤ë‹ˆì €ë¡œ í† í”½ì„ ê´€ë¦¬í•´ ë´…ì‹œë‹¤.</p>\n<h2 id=\"Topic\" style=\"position:relative;\">Topic<a href=\"#Topic\" aria-label=\"Topic permalink\" class=\"icon-heading-link after\"><svg viewBox=\"0 0 24 24\" height=\"24\" aria-hidden=\"true\"><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"></path></svg></a></h2>\n<p>Kafka <strong>Topic</strong>(í† í”½)ì€ ë©”ì‹œì§€ë¥¼ ì €ì¥í•˜ëŠ” ê³³ì…ë‹ˆë‹¤. ì¹´í”„ì¹´ì˜ ë¸Œë¡œì»¤ëŠ” í† í”½ì„ ê¸°ì¤€ìœ¼ë¡œ ë©”ì‹œì§€ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤. ì¹´í”„ì¹´ íŒŒë“œì— ì ‘ì†í•´ ë´…ì‹œë‹¤. ì‹¤ì œ í† í”½ì€ ì£¼í‚¤í¼ì— ì €ì¥í•˜ê³  ì¹´í”„ì¹´ëŠ” ì°¸ì¡°ë§Œ í•˜ê¸° ë•Œë¬¸ì— íŒŒë“œ 3ê°œ ì¤‘ ì•„ë¬´ íŒŒë“œì— ì ‘ì†í•´ë„ ë¬´ë°©í•©ë‹ˆë‹¤. í•„ìëŠ” <code>kafka-0</code> íŒŒë“œì— ì ‘ì†í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kubectl <span class=\"token builtin class-name\">exec</span> -it kafka-0 --namespace<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>your-namespace<span class=\"token operator\">></span> <span class=\"token function\">bash</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>í† í”½ì„ ìƒì„±í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kafka-topics --zookeeper kafka-zookeeper:2181 --create --topic <span class=\"token operator\">&lt;</span>insert-your-topic-name<span class=\"token operator\">></span> --partitions <span class=\"token number\">3</span> --replication-factor <span class=\"token number\">2</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li><code>--partitions</code>: í† í”½ì„ ëª‡ ê°œì˜ íŒŒí‹°ì…˜ìœ¼ë¡œ ë‚˜ëˆŒ ê²ƒì¸ì§€ ì •ì˜í•©ë‹ˆë‹¤. ë©”ì‹œì§€ ë³‘ëª© í˜„ìƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ í•˜ë‚˜ì˜ í† í”½ì„ ì—¬ëŸ¬ ê°œì˜ íŒŒí‹°ì…˜ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ë³‘ë ¬ í˜•íƒœë¡œ ì‘ì—…í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</li>\n<li><code>--replication-factor</code>: ë©”ì‹œì§€ë¥¼ ëª‡ ê°œë¡œ ë³µì œí•  ê²ƒì¸ì§€ ì •ì˜í•©ë‹ˆë‹¤. ì•ˆì •ì„±ì„ ìœ„í•˜ì—¬ 2ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.</li>\n</ul>\n<p>í† í”½ì„ ì—¬ëŸ¬ ê°œ ìƒì„±í•  ë•ŒëŠ” ëª…ë ¹ë¬¸ ë§ˆì§€ë§‰ì— <code>;</code>(ì„¸ë¯¸ì½œë¡ )ì„ ì¶”ê°€í•©ë‹ˆë‹¤. <code>\\</code>(ë°±ìŠ¬ë˜ì‹œ)ë¥¼ í™œìš©í•˜ë©´ ì¤„ ë°”ê¿ˆì„ ì ìš©í•˜ì—¬ ì¦‰ì‹œ ì‹¤í–‰ì„ ë°©ì§€í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kafka-topics --zookeeper kafka-zookeeper:2181 --create --topic <span class=\"token operator\">&lt;</span>insert-your-topic-name<span class=\"token operator\">></span> --partitions <span class=\"token number\">3</span> --replication-factor <span class=\"token number\">2</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">\\</span>\nkafka-topics --zookeeper kafka-zookeeper:2181 --create --topic <span class=\"token operator\">&lt;</span>insert-your-topic-name<span class=\"token operator\">></span> --partitions <span class=\"token number\">3</span> --replication-factor <span class=\"token number\">2</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>í† í”½ì„ í™•ì¸í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kafka-topics --zookeeper kafka-zookeeper:2181 --list</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>í† í”½ì„ ì‚­ì œí•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kafka-topics --zookeeper kafka-zookeeper:2181 --delete --topic <span class=\"token operator\">&lt;</span>insert-your-topic-name<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>í† í”½ì— ì €ì¥ëœ ë©”ì‹œì§€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=sally data-host=localhost></span></span>kafka-console-consumer --bootstrap-server kafka:9092 --topic <span class=\"token operator\">&lt;</span>your-topic-name<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>","frontmatter":{"category":"kubernetes","index":9,"title":"Apache Kafka","description":"Apache Kafka(ì•„íŒŒì¹˜ ì¹´í”„ì¹´)ëŠ” ì˜¤í”ˆ ì†ŒìŠ¤ ëŒ€ê·œëª¨ ë©”ì‹œì§€ í”Œë«í¼ì…ë‹ˆë‹¤. ëª¨ë¹Œë¦¬í‹° ìŠ¤íƒ€íŠ¸ì—…ì—ì„œ ì°¨ëŸ‰ì˜ íŒ¨í‚·ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ìˆ˜ì§‘í•˜ëŠ” ë° ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.","image":"https://github.com/aroundus/aroundus.github.io/blob/master/posts/kubernetes/kafka/cover.jpg?raw=true","date":"2020-05-25"}},"previous":{"fields":{"slug":"/post/kubernetes/pod/"},"frontmatter":{"title":"Pod"}},"next":{"fields":{"slug":"/post/kubernetes/introduction/"},"frontmatter":{"title":"Kubernetes ì†Œê°œ"}}},"pageContext":{"id":"ab9ade26-27a9-56bb-b934-e9f48bdc0237","previousPostID":"ddad2133-4517-5324-8bdf-fe971e979719","nextPostID":"375e2b29-1b27-5ed0-afab-d2b66d983863"}},
    "staticQueryHashes": ["3000541721"]}