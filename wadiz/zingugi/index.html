<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.e06eadb6c90a605ef3f8.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:visible;padding:0;position:relative}pre[class*=language-]>code{background-attachment:local;background-color:#fdfdfd;background-image:linear-gradient(transparent 50%,rgba(69,142,209,.04) 0);background-origin:content-box;background-size:3em 3em;border-left:10px solid #358ccb;box-shadow:-1px 0 0 0 #358ccb,0 0 0 1px #dfdfdf;position:relative}code[class*=language-]{display:block;height:inherit;max-height:inherit;overflow:auto;padding:0 1em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdfdfd;box-sizing:border-box;margin-bottom:1em}:not(pre)>code[class*=language-]{border:1px solid rgba(0,0,0,.1);border-radius:.3em;color:#c92c2c;display:inline;padding:.2em;position:relative;white-space:normal}pre[class*=language-]:after,pre[class*=language-]:before{bottom:.75em;box-shadow:0 13px 8px #979797;content:"";display:block;height:20%;left:.18em;max-height:13em;position:absolute;transform:rotate(-2deg);width:40%;z-index:-2}pre[class*=language-]:after{left:auto;right:.75em;transform:rotate(2deg)}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#7d8b99}.token.punctuation{color:#5f6364}.token.boolean,.token.constant,.token.deleted,.token.function-name,.token.number,.token.property,.token.symbol,.token.tag{color:#c92c2c}.token.attr-name,.token.builtin,.token.char,.token.function,.token.inserted,.token.selector,.token.string{color:#2f9c0a}.token.entity,.token.operator,.token.url,.token.variable{background:hsla(0,0%,100%,.5);color:#a67f59}.token.atrule,.token.attr-value,.token.class-name,.token.keyword{color:#1990b8}.token.important,.token.regex{color:#e90}.language-css .token.string,.style .token.string{background:hsla(0,0%,100%,.5);color:#a67f59}.token.important{font-weight:400}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.namespace{opacity:.7}@media screen and (max-width:767px){pre[class*=language-]:after,pre[class*=language-]:before{bottom:14px;box-shadow:none}}pre[class*=language-].line-numbers.line-numbers{padding-left:0}pre[class*=language-].line-numbers.line-numbers code{padding-left:3.8em}pre[class*=language-].line-numbers.line-numbers .line-numbers-rows{left:0}pre[class*=language-][data-line]{padding-bottom:0;padding-left:0;padding-top:0}pre[data-line] code{padding-left:4em;position:relative}pre .line-highlight{margin-top:0}.command-line-prompt{border-right:1px solid #999;display:block;float:left;font-size:100%;letter-spacing:-1px;margin-right:1em;pointer-events:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.command-line-prompt>span:before{color:#999;content:" ";display:block;padding-right:.8em}.command-line-prompt>span[data-user]:before{content:"[" attr(data-user) "@" attr(data-host) "] $"}.command-line-prompt>span[data-user=root]:before{content:"[" attr(data-user) "@" attr(data-host) "] #"}.command-line-prompt>span[data-prompt]:before{content:attr(data-prompt)}pre[data-line]{padding:1em 0 1em 3em;position:relative}.line-highlight{background:hsla(24,20%,50%,.08);background:linear-gradient(90deg,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));left:0;line-height:inherit;margin-top:1em;padding-bottom:inherit;padding-left:0;padding-right:0;padding-top:inherit;pointer-events:none;position:absolute;right:0;white-space:pre}@media print{.line-highlight{-webkit-print-color-adjust:exact;color-adjust:exact}}.line-highlight:before,.line-highlight[data-end]:after{background-color:hsla(24,20%,50%,.4);border-radius:999px;box-shadow:0 1px #fff;color:#f5f2f0;content:attr(data-start);font:700 65%/1.5 sans-serif;left:.6em;min-width:1em;padding:0 .5em;position:absolute;text-align:center;text-shadow:none;top:.4em;vertical-align:.3em}.line-highlight[data-end]:after{bottom:.4em;content:attr(data-end);top:auto}.line-numbers .line-highlight:after,.line-numbers .line-highlight:before{content:none}pre[id].linkable-line-numbers span.line-numbers-rows{pointer-events:all}pre[id].linkable-line-numbers span.line-numbers-rows>span:before{cursor:pointer}pre[id].linkable-line-numbers span.line-numbers-rows>span:hover:before{background-color:hsla(0,0%,50%,.2)}pre[class*=language-].line-numbers{counter-reset:linenumber;padding-left:3.8em;position:relative}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{border-right:1px solid #999;font-size:100%;left:-3.8em;letter-spacing:-1px;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;-ms-user-select:none;user-select:none;width:3em}.line-numbers-rows>span{counter-increment:linenumber;display:block}.line-numbers-rows>span:before{color:#999;content:counter(linenumber);display:block;padding-right:.8em;text-align:right}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:400;src:url(/static/montserrat-cyrillic-ext-400-normal-be7c8d4bb41261280793d050d7750fa3.woff2) format("woff2"),url(/static/montserrat-all-400-normal-815a9e9ccfffa41179b2e78aa4ca3b79.woff) format("woff");unicode-range:U+0460-052f,U+1c80-1c88,U+20b4,U+2de0-2dff,U+a640-a69f,U+fe2e-fe2f}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:400;src:url(/static/montserrat-cyrillic-400-normal-78211743d72d9a04678dc64605d4d8d2.woff2) format("woff2"),url(/static/montserrat-all-400-normal-815a9e9ccfffa41179b2e78aa4ca3b79.woff) format("woff");unicode-range:U+0400-045f,U+0490-0491,U+04b0-04b1,U+2116}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:400;src:url(data:font/woff2;base64,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) format("woff2"),url(/static/montserrat-all-400-normal-815a9e9ccfffa41179b2e78aa4ca3b79.woff) format("woff");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01a0-01a1,U+01af-01b0,U+1ea0-1ef9,U+20ab}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:400;src:url(/static/montserrat-latin-ext-400-normal-cdad8f0d701035d895b72705ecf33d16.woff2) format("woff2"),url(/static/montserrat-all-400-normal-815a9e9ccfffa41179b2e78aa4ca3b79.woff) format("woff");unicode-range:U+0100-024f,U+0259,U+1e??,U+2020,U+20a0-20ab,U+20ad-20cf,U+2113,U+2c60-2c7f,U+a720-a7ff}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:400;src:url(/static/montserrat-latin-400-normal-b07bcc994632839adaff56a67b143cf1.woff2) format("woff2"),url(/static/montserrat-all-400-normal-815a9e9ccfffa41179b2e78aa4ca3b79.woff) format("woff");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}</style><meta name="generator" content="Gatsby 3.14.6"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .icon-heading-link.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .icon-heading-link.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .icon-heading-link svg,
    h2 .icon-heading-link svg,
    h3 .icon-heading-link svg,
    h4 .icon-heading-link svg,
    h5 .icon-heading-link svg,
    h6 .icon-heading-link svg {
      visibility: hidden;
    }
    h1:hover .icon-heading-link svg,
    h2:hover .icon-heading-link svg,
    h3:hover .icon-heading-link svg,
    h4:hover .icon-heading-link svg,
    h5:hover .icon-heading-link svg,
    h6:hover .icon-heading-link svg,
    h1 .icon-heading-link:focus svg,
    h2 .icon-heading-link:focus svg,
    h3 .icon-heading-link:focus svg,
    h4 .icon-heading-link:focus svg,
    h5 .icon-heading-link:focus svg,
    h6 .icon-heading-link:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link as="script" rel="preload" href="/webpack-runtime-f0617ee23730b7b50cd2.js"/><link as="script" rel="preload" href="/framework-345c7b9eeb7bc9218cda.js"/><link as="script" rel="preload" href="/app-4124be946072d5486c9a.js"/><link as="script" rel="preload" href="/133dbbf1d86d892ff1bf148d88afcf8c565d1168-e9b58e95995c3dfba6f8.js"/><link as="script" rel="preload" href="/component---src-components-template-post-template-tsx-176f12a2c72ece8e210d.js"/><link as="fetch" rel="preload" href="/page-data/wadiz/zingugi/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3000541721.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css-global dteyz9">html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%;}*,*::before,*::after{box-sizing:inherit;}strong,b{font-weight:700;}body{margin:0;color:rgba(0, 0, 0, 0.87);letter-spacing:0.2px;font-family:"SF Pro KR","SF Pro Display","SF Pro Icons",-apple-system,sans-serif;font-weight:400;font-size:1.8285714285714285rem;line-height:1.5;background-color:#fff;}@media print{body{background-color:#fff;}}body::backdrop{background-color:#fff;}html{-webkit-font-smoothing:antialiased;font-size:10px;}body{background-color:#fff;color:#000;font-family:"SF Pro KR","SF Pro Display","SF Pro Icons",-apple-system,sans-serif;font-weight:400;line-height:1.4;overflow-wrap:break-word;word-break:keep-all;}section{position:relative;}h1,h2,h3,h4,h5,h6{font-family:Montserrat,"SF Pro KR","SF Pro Display","SF Pro Icons",-apple-system,sans-serif;line-height:1.3;}h1 .icon-heading-link,h2 .icon-heading-link,h3 .icon-heading-link,h4 .icon-heading-link,h5 .icon-heading-link,h6 .icon-heading-link{border-bottom:none;}h1 .icon-heading-link svg,h2 .icon-heading-link svg,h3 .icon-heading-link svg,h4 .icon-heading-link svg,h5 .icon-heading-link svg,h6 .icon-heading-link svg{visibility:visible;}h1{font-size:2em;margin-block-start:2.2em;}h2{font-size:1.8em;margin-block-start:2em;}h3{font-size:1.4em;margin-block-start:1.8em;}p{letter-spacing:0.2px;line-height:1.6;}p code{padding:4px 12px;border-radius:4px;color:#e64a19;background-color:#eeeeee;zoom:0.8;}strong{color:#000;}a{border-bottom:2px solid #26c6da;color:#000;-webkit-transition:0.2s;transition:0.2s;-webkit-text-decoration:none;text-decoration:none;}a:hover{color:#00acc1;}blockquote{margin:2em 0;padding-left:1em;border-left:4px solid #e0e0e0;font-size:0.96em;color:#757575;}code{font-family:"SF Mono","Roboto Mono",Consolas,monospace;font-weight:500;}figure{margin:0;}figure figcaption{color:#757575;font-size:0.86em;text-align:center;}img{max-width:100%;border-radius:8px;}li a{border-bottom:none;}li code{margin-right:2px;padding:2px 8px;border-radius:4px;color:#0097a7;background-color:#f5f5f5;zoom:0.86;}table{display:block;border-collapse:collapse;overflow-x:auto;font-size:16px;}table th,table td{padding:4px 12px;border:1px solid #e0e0e0;}table th code,table td code{padding:2px 8px;border-radius:4px;background-color:#f5f5f5;zoom:0.9;}table th{background-color:#eeeeee;}.gatsby-highlight code[class*="language-"],.gatsby-highlight pre[class*="language-"]{font-family:"SF Mono","Roboto Mono",Consolas,monospace;font-size:14px;font-weight:500;}.gatsby-highlight pre[class*="language-"]{border-radius:4px;}.gatsby-highlight pre[class*="language-"]::after,.gatsby-highlight pre[class*="language-"]::before{box-shadow:none;}.gatsby-highlight pre[class*="language-"].line-numbers.line-numbers code{padding:24px;padding-left:64px;box-shadow:none;}.gatsby-highlight pre[class*="language-"].line-numbers .line-numbers-rows{padding:24px 0;min-width:48px;border-left:8px solid #4dd0e1;background-image:linear-gradient(#fff 50%, #f5f5f5 50%);-webkit-background-size:3em 3em;background-size:3em 3em;background-origin:content-box;letter-spacing:0;}.gatsby-highlight pre[class*="language-"].line-numbers .line-numbers-rows >span{padding-left:12px;}.gatsby-highlight pre[class*="language-"] >code{border-left:none;background-image:linear-gradient(#fff 50%, #f5f5f5 50%);}.gatsby-highlight .command-line-prompt{letter-spacing:0;}</style><style data-emotion="css 1k5ifgb">.css-1k5ifgb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:absolute;z-index:1100;top:0;left:auto;right:0;background-color:transparent;color:inherit;}</style><style data-emotion="css 109nu0d">.css-109nu0d{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;box-shadow:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:absolute;z-index:1100;top:0;left:auto;right:0;background-color:transparent;color:inherit;}</style><nav class="MuiPaper-root MuiPaper-elevation MuiPaper-elevation0 MuiAppBar-root MuiAppBar-colorTransparent MuiAppBar-positionAbsolute css-109nu0d" style="padding:0 64px"><style data-emotion="css mjywep">.css-mjywep{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:48px;}</style><div class="MuiToolbar-root MuiToolbar-dense Navbar-toolbar-0-2-2 css-mjywep"><style data-emotion="css 1xy3f5b">.css-1xy3f5b{-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(0, 172, 193, 0.4);}.css-1xy3f5b:hover{text-decoration-color:inherit;}</style><style data-emotion="css 1xovuf9">.css-1xovuf9{margin:0;color:#00acc1;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:rgba(0, 172, 193, 0.4);}.css-1xovuf9:hover{text-decoration-color:inherit;}</style><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-1xovuf9" href="/"><svg viewBox="0 0 963.61 122.77" height="14" style="fill:#fff"><path d="M628.78,3.63,672,3.2A81.78,81.78,0,0,1,698.81,7a56.66,56.66,0,0,1,20,11.25,48.84,48.84,0,0,1,12.5,17.4,57.42,57.42,0,0,1,4.45,22.27v.32a57.71,57.71,0,0,1-4.1,22.53,50.56,50.56,0,0,1-12.31,18,57.74,57.74,0,0,1-20,12,80,80,0,0,1-26.92,4.51l-42.56.41Zm44.55,84.05q14-.15,22.41-7.58t8.3-21v-.32q-.13-13.44-8.72-20.79t-22.55-7.22l-12.68.12.55,57Z"></path><polygon points="32.64 122.45 0 122.77 46.57 9.61 76.49 9.32 125.28 121.74 92 122.07 61.66 46.42 32.64 122.45"></polygon><path d="M135.06,9.55,188,9q13-.13,22,3a37.57,37.57,0,0,1,14.65,8.82q10,9.51,10.18,26v.32q.12,13-6,21.5a39.35,39.35,0,0,1-16.67,13.12l27.1,38.78-35.84.35-22.89-33.7h-.32l-13.28.13.33,33.92-31,.3Zm52,53.25q8-.07,12.29-3.72a12,12,0,0,0,4.22-9.72V49q-.08-6.72-4.58-10t-12.35-3.16l-20.32.2L166.62,63Z"></path><path d="M307.53,122.1a62.14,62.14,0,0,1-24-4.32,59.11,59.11,0,0,1-19.16-12.22,57.28,57.28,0,0,1-12.74-18.27,56.33,56.33,0,0,1-4.78-22.52v-.32a57.11,57.11,0,0,1,16.87-41.36,60.2,60.2,0,0,1,19.08-12.67,65.51,65.51,0,0,1,48-.47,59.26,59.26,0,0,1,19.16,12.21,57.44,57.44,0,0,1,12.74,18.28A56.28,56.28,0,0,1,367.43,63v.32a57,57,0,0,1-16.87,41.37,60.37,60.37,0,0,1-19.08,12.67A62.18,62.18,0,0,1,307.53,122.1Zm0-28a28.07,28.07,0,0,0,11.69-2.51A27,27,0,0,0,328.1,85a30,30,0,0,0,5.68-9.58,31.73,31.73,0,0,0,2-11.54v-.32a31.77,31.77,0,0,0-2.2-11.49A29.14,29.14,0,0,0,318.32,36a29.2,29.2,0,0,0-23.35.15,27.9,27.9,0,0,0-14.6,16.15,33.26,33.26,0,0,0-1.9,11.53v.32a31.79,31.79,0,0,0,2.2,11.5,30,30,0,0,0,5.95,9.55,28.21,28.21,0,0,0,9.13,6.55A27.23,27.23,0,0,0,307.49,94.1Z"></path><path d="M434.56,120.7a71.48,71.48,0,0,1-21.63-2.83,41.81,41.81,0,0,1-16.41-9.2A41.31,41.31,0,0,1,386,92.77,65.27,65.27,0,0,1,382.22,70L381.6,7.13l31.68-.31.61,62.24Q414,81.22,419.62,87t15,5.7Q444,92.61,449.47,87t5.39-17.49l-.62-63,31.68-.31.61,62.08q.12,13.61-3.53,23.47a40.65,40.65,0,0,1-26.79,25.79A72.27,72.27,0,0,1,434.56,120.7Z"></path><path d="M504.32,5.93l29-.28,46.75,58.74L579.51,5.2l30.56-.3,1.1,112-27.26.27-48.54-61,.6,61.44-30.56.3Z"></path><path d="M803.82,117.09a71.8,71.8,0,0,1-21.63-2.83,41.81,41.81,0,0,1-16.41-9.2,41.31,41.31,0,0,1-10.48-15.9,65.31,65.31,0,0,1-3.82-22.76l-.62-62.88,31.68-.31.61,62.24q.12,12.15,5.73,17.94t15,5.69q9.38-.09,14.87-5.74t5.39-17.49l-.62-63,31.68-.31.61,62.08q.12,13.59-3.54,23.47a40.62,40.62,0,0,1-26.78,25.78A72.27,72.27,0,0,1,803.82,117.09Z"></path><path d="M918.69,115.8a86.72,86.72,0,0,1-28.61-4.39A69.09,69.09,0,0,1,866,97.64l17.08-20.85Q900,90.07,919.56,89.87c4.16,0,7.32-.73,9.5-2.09a6.29,6.29,0,0,0,3.22-5.7v-.32a6,6,0,0,0-.83-3.1,8.25,8.25,0,0,0-3-2.61,30.76,30.76,0,0,0-5.78-2.42,95.25,95.25,0,0,0-9.39-2.38q-9-2-16.68-4.39a50.9,50.9,0,0,1-13.42-6.26,28.92,28.92,0,0,1-9.06-9.66q-3.33-5.79-3.42-14.42v-.31a34.56,34.56,0,0,1,2.82-14.41,31.84,31.84,0,0,1,8.53-11.42,40.61,40.61,0,0,1,13.6-7.56A57.51,57.51,0,0,1,913.72,0a80.33,80.33,0,0,1,25.71,3.53,64.7,64.7,0,0,1,20.51,11l-15.3,22.13a63.13,63.13,0,0,0-15.84-8.08,47.69,47.69,0,0,0-15.63-2.65c-3.73,0-6.53.76-8.38,2.16A6.19,6.19,0,0,0,902,33.23v.32a6.3,6.3,0,0,0,.92,3.34A7.89,7.89,0,0,0,906,39.5a33.6,33.6,0,0,0,6,2.34c2.51.77,5.69,1.57,9.54,2.38a137.38,137.38,0,0,1,17.41,4.7,51.68,51.68,0,0,1,13.26,6.66,27.28,27.28,0,0,1,8.42,9.58,29.55,29.55,0,0,1,3,13.47V79a34.43,34.43,0,0,1-3.13,15.36,32.88,32.88,0,0,1-9.09,11.51,41.72,41.72,0,0,1-14.17,7.33A64.89,64.89,0,0,1,918.69,115.8Z"></path></svg></a><style data-emotion="css 8leiis">.css-8leiis{margin:0;font-family:"SF Pro KR","SF Pro Display","SF Pro Icons",-apple-system,sans-serif;font-weight:500;font-size:1.5999999999999999rem;line-height:1.57;color:#fff;line-height:1.3;white-space:nowrap;margin-left:12px;}</style><h6 class="MuiTypography-root MuiTypography-subtitle2 css-8leiis">프론트엔드 블로그</h6></div></nav><main><section class="KeyVisualSection-container-0-2-3" style="padding:256px 64px 64px"><div class="KeyVisualSection-content-0-2-4"><style data-emotion="css txqz4p">.css-txqz4p{margin:0;font-family:Montserrat,"SF Pro KR","SF Pro Display","SF Pro Icons",-apple-system,sans-serif;font-weight:bold;font-size:2.2857142857142856rem;line-height:1.6;color:#eeeeee;position:relative;margin-bottom:8px;}</style><h6 class="MuiTypography-root MuiTypography-h6 css-txqz4p">#<!-- -->wadiz<!-- --> Episode <!-- -->1</h6><style data-emotion="css 1d4r130">.css-1d4r130{margin:0;font-family:Montserrat,"SF Pro KR","SF Pro Display","SF Pro Icons",-apple-system,sans-serif;font-weight:bold;font-size:5.485714285714285rem;line-height:1.167;color:#fff;position:relative;}</style><h3 class="MuiTypography-root MuiTypography-h3 css-1d4r130">REACH TO THE NEXT LEVEL, 개발자의 마일스톤 🚀</h3><style data-emotion="css 6ilkuq">.css-6ilkuq{margin:0;font-family:Montserrat,"SF Pro KR","SF Pro Display","SF Pro Icons",-apple-system,sans-serif;line-height:1.5;font-weight:400;font-size:1.8285714285714285rem;color:#fff;position:relative;margin-top:12px;}</style><h6 class="MuiTypography-root MuiTypography-subtitle1 css-6ilkuq">2021-11-23</h6></div></section><style data-emotion="css 1a1a07z">.css-1a1a07z{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;display:block;padding-left:8px;padding-right:8px;margin-left:auto;margin-right:auto;padding-left:32px;padding-right:32px;padding-top:40px;padding-bottom:40px;}@media (min-width:600px){.css-1a1a07z{padding-left:12px;padding-right:12px;}}@media (min-width:900px){.css-1a1a07z{max-width:900px;}}</style><section class="MuiContainer-root MuiContainer-maxWidthMd css-1a1a07z"><p>Amazon <strong>EKS</strong>(Elastic Kubernetes Service)는 아마존 웹 서비스에서 제공하는 쿠버네티스 서비스입니다. 쿠버네티스로 EKS 인프라를 구성해 봅시다. 내용이 방대하여 사전 설치가 필요한 명령어 및 프로그램에 대한 설명이 생략될 수 있습니다.</p>
<h2 id="목차" style="position:relative;">목차<a href="#%EB%AA%A9%EC%B0%A8" aria-label="목차 permalink" class="icon-heading-link after"><svg viewBox="0 0 24 24" height="24" aria-hidden="true"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<ol>
<li><a href="#IAM-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%B6%94%EA%B0%80">IAM 사용자 추가</a></li>
<li><a href="#EKS-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%83%9D%EC%84%B1">EKS 클러스터 생성</a></li>
<li><a href="#%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%ED%81%B4%EB%9E%98%EC%8A%A4-%EB%B0%B0%ED%8F%AC">스토리지 클래스 배포</a></li>
<li><a href="#ebs-csi-%EB%93%9C%EB%9D%BC%EC%9D%B4%EB%B2%84-%EB%B0%B0%ED%8F%AC">EBS CSI 드라이버 배포</a></li>
<li><a href="#alb-%EC%88%98%EC%8B%A0-%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC-%EB%B0%B0%ED%8F%AC">ALB 수신 컨트롤러 배포</a></li>
<li><a href="#rds-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%83%9D%EC%84%B1">RDS 데이터베이스 생성</a></li>
<li><a href="#%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4-%EC%83%9D%EC%84%B1">네임스페이스 생성</a></li>
<li><a href="#externalname-%EC%84%A4%EC%A0%95">ExternalName 설정</a></li>
<li><a href="#mariadb-cli-%EB%B0%B0%ED%8F%AC">MariaDB CLI 배포</a></li>
<li><a href="#maxscale-%EB%B0%B0%ED%8F%AC">MaxScale 배포</a></li>
<li><a href="#docker-%EC%9E%90%EA%B2%A9-%EC%A6%9D%EB%AA%85-%EA%B8%B0%EB%B0%98-secret-%EB%B0%B0%ED%8F%AC">Docker 자격 증명 기반 Secret 배포</a></li>
</ol>
<h2 id="IAM-사용자-추가" style="position:relative;">IAM 사용자 추가<a href="#IAM-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%B6%94%EA%B0%80" aria-label="IAM 사용자 추가 permalink" class="icon-heading-link after"><svg viewBox="0 0 24 24" height="24" aria-hidden="true"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p>AWS 서비스를 사용하기 위해 루트 사용자 이메일 주소로 <strong>IAM</strong>(Identity and Access Management, 아이에이앰)에 사용자를 추가해야 합니다. 자세한 정보는 <a href="https://sallyworld.github.io/blog/post/aws/iam">Sally > IAM</a> 내용을 참조해 주세요.</p>
<h2 id="Kubernetes-API" style="position:relative;">Kubernetes API<a href="#Kubernetes-API" aria-label="Kubernetes API permalink" class="icon-heading-link after"><svg viewBox="0 0 24 24" height="24" aria-hidden="true"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p>쿠버네티스 오브젝트는 <strong>쿠버네티스 API</strong>를 요청하여 생성합니다. 쿠버네티스 오브젝트를 생성할 때 오브젝트에 대한 기본적인 정보와 더불어 의도한 상태를 기술한 오브젝트 <code>spec</code>이 필요합니다. 요청한 내용은 JSON 형식으로 정보를 포함하는데 대부분 <code>.yaml</code> 파일로 <code>kubectl</code>에 제공합니다. <code>kubectl</code>은 API 요청이 이루어질 때 JSON 형식으로 정보를 변환합니다.</p>
<p><strong>deployment.yaml</strong> (예시)</p>
<div class="gatsby-highlight" data-language="yaml"><pre style="counter-reset: linenumber NaN" class="language-yaml line-numbers"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>deployment
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
          <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>1.14.2
          <span class="token key atrule">ports</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">80</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>생성하고자 하는 쿠버네티스 오브젝트에 대한 <code>.yaml</code> 파일 내, 다음 필드를 위한 값들을 설정합니다.</p>
<ul>
<li>apiVersion: 해당 오브젝트 생성에 사용하는 쿠버네티스 API 버전 (안정성: stable > beta > alpha)</li>
<li>kind: 오브젝트의 종류</li>
<li>metadata: 유일한 오브젝트로 구분하기 위한 데이터</li>
<li>spec: 오브젝트에 대한 상태</li>
</ul>
<p>오브젝트 <code>spec</code>에 대한 정확한 포맷은 모든 쿠버네티스 오브젝트마다 다르고, 그 오브젝트 특유의 중첩된 필드를 포함합니다. 다음 명령어를 입력하여 오브젝트를 생성합니다.</p>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span></span>kubectl apply -f deployment.yaml</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>자세한 정보는 <a href="https://kubernetes.io/ko/docs/concepts/overview/working-with-objects/kubernetes-objects/">쿠버네티스 공식 문서 > 쿠버네티스 오브젝트 이해하기</a> 내용을 참조해 주세요.</p>
<h2 id="EKS-클러스터-생성" style="position:relative;">EKS 클러스터 생성<a href="#EKS-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%83%9D%EC%84%B1" aria-label="EKS 클러스터 생성 permalink" class="icon-heading-link after"><svg viewBox="0 0 24 24" height="24" aria-hidden="true"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p>쿠버네티스를 시작하기 위해 가장 먼저 해야 할 일은 <strong>클러스터</strong>를 생성하는 것입니다. 쿠버네티스 클러스터는 컨테이너화된 애플리케이션을 실행하는 노드의 집합입니다.</p>
<p><strong>cluster.yaml</strong></p>
<div class="gatsby-highlight" data-language="yaml"><pre style="counter-reset: linenumber NaN" class="language-yaml line-numbers"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> eksctl.io/v1alpha5
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterConfig
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> &lt;insert<span class="token punctuation">-</span>your<span class="token punctuation">-</span>cluster<span class="token punctuation">-</span>name<span class="token punctuation">></span>
  <span class="token key atrule">region</span><span class="token punctuation">:</span> ap<span class="token punctuation">-</span>northeast<span class="token punctuation">-</span><span class="token number">2</span>
<span class="token key atrule">vpc</span><span class="token punctuation">:</span>
  <span class="token key atrule">cidr</span><span class="token punctuation">:</span> <span class="token string">"&lt;insert-your-cidr>"</span>
  <span class="token key atrule">nat</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span> HighlyAvailable
<span class="token key atrule">nodeGroups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> &lt;insert<span class="token punctuation">-</span>your<span class="token punctuation">-</span>worker<span class="token punctuation">-</span>name<span class="token punctuation">></span>
    <span class="token key atrule">instanceType</span><span class="token punctuation">:</span> m5.large
    <span class="token key atrule">availabilityZones</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ap<span class="token punctuation">-</span>northeast<span class="token punctuation">-</span>2a
      <span class="token punctuation">-</span> ap<span class="token punctuation">-</span>northeast<span class="token punctuation">-</span>2b
    <span class="token key atrule">labels</span><span class="token punctuation">:</span>
      <span class="token key atrule">role</span><span class="token punctuation">:</span> worker
    <span class="token key atrule">desiredCapacity</span><span class="token punctuation">:</span> <span class="token number">2</span>
    <span class="token key atrule">privateNetworking</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">iam</span><span class="token punctuation">:</span>
      <span class="token key atrule">withAddonPolicies</span><span class="token punctuation">:</span>
        <span class="token key atrule">ebs</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">efs</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">autoScaler</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span></span>eksctl create cluster -f cluster.yaml</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/create-cluster.jpg)</p>
<p>도커에서 쿠버네티스를 활성화하면 기본적으로 <code>current-context</code> 필드를 <code>docker-desktop</code> 클러스터로 지정합니다. <code>~/.kube/config</code> 파일에서 현재 생성한 클러스터로 변경이 잘 이루어졌는지 확인해 주세요.</p>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span></span>kubectl config get-contexts</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<figure>
  <img src="https://user-images.githubusercontent.com/16731356/143092527-2efe96ff-5f60-448d-ba1e-6ef3e2cb7a84.jpg">
  <figcaption>캡션 예시입니다.</figcaption>
</figure>
<h3 id="VPC" style="position:relative;">VPC<a href="#VPC" aria-label="VPC permalink" class="icon-heading-link after"><svg viewBox="0 0 24 24" height="24" aria-hidden="true"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3>
<p><strong>VPC</strong>(Virtual Private Cloud)는 사용자의 AWS 계정 전용 가상 네트워크입니다.</p>
<p>VPC는 AWS 클라우드에서 다른 가상 네트워크와 논리적으로 분리되어 있습니다. Amazon EC2 인스턴스와 같은 AWS 리소스를 VPC에서 실행할 수 있습니다.</p>
<p>VPC를 만들 때 VPC의 IPv4 주소의 범위는 <strong>CIDR</strong>(Classless Inter-Domain Routing, 사이더) 블록 형태로 지정해야 합니다. (예: 172.31.0.0/16) 자세한 정보는 <a href="https://m.blog.naver.com/ncloud24/221208338209">CIDR 표기법</a> 내용을 참조해 주세요.</p>
<h3 id="NAT-Gateway" style="position:relative;">NAT Gateway<a href="#NAT-Gateway" aria-label="NAT Gateway permalink" class="icon-heading-link after"><svg viewBox="0 0 24 24" height="24" aria-hidden="true"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3>
<p><strong>NAT</strong>(Network Address Translation, 네트워크 주소 변환) 게이트웨이는 프라이빗 서브넷의 인스턴스를 인터넷 또는 기타 AWS 서비스에 연결합니다.</p>
<blockquote>
<p>필자의 경우 프라이빗 서브넷을 사용하기 때문에 NAT 게이트웨이를 사용합니다.</p>
</blockquote>
<h3 id="CloudFormation" style="position:relative;">CloudFormation<a href="#CloudFormation" aria-label="CloudFormation permalink" class="icon-heading-link after"><svg viewBox="0 0 24 24" height="24" aria-hidden="true"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3>
<p><strong>CloudFormation</strong>은 인프라 관리를 간소화하여 리소스 관리 시간을 줄이고 AWS에서 실행되는 애플리케이션에 더 많은 시간을 사용하도록 해 주는 서비스입니다. 템플릿을 사용하여 스택을 생성할 경우 Auto Scaling 그룹, 로드 밸런서 및 데이터베이스를 자동으로 프로비저닝합니다.</p>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/create-cloudformation-stack-completed.jpg)</p>
<p>클러스터 생성을 성공적으로 완료하였습니다. 생성 도중에 문제가 발생한 경우에도 해당 서비스를 통해 확인할 수 있습니다.</p>
<h2 id="스토리지-클래스-배포" style="position:relative;">스토리지 클래스 배포<a href="#%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%ED%81%B4%EB%9E%98%EC%8A%A4-%EB%B0%B0%ED%8F%AC" aria-label="스토리지 클래스 배포 permalink" class="icon-heading-link after"><svg viewBox="0 0 24 24" height="24" aria-hidden="true"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p>볼륨은 쿠버네티스의 디스크 서비스입니다. 쿠버네티스는 많은 유형의 볼륨을 지원하고, 파드는 여러 볼륨을 동시에 사용할 수 있습니다. 볼륨 유형에 대한 전체 목록은 <a href="https://kubernetes.io/ko/docs/concepts/storage/volumes/#%EB%B3%BC%EB%A5%A8-%EC%9C%A0%ED%98%95%EB%93%A4">쿠버네티스 공식 문서 > 볼륨 유형들</a> 내용을 참조해 주세요.</p>
<p><strong>storage-classes.yaml</strong></p>
<div class="gatsby-highlight" data-language="yaml"><pre style="counter-reset: linenumber NaN" class="language-yaml line-numbers"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> storage.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> StorageClass
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ebs<span class="token punctuation">-</span>default
<span class="token key atrule">provisioner</span><span class="token punctuation">:</span> ebs.csi.aws.com
<span class="token key atrule">volumeBindingMode</span><span class="token punctuation">:</span> WaitForFirstConsumer
<span class="token key atrule">parameters</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> gp2
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> storage.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> StorageClass
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ebs<span class="token punctuation">-</span>default<span class="token punctuation">-</span>a
<span class="token key atrule">provisioner</span><span class="token punctuation">:</span> ebs.csi.aws.com
<span class="token key atrule">volumeBindingMode</span><span class="token punctuation">:</span> WaitForFirstConsumer
<span class="token key atrule">parameters</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> gp2
<span class="token key atrule">allowedTopologies</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">matchLabelExpressions</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">key</span><span class="token punctuation">:</span> topology.ebs.csi.aws.com/zone
        <span class="token key atrule">values</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> ap<span class="token punctuation">-</span>northeast<span class="token punctuation">-</span>2a
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> storage.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> StorageClass
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ebs<span class="token punctuation">-</span>default<span class="token punctuation">-</span>encrypted
<span class="token key atrule">provisioner</span><span class="token punctuation">:</span> ebs.csi.aws.com
<span class="token key atrule">volumeBindingMode</span><span class="token punctuation">:</span> WaitForFirstConsumer
<span class="token key atrule">parameters</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> gp2
  <span class="token key atrule">encrypted</span><span class="token punctuation">:</span> <span class="token string">"true"</span>
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> storage.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> StorageClass
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ebs<span class="token punctuation">-</span>fast
<span class="token key atrule">provisioner</span><span class="token punctuation">:</span> ebs.csi.aws.com
<span class="token key atrule">volumeBindingMode</span><span class="token punctuation">:</span> WaitForFirstConsumer
<span class="token key atrule">parameters</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> io1
  <span class="token key atrule">iopsPerGB</span><span class="token punctuation">:</span> <span class="token string">"10"</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>볼륨 타입은 애플리케이션의 입출력 특성에 따라 선택합니다.</p>
<ul>
<li><code>gp2</code>: 범용 SSD 볼륨</li>
<li><code>io1</code>: 프로비저닝된 IOPS SSD 볼륨</li>
</ul>
<blockquote>
<p>IOPS(Input/Output Operations Per Second, 아이옵스): 초당 입/출력 처리 횟수</p>
</blockquote>
<p><code>volumeBindingMode</code> 필드는 볼륨 바인딩과 동적 프로비저닝의 시작 시기를 제어합니다. <code>WaitForFirstConsumer</code> 모드로 지정하면 볼륨을 사용하는 파드가 생성될 때까지 볼륨의 바인딩과 프로비저닝을 지연시킵니다.</p>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl apply -f storage-classes.yaml
kubectl get storageclasses</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/apply-storageclasses.jpg)</p>
<blockquote>
<p>필자는 스토리지 클래스 8개를 생성하였습니다. 예제에는 내용이 길어서 4개만 작성하였습니다.</p>
</blockquote>
<p>스토리지 클래스 생성을 완료하였습니다. 클러스터 관리자는 앞으로 생성할 오브젝트에 <code>storageClassName</code> 필드가 있다면 해당 스토리지 클래스의 <code>name</code> 값을 입력해야 합니다. 쿠버네티스는 동적 볼륨 프로비저닝을 통해 On-Demand(온디맨드, 주문형 서비스) 방식으로 스토리지 볼륨을 생성합니다.</p>
<blockquote>
<p>온디맨드 방식은 볼륨을 원하는 옵션으로 상품화하여 등록한 후 앞으로 사용할 오브젝트에서 해당 볼륨을 선택해 주문하는 방식을 의미합니다.</p>
</blockquote>
<h2 id="EBS-CSI-드라이버-배포" style="position:relative;">EBS CSI 드라이버 배포<a href="#EBS-CSI-%EB%93%9C%EB%9D%BC%EC%9D%B4%EB%B2%84-%EB%B0%B0%ED%8F%AC" aria-label="EBS CSI 드라이버 배포 permalink" class="icon-heading-link after"><svg viewBox="0 0 24 24" height="24" aria-hidden="true"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p>EBS(Elastic Block Store, 고성능 블록 스토리지 서비스) <strong>CSI</strong>(Container Storage Interface)는 쿠버네티스를 위한 임의의 스토리지 시스템을 컨테이너 워크로드에 노출시키는 인터페이스입니다. EBS CSI 드라이버는 EKS 클러스터가 EBS 볼륨의 수명 주기를 관리할 수 있게 해 주는 CSI 인터페이스를 제공합니다.</p>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span></span>kubectl apply -k <span class="token string">"github.com/kubernetes-sigs/aws-ebs-csi-driver/deploy/kubernetes/overlays/stable/?ref=master"</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<ul>
<li><code>-k</code>: kustomization directory</li>
</ul>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/apply-aws-ebs-csi-driver.jpg)</p>
<p>EBS CSI 드라이버를 사용하기 위하여 노드 그룹에 정책을 연결해 봅시다. IAM - 정책 - 정책 생성 버튼 클릭 후 다음과 같이 정책을 하나 생성해 주세요. 이름은 마음대로 하셔도 됩니다. (필자는 <code>Amazon_EBS_CSI_Driver</code> 이름으로 생성)</p>
<div class="gatsby-highlight" data-language="json"><pre style="counter-reset: linenumber NaN" class="language-json line-numbers"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"Version"</span><span class="token operator">:</span> <span class="token string">"2012-10-17"</span><span class="token punctuation">,</span>
    <span class="token property">"Statement"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span>
            <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"ec2:AttachVolume"</span><span class="token punctuation">,</span>
                <span class="token string">"ec2:CreateSnapshot"</span><span class="token punctuation">,</span>
                <span class="token string">"ec2:CreateTags"</span><span class="token punctuation">,</span>
                <span class="token string">"ec2:CreateVolume"</span><span class="token punctuation">,</span>
                <span class="token string">"ec2:DeleteSnapshot"</span><span class="token punctuation">,</span>
                <span class="token string">"ec2:DeleteTags"</span><span class="token punctuation">,</span>
                <span class="token string">"ec2:DeleteVolume"</span><span class="token punctuation">,</span>
                <span class="token string">"ec2:DescribeInstances"</span><span class="token punctuation">,</span>
                <span class="token string">"ec2:DescribeSnapshots"</span><span class="token punctuation">,</span>
                <span class="token string">"ec2:DescribeTags"</span><span class="token punctuation">,</span>
                <span class="token string">"ec2:DescribeVolumes"</span><span class="token punctuation">,</span>
                <span class="token string">"ec2:DetachVolume"</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token string">"*"</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/add-iam-ebs-csi-policy.jpg)</p>
<p>IAM - 역할 - <code>&#x3C;your-cluster-name></code> 항목을 검색하여 <code>NodeInstanceRole</code> 단어를 포함하는 역할에 정책을 연결해 주세요.</p>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/add-iam-ebs-csi-policy-2.jpg)</p>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span></span>kubectl get pods --namespace<span class="token operator">=</span>kube-system</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/ebs-csi-driver-pods.jpg)</p>
<p>정책 연결을 완료하였습니다. 이제 쿠버네티스로 EBS CSI 드라이버의 기능을 사용할 수 있습니다.</p>
<h2 id="ALB-수신-컨트롤러-배포" style="position:relative;">ALB 수신 컨트롤러 배포<a href="#ALB-%EC%88%98%EC%8B%A0-%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC-%EB%B0%B0%ED%8F%AC" aria-label="ALB 수신 컨트롤러 배포 permalink" class="icon-heading-link after"><svg viewBox="0 0 24 24" height="24" aria-hidden="true"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p><strong>LB</strong>(Load Balancer, 로드 밸런서)는 애플리케이션이 2개 이상 있을 때 서버에 가해지는 부하(load)를 분산(balancer)시켜 작업을 나누는 장치 또는 기술을 의미합니다.</p>
<p><strong>ALB</strong>(Application Load Balancer)는 AWS에서 서비스 중인 로드 밸런서 중의 하나로 애플리케이션(HTTP, FTP, SMTP) 계층에서 로드를 분산하는 L7(Layer 7, 7계층) 로드 밸런서입니다. HTTP 헤더, 쿠키 등과 같은 사용자의 요청을 기준으로 특정 서버에 트래픽을 분산하는 것이 가능합니다. 클라이언트의 요청을 보다 세분화하여 서버에 전달할 수 있습니다.</p>
<p><strong>aws-alb-ingress-controller.yaml</strong></p>
<div class="gatsby-highlight" data-language="yaml"><pre style="counter-reset: linenumber NaN" class="language-yaml line-numbers"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>alb<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>controller
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>alb<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>controller
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>alb<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>controller<span class="token punctuation">-</span>0.1.11
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRole
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>alb<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>controller
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>alb<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>controller
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>alb<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>controller<span class="token punctuation">-</span>0.1.11
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
<span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">""</span>
      <span class="token punctuation">-</span> extensions
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> configmaps
      <span class="token punctuation">-</span> endpoints
      <span class="token punctuation">-</span> events
      <span class="token punctuation">-</span> ingresses
      <span class="token punctuation">-</span> ingresses/status
      <span class="token punctuation">-</span> services
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> create
      <span class="token punctuation">-</span> get
      <span class="token punctuation">-</span> list
      <span class="token punctuation">-</span> update
      <span class="token punctuation">-</span> watch
      <span class="token punctuation">-</span> patch
  <span class="token punctuation">-</span> <span class="token key atrule">apiGroups</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">""</span>
      <span class="token punctuation">-</span> extensions
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> nodes
      <span class="token punctuation">-</span> pods
      <span class="token punctuation">-</span> secrets
      <span class="token punctuation">-</span> services
      <span class="token punctuation">-</span> namespaces
    <span class="token key atrule">verbs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> get
      <span class="token punctuation">-</span> list
      <span class="token punctuation">-</span> watch
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRoleBinding
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>alb<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>controller
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>alb<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>controller
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>alb<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>controller<span class="token punctuation">-</span>0.1.11
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
<span class="token key atrule">roleRef</span><span class="token punctuation">:</span>
  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io
  <span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRole
  <span class="token key atrule">name</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>alb<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>controller
<span class="token key atrule">subjects</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
    <span class="token key atrule">name</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>alb<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>controller
    <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>alb<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>controller
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>alb<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>controller
    <span class="token key atrule">helm.sh/chart</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>alb<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>controller<span class="token punctuation">-</span>0.1.11
    <span class="token key atrule">app.kubernetes.io/managed-by</span><span class="token punctuation">:</span> Helm
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>alb<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>controller
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app.kubernetes.io/name</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>alb<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>controller
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>alb<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>controller
          <span class="token key atrule">image</span><span class="token punctuation">:</span> <span class="token string">"docker.io/amazon/aws-alb-ingress-controller:v1.1.3"</span>
          <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
          <span class="token key atrule">args</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>cluster<span class="token punctuation">-</span>name=&lt;your<span class="token punctuation">-</span>cluster<span class="token punctuation">-</span>name<span class="token punctuation">></span>
            <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>class=alb
            <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>aws<span class="token punctuation">-</span>region=ap<span class="token punctuation">-</span>northeast<span class="token punctuation">-</span><span class="token number">2</span>
            <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>aws<span class="token punctuation">-</span>vpc<span class="token punctuation">-</span>id=&lt;your<span class="token punctuation">-</span>vpc<span class="token punctuation">-</span>id<span class="token punctuation">></span>
          <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token key atrule">ports</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> health
              <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">10254</span>
              <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
          <span class="token key atrule">resources</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token key atrule">serviceAccountName</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>alb<span class="token punctuation">-</span>ingress<span class="token punctuation">-</span>controller
      <span class="token key atrule">terminationGracePeriodSeconds</span><span class="token punctuation">:</span> <span class="token number">60</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p><code>--aws-vpc-id</code> 필드에 대한 정보는 <em>- AWS > VPC 메뉴 또는 -</em> 다음 명령어를 입력해 확인할 수 있습니다. 자세한 정보는 <a href="https://docs.aws.amazon.com/cli/latest/reference/eks/describe-cluster.html">AWS 공식 문서 > describe-cluster</a> 내용을 참조해 주세요.</p>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span></span>aws eks describe-cluster --name<span class="token operator">=</span><span class="token operator">&lt;</span>your-cluster-name<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/describe-cluster.jpg)</p>
<blockquote>
<p>필자는 <strong>Helm</strong>(헬름)에서 제공하는 차트를 사용하였습니다. 하단의 <code>--cluster-name</code>, <code>--aws-region</code>, <code>--aws-vpc-id</code> 필드는 여러분이 설정한 값으로 입력해 주세요. 헬름 차트에 대한 자세한 정보는 <a href="https://github.com/helm/charts/tree/master/incubator/aws-alb-ingress-controller">helm > charts >  aws-alb-ingress-controller</a> 내용을 참조해 주세요.</p>
</blockquote>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl apply -f aws-alb-ingress-controller.yaml
kubectl get all</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/apply-aws-alb-ingress-controller.jpg)</p>
<p>ALB 수신 컨트롤러 생성을 완료하였습니다.</p>
<h2 id="RDS-데이터베이스-생성" style="position:relative;">RDS 데이터베이스 생성<a href="#RDS-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%83%9D%EC%84%B1" aria-label="RDS 데이터베이스 생성 permalink" class="icon-heading-link after"><svg viewBox="0 0 24 24" height="24" aria-hidden="true"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p><strong>RDS</strong>(Relational Database Service)는 AWS 클라우드에서 관계형 데이터베이스를 더 쉽게 설치, 운영 및 확장할 수 있는 웹 서비스입니다. RDS는 어렵거나 지루한 관계형 데이터베이스 관리 작업을 대다수 대신합니다.</p>
<p>RDS - 데이터베이스 - 데이터베이스 생성 버튼을 클릭하여 새 데이터베이스 정보를 입력해 주세요. 데이터베이스 인스턴스 생성에 대한 자세한 정보는 <a href="https://docs.aws.amazon.com/ko_kr/AmazonRDS/latest/UserGuide/CHAP_Tutorials.WebServerDB.CreateDBInstance.html">AWS 공식 문서 > RDS DB 인스턴스 만들기</a> 내용을 참조해 주세요.</p>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/create-rds-database.jpg)</p>
<blockquote>
<p>필자의 경우 최소 사양으로 구성하였습니다. 사양이 높을수록 월 청구 요금도 높아지기 때문에 하단의 월별 추정 요금을 확인하면서 설정해 주세요.</p>
</blockquote>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/create-rds-database-2.jpg)</p>
<p>데이터베이스 생성을 완료하였습니다.</p>
<h2 id="네임스페이스-생성" style="position:relative;">네임스페이스 생성<a href="#%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4-%EC%83%9D%EC%84%B1" aria-label="네임스페이스 생성 permalink" class="icon-heading-link after"><svg viewBox="0 0 24 24" height="24" aria-hidden="true"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p><strong>Namespace</strong>(네임스페이스)는 클러스터 내 논리적인 분리를 통한 가상 클러스터를 의미합니다. 같은 네임스페이스 내 오브젝트는 기본적으로 동일한 접근 제어 정책을 갖습니다.</p>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span></span>kubectl get namespace</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>쿠버네티스는 처음에 3개의 네임스페이스를 갖습니다.</p>
<ul>
<li><code>default</code>: 다른 네임스페이스가 없는 오브젝트를 위한 기본 네임스페이스</li>
<li><code>kube-system</code>: 쿠버네티스 시스템에서 생성한 오브젝트를 위한 네임스페이스</li>
<li><code>kube-public</code>: 모든 사용자(인증되지 않은 사용자 포함)가 읽기 권한으로 접근할 수 있는 네임스페이스</li>
</ul>
<p>다음 명령어를 입력하여 네임스페이스를 생성합니다.</p>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span></span>kubectl create namespace <span class="token operator">&lt;</span>insert-your-namespace-name<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/create-namespace.jpg)</p>
<blockquote>
<p>필자는 <code>fms</code> 네임스페이스를 생성하였습니다. 여러분이 원하는 네임스페이스를 생성해 주세요. 네임스페이스를 삭제하고 싶다면 다음 명령어를 입력해 주세요.</p>
</blockquote>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span></span>kubectl delete namespace <span class="token operator">&lt;</span>insert-your-namespace-name<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>모든 오브젝트가 네임스페이스에 속하지는 않습니다. 파드, 서비스 등의 쿠버네티스 리소스는 네임스페이스에 속하지만 네임스페이스 리소스 자체는 네임스페이스에 속하지 않습니다. 노드나 퍼시스턴트 볼륨 등의 저수준 리소스는 어느 네임스페이스에도 속하지 않습니다.</p>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl api-resources --namespaced<span class="token operator">=</span>true  // 네임스페이스에 속하는 리소스 조회
kubectl api-resources --namespaced<span class="token operator">=</span>false // 네임스페이스에 속하지 않는 리소스 조회</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<h3 id="네임스페이스에-속하는-리소스" style="position:relative;">네임스페이스에 속하는 리소스<a href="#%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4%EC%97%90-%EC%86%8D%ED%95%98%EB%8A%94-%EB%A6%AC%EC%86%8C%EC%8A%A4" aria-label="네임스페이스에 속하는 리소스 permalink" class="icon-heading-link after"><svg viewBox="0 0 24 24" height="24" aria-hidden="true"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span></span>kubectl get <span class="token operator">&lt;</span>NAME<span class="token operator">|</span>SHORTNAMES<span class="token operator">></span> --namespace<span class="token operator">=</span><span class="token operator">&lt;</span>your-namespace<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<table>
<thead>
<tr>
<th>NAME</th>
<th>SHORTNAMES</th>
<th>KIND</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bindings</code></td>
<td></td>
<td>Binding</td>
</tr>
<tr>
<td><code>configmaps</code></td>
<td><code>cm</code></td>
<td>ConfigMap</td>
</tr>
<tr>
<td><code>endpoints</code></td>
<td><code>ep</code></td>
<td>Endpoints</td>
</tr>
<tr>
<td><code>events</code></td>
<td><code>ev</code></td>
<td>Event</td>
</tr>
<tr>
<td><code>limitranges</code></td>
<td><code>limits</code></td>
<td>LimitRange</td>
</tr>
<tr>
<td><code>persistentvolumeclaims</code></td>
<td><code>pvc</code></td>
<td>PersistentVolumeClaim</td>
</tr>
<tr>
<td><code>pods</code></td>
<td>`po</td>
<td>pod`</td>
</tr>
<tr>
<td><code>podtemplates</code></td>
<td></td>
<td>PodTemplate</td>
</tr>
<tr>
<td><code>replicationcontrollers</code></td>
<td><code>rc</code></td>
<td>ReplicationController</td>
</tr>
<tr>
<td><code>resourcequotas</code></td>
<td><code>quota</code></td>
<td>ResourceQuota</td>
</tr>
<tr>
<td><code>secrets</code></td>
<td></td>
<td>Secret</td>
</tr>
<tr>
<td><code>serviceaccounts</code></td>
<td><code>sa</code></td>
<td>ServiceAccount</td>
</tr>
<tr>
<td><code>services</code></td>
<td><code>svc</code></td>
<td>Service</td>
</tr>
<tr>
<td><code>controllerrevisions</code></td>
<td></td>
<td>ControllerRevision</td>
</tr>
<tr>
<td><code>daemonsets</code></td>
<td><code>ds</code></td>
<td>DaemonSet</td>
</tr>
<tr>
<td><code>deployments</code></td>
<td><code>deploy</code></td>
<td>Deployment</td>
</tr>
<tr>
<td><code>replicasets</code></td>
<td><code>rs</code></td>
<td>ReplicaSet</td>
</tr>
<tr>
<td><code>statefulsets</code></td>
<td><code>sts</code></td>
<td>StatefulSet</td>
</tr>
<tr>
<td><code>localsubjectaccessreviews</code></td>
<td></td>
<td>LocalSubjectAccessReview</td>
</tr>
<tr>
<td><code>horizontalpodautoscalers</code></td>
<td><code>hpa</code></td>
<td>HorizontalPodAutoscaler</td>
</tr>
<tr>
<td><code>cronjobs</code></td>
<td><code>cj</code></td>
<td>CronJob</td>
</tr>
<tr>
<td><code>jobs</code></td>
<td></td>
<td>Job</td>
</tr>
<tr>
<td><code>leases</code></td>
<td></td>
<td>Lease</td>
</tr>
<tr>
<td><code>events</code></td>
<td><code>ev</code></td>
<td>Event</td>
</tr>
<tr>
<td><code>daemonsets</code></td>
<td><code>ds</code></td>
<td>DaemonSet</td>
</tr>
<tr>
<td><code>deployments</code></td>
<td><code>deploy</code></td>
<td>Deployment</td>
</tr>
<tr>
<td><code>ingresses</code></td>
<td><code>ing</code></td>
<td>Ingress</td>
</tr>
<tr>
<td><code>networkpolicies</code></td>
<td><code>netpol</code></td>
<td>NetworkPolicy</td>
</tr>
<tr>
<td><code>replicasets</code></td>
<td><code>rs</code></td>
<td>ReplicaSet</td>
</tr>
<tr>
<td><code>ingresses</code></td>
<td><code>ing</code></td>
<td>Ingress</td>
</tr>
<tr>
<td><code>networkpolicies</code></td>
<td><code>netpo</code></td>
<td>NetworkPolicy</td>
</tr>
<tr>
<td><code>poddisruptionbudgets</code></td>
<td><code>pdb</code></td>
<td>PodDisruptionBudget</td>
</tr>
<tr>
<td><code>rolebindings</code></td>
<td></td>
<td>RoleBinding</td>
</tr>
<tr>
<td><code>roles</code></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="네임스페이스에-속하지-않는-리소스" style="position:relative;">네임스페이스에 속하지 않는 리소스<a href="#%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4%EC%97%90-%EC%86%8D%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94-%EB%A6%AC%EC%86%8C%EC%8A%A4" aria-label="네임스페이스에 속하지 않는 리소스 permalink" class="icon-heading-link after"><svg viewBox="0 0 24 24" height="24" aria-hidden="true"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span></span>kubectl get <span class="token operator">&lt;</span>NAME<span class="token operator">|</span>SHORTNAMES<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<table>
<thead>
<tr>
<th>NAME</th>
<th>SHORTNAMES</th>
<th>KIND</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>componentstatuses</code></td>
<td><code>cs</code></td>
<td>ComponentStatus</td>
</tr>
<tr>
<td><code>namespaces</code></td>
<td><code>ns</code></td>
<td>Namespace</td>
</tr>
<tr>
<td><code>nodes</code></td>
<td><code>no</code></td>
<td>Node</td>
</tr>
<tr>
<td><code>persistentvolumes</code></td>
<td><code>pv</code></td>
<td>PersistentVolume</td>
</tr>
<tr>
<td><code>mutatingwebhookconfigurations</code></td>
<td></td>
<td>MutatingWebhookConfiguration</td>
</tr>
<tr>
<td><code>validatingwebhookconfigurations</code></td>
<td></td>
<td>ValidatingWebhookConfiguration</td>
</tr>
<tr>
<td><code>customresourcedefinitions</code></td>
<td><code>crd,crds</code></td>
<td>CustomResourceDefinition</td>
</tr>
<tr>
<td><code>apiservices</code></td>
<td></td>
<td>APIService</td>
</tr>
<tr>
<td><code>tokenreviews</code></td>
<td></td>
<td>TokenReview</td>
</tr>
<tr>
<td><code>selfsubjectaccessreviews</code></td>
<td></td>
<td>SelfSubjectAccessReview</td>
</tr>
<tr>
<td><code>selfsubjectrulesreviews</code></td>
<td></td>
<td>SelfSubjectRulesReview</td>
</tr>
<tr>
<td><code>subjectaccessreviews</code></td>
<td></td>
<td>SubjectAccessReview</td>
</tr>
<tr>
<td><code>certificatesigningrequests</code></td>
<td><code>csr</code></td>
<td>CertificateSigningRequest</td>
</tr>
<tr>
<td><code>eniconfigs</code></td>
<td></td>
<td>ENIConfig</td>
</tr>
<tr>
<td><code>podsecuritypolicies</code></td>
<td><code>psp</code></td>
<td>PodSecurityPolicy</td>
</tr>
<tr>
<td><code>runtimeclasses</code></td>
<td></td>
<td>RuntimeClass</td>
</tr>
<tr>
<td><code>podsecuritypolicies</code></td>
<td><code>psp</code></td>
<td>PodSecurityPolicy</td>
</tr>
<tr>
<td><code>clusterrolebindings</code></td>
<td></td>
<td>ClusterRoleBinding</td>
</tr>
<tr>
<td><code>clusterroles</code></td>
<td></td>
<td>ClusterRole</td>
</tr>
<tr>
<td><code>priorityclasses</code></td>
<td><code>pc</code></td>
<td>PriorityClass</td>
</tr>
<tr>
<td><code>csidrivers</code></td>
<td></td>
<td>CSIDriver</td>
</tr>
<tr>
<td><code>csinodes</code></td>
<td></td>
<td>CSINode</td>
</tr>
<tr>
<td><code>storageclasses</code></td>
<td><code>sc</code></td>
<td>StorageClass</td>
</tr>
<tr>
<td><code>volumeattachments</code></td>
<td></td>
<td>VolumeAttachment</td>
</tr>
</tbody>
</table>
<p>네임스페이스 생성을 완료하였습니다.</p>
<h2 id="ExternalName-설정" style="position:relative;">ExternalName 설정<a href="#ExternalName-%EC%84%A4%EC%A0%95" aria-label="ExternalName 설정 permalink" class="icon-heading-link after"><svg viewBox="0 0 24 24" height="24" aria-hidden="true"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p><strong>자격 증명 세부 정보 보기</strong> 또는 RDS - 데이터베이스 - <code>&#x3C;your-database-identifier></code> 항목을 클릭하여 현재 생성한 데이터베이스의 엔드포인트를 복사합니다.</p>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/create-rds-database-3.jpg)</p>
<p>데이터베이스의 경우 쿠버네티스에서 관리하지 않는 AWS 서비스로 쿠버네티스 명령어로는 조회할 수 없지만 필자와 동일한 VPC 보안 그룹에 속해 있어 서비스를 사용할 수 있습니다.</p>
<p>다만, 서비스에서 사용할 때 <em>- 가독성이 낮은 -</em> 엔드포인트 주소 전체를 입력해야 하는데 <code>ExternalName</code> 유형을 지정해서 <code>spec.externalName</code> 파라미터를 사용하면 쿠버네티스 안에서 별칭 형태로 서비스에 적용할 수 있습니다. 자세한 정보는 <a href="https://kubernetes.io/ko/docs/concepts/services-networking/service/#externalname">쿠버네티스 공식 문서 > ExternalName 유형</a> 내용을 참조해 주세요.</p>
<p><strong>external-name.yaml</strong></p>
<div class="gatsby-highlight" data-language="yaml"><pre style="counter-reset: linenumber NaN" class="language-yaml line-numbers"><code class="language-yaml"><span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> mariadb
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> &lt;your<span class="token punctuation">-</span>namespace<span class="token punctuation">></span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> ExternalName
  <span class="token key atrule">externalName</span><span class="token punctuation">:</span> &lt;database<span class="token punctuation">-</span>endpoint<span class="token punctuation">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl apply -f external-name.yaml
kubectl get services --namespace<span class="token operator">=</span><span class="token operator">&lt;</span>your-namespace<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/apply-external-name-for-mariadb.jpg)</p>
<p>이제 오브젝트에 <em>- 가독성이 높은 -</em> <code>mariadb</code> 별칭으로 서비스에 적용할 수 있습니다.</p>
<h2 id="MariaDB-CLI-배포" style="position:relative;">MariaDB CLI 배포<a href="#MariaDB-CLI-%EB%B0%B0%ED%8F%AC" aria-label="MariaDB CLI 배포 permalink" class="icon-heading-link after"><svg viewBox="0 0 24 24" height="24" aria-hidden="true"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p>외부 서비스인 데이터베이스는 쿠버네티스 명령어로 조회할 수 없기 때문에 쿠버네티스 안에서 사용할 수 있도록 CLI 툴을 배포해 봅시다.</p>
<p><strong>mariadb-cli.yaml</strong></p>
<div class="gatsby-highlight" data-language="yaml"><pre style="counter-reset: linenumber NaN" class="language-yaml line-numbers"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> mariadb<span class="token punctuation">-</span>cli
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> &lt;your<span class="token punctuation">-</span>namespace<span class="token punctuation">></span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> mariadb<span class="token punctuation">-</span>cli
    <span class="token key atrule">component</span><span class="token punctuation">:</span> client
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> mariadb<span class="token punctuation">-</span>cli
      <span class="token key atrule">component</span><span class="token punctuation">:</span> client
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> mariadb<span class="token punctuation">-</span>cli
        <span class="token key atrule">component</span><span class="token punctuation">:</span> client
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">serviceAccountName</span><span class="token punctuation">:</span> default
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> mariadb
          <span class="token key atrule">image</span><span class="token punctuation">:</span> mariadb<span class="token punctuation">:</span><span class="token number">10.3</span>
          <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> <span class="token string">"IfNotPresent"</span>
          <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/bin/sh"</span><span class="token punctuation">]</span>
          <span class="token key atrule">args</span><span class="token punctuation">:</span>
            <span class="token punctuation">[</span>
              <span class="token string">"-c"</span><span class="token punctuation">,</span>
              <span class="token string">"while true; do echo $(date +%Y-%m-%d' '%H:%M:%S); sleep 60; done"</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span>
          <span class="token key atrule">resources</span><span class="token punctuation">:</span>
            <span class="token key atrule">requests</span><span class="token punctuation">:</span>
              <span class="token key atrule">cpu</span><span class="token punctuation">:</span> 50m
              <span class="token key atrule">memory</span><span class="token punctuation">:</span> 64Mi
            <span class="token key atrule">limits</span><span class="token punctuation">:</span>
              <span class="token key atrule">cpu</span><span class="token punctuation">:</span> 100m
              <span class="token key atrule">memory</span><span class="token punctuation">:</span> 64Mi</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl apply -f mariadb-cli.yaml
kubectl get pods --namespace<span class="token operator">=</span><span class="token operator">&lt;</span>your-namespace<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/apply-mariadb-cli.jpg)</p>
<blockquote>
<p>필자의 경우 <em>- 지속적 연결 상태 확인 목적으로 -</em> <code>args</code> 필드에 60초마다 현재 시각을 출력하는 스크립트를 정의해 놓았습니다. 여러분은 다른 스크립트로 정의하거나 정의하지 않아도 됩니다. <code>kubectl logs -f &#x3C;mariadb-cli-pod> --namespace=&#x3C;your-namespace></code> 명령어로 확인할 수 있습니다.</p>
</blockquote>
<p>다음 명령어를 입력하면 <em>- 다소 복잡하긴 하지만 -</em> 파드를 조회하는 과정을 생략할 수 있습니다.</p>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span></span>kubectl logs -f <span class="token variable"><span class="token variable">$(</span>kubectl get pods -o <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">"{.items[0].metadata.name}"</span> --namespace<span class="token operator">=</span><span class="token operator">&lt;</span>your-namespace<span class="token operator">></span> -l <span class="token string">"app=mariadb-cli"</span><span class="token variable">)</span></span> --namespace<span class="token operator">=</span><span class="token operator">&lt;</span>your-namespace<span class="token operator">></span> --timestamps</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<ul>
<li><code>-l, --selector</code>: 레이블 셀렉터. 쿠버네티스 오브젝트를 식별합니다. 자세한 정보는 <a href="https://kubernetes.io/ko/docs/concepts/overview/working-with-objects/labels/#%EB%A0%88%EC%9D%B4%EB%B8%94-%EC%85%80%EB%A0%89%ED%84%B0">쿠버네티스 공식 문서 > 레이블과 셀렉터</a> 내용을 참조해 주세요.</li>
<li><code>-o, --output</code>: 반환된 목록의 각 파드에서 이름을 가져오는 표현식을 지정합니다.</li>
</ul>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/apply-mariadb-cli-2.jpg)</p>
<p>다음 명령어를 입력하여 <code>mariadb-cli</code> 내부로 접속합니다.</p>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl <span class="token builtin class-name">exec</span> -it <span class="token operator">&lt;</span>mariadb-cli-pod<span class="token operator">></span> --namespace<span class="token operator">=</span><span class="token operator">&lt;</span>your-namespace<span class="token operator">></span> <span class="token function">bash</span>
mysql -h <span class="token operator">&lt;</span>mariadb-external-name<span class="token operator">></span> -u admin -p
Enter Password: <span class="token operator">&lt;</span>mariadb-password<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/connect-mariadb.jpg)</p>
<blockquote>
<p><code>&#x3C;mariadb-external-name></code> 필드의 경우 엔드포인트 주소 그대로 입력해도 무방하지만 미리 정의해 놓은 별칭을 사용하는 것이 좋습니다.</p>
</blockquote>
<h3 id="ERROR-Connection-Failed" style="position:relative;">[ERROR] Connection Failed.<a href="#ERROR-Connection-Failed" aria-label="ERROR Connection Failed permalink" class="icon-heading-link after"><svg viewBox="0 0 24 24" height="24" aria-hidden="true"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3>
<p>접속에 실패할 경우 로드 밸런서 및 보안 그룹 설정을 검토해 주세요.</p>
<ol>
<li><code>aws-alb-ingress-controller</code> 설정에서 <code>cluster-name</code> 또는 <code>aws-vpc-id</code> 필드 값 확인</li>
<li>데이터베이스 보안 그룹 <code>ClusterSharedNodeSecurityGroup</code> 추가 확인 (<code>ControlPlaneSecurityGroup</code> 아님)</li>
</ol>
<h2 id="MaxScale-배포" style="position:relative;">MaxScale 배포<a href="#MaxScale-%EB%B0%B0%ED%8F%AC" aria-label="MaxScale 배포 permalink" class="icon-heading-link after"><svg viewBox="0 0 24 24" height="24" aria-hidden="true"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p>MariaDB <strong>MaxScale</strong>(맥스스케일)은 기본 데이터베이스 인프라에서 애플리케이션 개발을 분리하여 애플리케이션 개발을 단순화하는 데이터베이스 프록시입니다.</p>
<p>MaxScale 서비스를 사용하기 위해 <code>maxscale</code> 계정을 생성하고 특정 테이블에 대한 권한을 부여해야 합니다. 자세한 정보는 <a href="https://mariadb.com/kb/en/mariadb-maxscale-23-setting-up-mariadb-maxscale/#creating-a-user-account-for-maxscale">MariaDB > Creating a user account for MaxScale</a> 내용을 참조해 주세요.</p>
<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'maxscale'</span><span class="token variable">@'%'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'&lt;insert-your-maxscale-password>'</span><span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token keyword">ON</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span> <span class="token keyword">TO</span> <span class="token string">'maxscale'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token keyword">ON</span> mysql<span class="token punctuation">.</span>db <span class="token keyword">TO</span> <span class="token string">'maxscale'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token keyword">ON</span> mysql<span class="token punctuation">.</span>tables_priv <span class="token keyword">TO</span> <span class="token string">'maxscale'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token keyword">ON</span> mysql<span class="token punctuation">.</span>roles_mapping <span class="token keyword">TO</span> <span class="token string">'maxscale'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token keyword">SHOW</span> <span class="token keyword">DATABASES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'maxscale'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> Host<span class="token punctuation">,</span> <span class="token keyword">User</span> <span class="token keyword">FROM</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/create-user-account-for-maxscale.jpg)</p>
<p><strong>my-maxscale.cnf</strong></p>
<div class="gatsby-highlight" data-language="properties"><pre style="counter-reset: linenumber NaN" class="language-properties line-numbers"><code class="language-properties">[master]
<span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value">server</span>
<span class="token attr-name">address</span><span class="token punctuation">=</span><span class="token attr-value">mariadb</span>
<span class="token attr-name">port</span><span class="token punctuation">=</span><span class="token attr-value">3306</span>
<span class="token attr-name">protocol</span><span class="token punctuation">=</span><span class="token attr-value">MariaDBBackend</span>

[slave1]
<span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value">server</span>
<span class="token attr-name">address</span><span class="token punctuation">=</span><span class="token attr-value">mariadb</span>
<span class="token attr-name">port</span><span class="token punctuation">=</span><span class="token attr-value">3306</span>
<span class="token attr-name">protocol</span><span class="token punctuation">=</span><span class="token attr-value">MariaDBBackend</span>

[slave2]
<span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value">server</span>
<span class="token attr-name">address</span><span class="token punctuation">=</span><span class="token attr-value">mariadb</span>
<span class="token attr-name">port</span><span class="token punctuation">=</span><span class="token attr-value">3306</span>
<span class="token attr-name">protocol</span><span class="token punctuation">=</span><span class="token attr-value">MariaDBBackend</span>

<span class="token comment"># Monitor for the servers</span>
<span class="token comment"># This will keep MaxScale aware of the state of the servers.</span>
<span class="token comment"># MySQL Monitor documentation:</span>
<span class="token comment"># https://github.com/mariadb-corporation/MaxScale/blob/2.3/Documentation/Monitors/MariaDB-Monitor.md</span>

[MariaDB-Monitor]
<span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value">monitor</span>
<span class="token attr-name">module</span><span class="token punctuation">=</span><span class="token attr-value">mariadbmon</span>
<span class="token attr-name">servers</span><span class="token punctuation">=</span><span class="token attr-value">master</span>
<span class="token attr-name">user</span><span class="token punctuation">=</span><span class="token attr-value">maxscale</span>
<span class="token attr-name">passwd</span><span class="token punctuation">=</span><span class="token attr-value">&lt;your-maxscale-password></span>
<span class="token attr-name">auto_failover</span><span class="token punctuation">=</span><span class="token attr-value">true</span>
<span class="token attr-name">auto_rejoin</span><span class="token punctuation">=</span><span class="token attr-value">true</span>
<span class="token attr-name">enforce_read_only_slaves</span><span class="token punctuation">=</span><span class="token attr-value">1</span>

<span class="token comment"># Service definitions</span>
<span class="token comment"># Service Definition for a read-only service and a read/write splitting service.</span>

<span class="token comment"># ReadConnRoute documentation:</span>
<span class="token comment"># https://github.com/mariadb-corporation/MaxScale/blob/2.3/Documentation/Routers/ReadConnRoute.md</span>

[Read-Only-Service]
<span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value">service</span>
<span class="token attr-name">router</span><span class="token punctuation">=</span><span class="token attr-value">readconnroute</span>
<span class="token attr-name">servers</span><span class="token punctuation">=</span><span class="token attr-value">master</span>
<span class="token attr-name">user</span><span class="token punctuation">=</span><span class="token attr-value">maxscale</span>
<span class="token attr-name">passwd</span><span class="token punctuation">=</span><span class="token attr-value">&lt;your-maxscale-password></span>
<span class="token attr-name">router_options</span><span class="token punctuation">=</span><span class="token attr-value">slave</span>

<span class="token comment"># ReadWriteSplit documentation:</span>
<span class="token comment"># https://github.com/mariadb-corporation/MaxScale/blob/2.3/Documentation/Routers/ReadWriteSplit.md</span>

[Read-Write-Service]
<span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value">service</span>
<span class="token attr-name">router</span><span class="token punctuation">=</span><span class="token attr-value">readwritesplit</span>
<span class="token attr-name">servers</span><span class="token punctuation">=</span><span class="token attr-value">master</span>
<span class="token attr-name">user</span><span class="token punctuation">=</span><span class="token attr-value">maxscale</span>
<span class="token attr-name">passwd</span><span class="token punctuation">=</span><span class="token attr-value">&lt;your-maxscale-password></span>
<span class="token attr-name">master_failure_mode</span><span class="token punctuation">=</span><span class="token attr-value">fail_on_write</span>

<span class="token comment"># Listener definitions for the services</span>
<span class="token comment"># Listeners represent the ports the services will listen on.</span>

[Read-Only-Listener]
<span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value">listener</span>
<span class="token attr-name">service</span><span class="token punctuation">=</span><span class="token attr-value">Read-Only-Service</span>
<span class="token attr-name">protocol</span><span class="token punctuation">=</span><span class="token attr-value">MySQLClient</span>
<span class="token attr-name">port</span><span class="token punctuation">=</span><span class="token attr-value">4008</span>
<span class="token attr-name">address</span><span class="token punctuation">=</span><span class="token attr-value">0.0.0.0</span>

[Read-Write-Listener]
<span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value">listener</span>
<span class="token attr-name">service</span><span class="token punctuation">=</span><span class="token attr-value">Read-Write-Service</span>
<span class="token attr-name">protocol</span><span class="token punctuation">=</span><span class="token attr-value">MySQLClient</span>
<span class="token attr-name">port</span><span class="token punctuation">=</span><span class="token attr-value">4006</span>
<span class="token attr-name">address</span><span class="token punctuation">=</span><span class="token attr-value">0.0.0.0</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Maxscale 구성으로 시크릿을 생성해 봅시다.</p>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl create secret generic maxscale-config --from-file<span class="token operator">=</span>my-maxscale.cnf<span class="token operator">=</span><span class="token operator">&lt;</span>repository-absolute-path<span class="token operator">></span>/my-maxscale.cnf --namespace<span class="token operator">=</span><span class="token operator">&lt;</span>your-namespace<span class="token operator">></span>
kubectl get secrets --namespace<span class="token operator">=</span><span class="token operator">&lt;</span>your-namespace<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<blockquote>
<p><code>&#x3C;repository-absolute-path></code> 필드의 경우 <code>${PWD}</code> 변수를 사용하면 편리합니다.</p>
</blockquote>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/create-secret-for-maxscale-config.jpg)</p>
<p><strong>maxscale.yaml</strong></p>
<div class="gatsby-highlight" data-language="yaml"><pre style="counter-reset: linenumber NaN" class="language-yaml line-numbers"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> maxscale
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> &lt;your<span class="token punctuation">-</span>namespace<span class="token punctuation">></span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> maxscale
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">4006</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">4006</span>
      <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> maxscale
  <span class="token key atrule">type</span><span class="token punctuation">:</span> ClusterIP
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> extensions/v1beta1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> maxscale
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> &lt;your<span class="token punctuation">-</span>namespace<span class="token punctuation">></span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> maxscale
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">initContainers</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> init<span class="token punctuation">-</span>myservice
          <span class="token key atrule">image</span><span class="token punctuation">:</span> mariadb/maxscale<span class="token punctuation">:</span><span class="token number">2.3</span>
          <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> conf<span class="token punctuation">-</span>d
              <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /tmp/maxscale.cnf.d
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> secret<span class="token punctuation">-</span>conf<span class="token punctuation">-</span>d
              <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /tmp/source.maxscale.cnf.d
          <span class="token key atrule">command</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token string">"sh"</span>
            <span class="token punctuation">-</span> <span class="token string">"-c"</span>
            <span class="token punctuation">-</span> <span class="token string">"cat /tmp/source.maxscale.cnf.d/my-maxscale.cnf >> /tmp/maxscale.cnf.d/my-maxscale.cnf"</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> maxscale
          <span class="token key atrule">image</span><span class="token punctuation">:</span> mariadb/maxscale<span class="token punctuation">:</span><span class="token number">2.3</span>
          <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
          <span class="token key atrule">resources</span><span class="token punctuation">:</span>
            <span class="token key atrule">requests</span><span class="token punctuation">:</span>
              <span class="token key atrule">cpu</span><span class="token punctuation">:</span> 50m
              <span class="token key atrule">memory</span><span class="token punctuation">:</span> 200Mi
            <span class="token key atrule">limits</span><span class="token punctuation">:</span>
              <span class="token key atrule">cpu</span><span class="token punctuation">:</span> 300m
              <span class="token key atrule">memory</span><span class="token punctuation">:</span> 300Mi
          <span class="token key atrule">ports</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">4006</span>
              <span class="token key atrule">name</span><span class="token punctuation">:</span> readwrite<span class="token punctuation">-</span>port
            <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">4008</span>
              <span class="token key atrule">name</span><span class="token punctuation">:</span> readonly<span class="token punctuation">-</span>port
          <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> conf<span class="token punctuation">-</span>d
              <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> <span class="token string">"/etc/maxscale.cnf.d"</span>
              <span class="token key atrule">readOnly</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> secret<span class="token punctuation">-</span>conf<span class="token punctuation">-</span>d
          <span class="token key atrule">secret</span><span class="token punctuation">:</span>
            <span class="token key atrule">secretName</span><span class="token punctuation">:</span> maxscale<span class="token punctuation">-</span>config
            <span class="token key atrule">items</span><span class="token punctuation">:</span>
              <span class="token punctuation">-</span> <span class="token key atrule">key</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>maxscale.cnf
                <span class="token key atrule">path</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>maxscale.cnf
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> conf<span class="token punctuation">-</span>d
          <span class="token key atrule">emptyDir</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl apply -f maxscale.yaml
kubectl get services --namespace<span class="token operator">=</span><span class="token operator">&lt;</span>your-namespace<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/apply-maxscale.jpg)</p>
<p>MaxScale 배포를 완료하였습니다. 이제 <code>kubectl port-forward</code> 명령어로 리소스 이름과 파드 이름과 사용하여 일치하는 파드를 선택해 포트 포워딩을 할 수 있습니다.</p>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span></span>kubectl port-forward service/maxscale <span class="token number">4006</span>:4006 --namespace<span class="token operator">=</span><span class="token operator">&lt;</span>your-namespace<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/port-forward-maxscale.jpg)</p>
<p>파드의 포트를 로컬 포트로 포워딩한 상태입니다. 데이터베이스 툴을 사용하여 직접 데이터베이스에 접속해 봅시다. (필자는 <a href="https://dbeaver.io/download/"><code>DBeaver</code></a> 툴을 사용하였습니다.)</p>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/mariadb-connection-settings.jpg)</p>
<p>데이터베이스 접속을 완료하였습니다. 이제 데이터베이스에 마이그레이션 및 다양한 작업을 수행할 수 있습니다.</p>
<h2 id="Docker-자격-증명-기반-Secret-배포" style="position:relative;">Docker 자격 증명 기반 Secret 배포<a href="#Docker-%EC%9E%90%EA%B2%A9-%EC%A6%9D%EB%AA%85-%EA%B8%B0%EB%B0%98-Secret-%EB%B0%B0%ED%8F%AC" aria-label="Docker 자격 증명 기반 Secret 배포 permalink" class="icon-heading-link after"><svg viewBox="0 0 24 24" height="24" aria-hidden="true"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p>애플리케이션을 오브젝트로 배포할 때 도커 이미지를 가져오기 위한 자격 증명이 필요합니다. 그렇다면 배포하는 <code>.yaml</code> 파일마다 도커 계정과 비밀번호를 설정해야 할까요? <em>- 보안을 중요시하는 개발자라면 -</em> 절대로 그렇게 설정하고 싶지 않을 겁니다. 쿠버네티스는 중요한 정보를 별도로 저장할 수 있도록 <strong>Secret</strong>(시크릿) 기능을 지원합니다. 지금부터 도커 계정 정보를 시크릿으로 만들어 배포해 봅시다.</p>
<p>도커 사용자 이름과 비밀번호를 <code>base64</code> 형태로 변환합니다.</p>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span></span><span class="token builtin class-name">echo</span> -n <span class="token string">'&lt;username>:&lt;password>'</span> <span class="token operator">|</span> base64</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p><strong>docker/config.json</strong></p>
<p>변환한 정보를 <code>auth</code> 필드에 삽입합니다.</p>
<div class="gatsby-highlight" data-language="json"><pre style="counter-reset: linenumber NaN" class="language-json line-numbers"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"auths"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"https://index.docker.io/v1/"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"auth"</span><span class="token operator">:</span> <span class="token string">"&lt;base64-encoded-string>"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>해당 파일을 <code>base64</code> 형태로 변환합니다.</p>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span></span><span class="token function">cat</span> config.json <span class="token operator">|</span> base64</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p><strong>docker/dockerhub.yaml</strong></p>
<p>변환한 정보를 <code>.dockerconfigjson</code> 필드에 삽입합니다.</p>
<div class="gatsby-highlight" data-language="yaml"><pre style="counter-reset: linenumber NaN" class="language-yaml line-numbers"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Secret
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> dockerhub
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> &lt;your<span class="token punctuation">-</span>namespace<span class="token punctuation">></span>
<span class="token key atrule">type</span><span class="token punctuation">:</span> kubernetes.io/dockerconfigjson
<span class="token key atrule">data</span><span class="token punctuation">:</span>
  <span class="token key atrule">.dockerconfigjson</span><span class="token punctuation">:</span> &lt;base64<span class="token punctuation">-</span>encoded<span class="token punctuation">-</span>string<span class="token punctuation">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="command-line-prompt"><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span><span data-user=sally data-host=localhost></span></span>kubectl apply -f dockerhub.yaml
kubectl get secrets --namespace<span class="token operator">=</span><span class="token operator">&lt;</span>your-namespace<span class="token operator">></span>
kubectl describe secrets/dockerhub --namespace<span class="token operator">=</span><span class="token operator">&lt;</span>your-namespace<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<p>![image]({{ site.baseurl }}/assets/images/{{ page.category }}/{{ page.alias }}/apply-secret-for-dockerhub.jpg)</p>
<p>시크릿 배포를 완료하였습니다. 이제 애플리케이션 오브젝트 내 <code>imagePullSecrets</code> 필드에 다음과 같이 도커 자격 증명을 지정할 수 있습니다.</p>
<div class="gatsby-highlight" data-language="yaml"><pre style="counter-reset: linenumber NaN" class="language-yaml line-numbers"><code class="language-yaml"><span class="token punctuation">...</span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">imagePullSecrets</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> dockerhub</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>
<p>지금까지 EKS 인프라 구성을 마쳤습니다. 본 문서는 실제 개발 프로젝트를 배포하여 라우팅하는 절차는 다루지 않습니다. 이제 다음 포스트로 이동하여 프로젝트를 배포해 봅시다.</p></section></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/wadiz/zingugi/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-81b2a07c8816c04cff59.js"],"app":["/app-4124be946072d5486c9a.js"],"component---src-components-template-post-template-tsx":["/component---src-components-template-post-template-tsx-176f12a2c72ece8e210d.js"],"component---src-pages-404-js":["/component---src-pages-404-js-01f0b8e1c2ea13809f20.js"],"component---src-pages-app-tsx":["/component---src-pages-app-tsx-9aa9cfaa6076e7760c3e.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-e66e708bece1b703a3b5.js"]};/*]]>*/</script><script src="/polyfill-81b2a07c8816c04cff59.js" nomodule=""></script><script src="/component---src-components-template-post-template-tsx-176f12a2c72ece8e210d.js" async=""></script><script src="/133dbbf1d86d892ff1bf148d88afcf8c565d1168-e9b58e95995c3dfba6f8.js" async=""></script><script src="/app-4124be946072d5486c9a.js" async=""></script><script src="/framework-345c7b9eeb7bc9218cda.js" async=""></script><script src="/webpack-runtime-f0617ee23730b7b50cd2.js" async=""></script></body></html>